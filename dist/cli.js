#!/usr/bin/env node
var Cl=Object.create;var mr=Object.defineProperty;var Ol=Object.getOwnPropertyDescriptor;var vl=Object.getOwnPropertyNames;var Al=Object.getPrototypeOf,_l=Object.prototype.hasOwnProperty;var gr=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports);var $l=(s,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of vl(t))!_l.call(s,n)&&n!==e&&mr(s,n,{get:()=>t[n],enumerable:!(i=Ol(t,n))||i.enumerable});return s};var k=(s,t,e)=>(e=s!=null?Cl(Al(s)):{},$l(t||!s||!s.__esModule?mr(e,"default",{value:s,enumerable:!0}):e,s));var ko=gr((Nd,Go)=>{"use strict";Go.exports=Bo;function Bo(s,t,e){s instanceof RegExp&&(s=zo(s,e)),t instanceof RegExp&&(t=zo(t,e));var i=Uo(s,t,e);return i&&{start:i[0],end:i[1],pre:e.slice(0,i[0]),body:e.slice(i[0]+s.length,i[1]),post:e.slice(i[1]+t.length)}}function zo(s,t){var e=t.match(s);return e?e[0]:null}Bo.range=Uo;function Uo(s,t,e){var i,n,r,o,a,l=e.indexOf(s),c=e.indexOf(t,l+1),h=l;if(l>=0&&c>0){if(s===t)return[l,c];for(i=[],r=e.length;h>=0&&!a;)h==l?(i.push(h),l=e.indexOf(s,h+1)):i.length==1?a=[i.pop(),c]:(n=i.pop(),n<r&&(r=n,o=c),c=e.indexOf(t,h+1)),h=l<c&&l>=0?l:c;i.length&&(a=[r,o])}return a}});var Qo=gr((Pd,Zo)=>{var Ho=ko();Zo.exports=Ec;var Yo="\0SLASH"+Math.random()+"\0",qo="\0OPEN"+Math.random()+"\0",Bn="\0CLOSE"+Math.random()+"\0",Vo="\0COMMA"+Math.random()+"\0",Ko="\0PERIOD"+Math.random()+"\0";function zn(s){return parseInt(s,10)==s?parseInt(s,10):s.charCodeAt(0)}function Sc(s){return s.split("\\\\").join(Yo).split("\\{").join(qo).split("\\}").join(Bn).split("\\,").join(Vo).split("\\.").join(Ko)}function xc(s){return s.split(Yo).join("\\").split(qo).join("{").split(Bn).join("}").split(Vo).join(",").split(Ko).join(".")}function Jo(s){if(!s)return[""];var t=[],e=Ho("{","}",s);if(!e)return s.split(",");var i=e.pre,n=e.body,r=e.post,o=i.split(",");o[o.length-1]+="{"+n+"}";var a=Jo(r);return r.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),t.push.apply(t,o),t}function Ec(s){return s?(s.substr(0,2)==="{}"&&(s="\\{\\}"+s.substr(2)),Ti(Sc(s),!0).map(xc)):[]}function Cc(s){return"{"+s+"}"}function Oc(s){return/^-?0\d/.test(s)}function vc(s,t){return s<=t}function Ac(s,t){return s>=t}function Ti(s,t){var e=[],i=Ho("{","}",s);if(!i)return[s];var n=i.pre,r=i.post.length?Ti(i.post,!1):[""];if(/\$$/.test(i.pre))for(var o=0;o<r.length;o++){var a=n+"{"+i.body+"}"+r[o];e.push(a)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),h=l||c,f=i.body.indexOf(",")>=0;if(!h&&!f)return i.post.match(/,.*\}/)?(s=i.pre+"{"+i.body+Bn+i.post,Ti(s)):[s];var d;if(h)d=i.body.split(/\.\./);else if(d=Jo(i.body),d.length===1&&(d=Ti(d[0],!1).map(Cc),d.length===1))return r.map(function(G){return i.pre+d[0]+G});var p;if(h){var x=zn(d[0]),w=zn(d[1]),m=Math.max(d[0].length,d[1].length),E=d.length==3?Math.abs(zn(d[2])):1,v=vc,_=w<x;_&&(E*=-1,v=Ac);var O=d.some(Oc);p=[];for(var T=x;v(T,w);T+=E){var H;if(c)H=String.fromCharCode(T),H==="\\"&&(H="");else if(H=String(T),O){var q=m-H.length;if(q>0){var at=new Array(q+1).join("0");T<0?H="-"+at+H.slice(1):H=at+H}}p.push(H)}}else{p=[];for(var J=0;J<d.length;J++)p.push.apply(p,Ti(d[J],!1))}for(var J=0;J<p.length;J++)for(var o=0;o<r.length;o++){var a=n+p[J]+r[o];(!t||h||a)&&e.push(a)}}return e}});var is=require("assert");var Fl={right:Il,center:Nl},Tl=0,Ki=1,jl=2,Ji=3,sn=class{constructor(t){var e;this.width=t.width,this.wrap=(e=t.wrap)!==null&&e!==void 0?e:!0,this.rows=[]}span(...t){let e=this.div(...t);e.span=!0}resetOutput(){this.rows=[]}div(...t){if(t.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...t)&&typeof t[0]=="string")return this.applyLayoutDSL(t[0]);let e=t.map(i=>typeof i=="string"?this.colFromString(i):i);return this.rows.push(e),e}shouldApplyLayoutDSL(...t){return t.length===1&&typeof t[0]=="string"&&/[\t\n]/.test(t[0])}applyLayoutDSL(t){let e=t.split(`
`).map(n=>n.split("	")),i=0;return e.forEach(n=>{n.length>1&&_t.stringWidth(n[0])>i&&(i=Math.min(Math.floor(this.width*.5),_t.stringWidth(n[0])))}),e.forEach(n=>{this.div(...n.map((r,o)=>({text:r.trim(),padding:this.measurePadding(r),width:o===0&&n.length>1?i:void 0})))}),this.rows[this.rows.length-1]}colFromString(t){return{text:t,padding:this.measurePadding(t)}}measurePadding(t){let e=_t.stripAnsi(t);return[0,e.match(/\s*$/)[0].length,0,e.match(/^\s*/)[0].length]}toString(){let t=[];return this.rows.forEach(e=>{this.rowToString(e,t)}),t.filter(e=>!e.hidden).map(e=>e.text).join(`
`)}rowToString(t,e){return this.rasterize(t).forEach((i,n)=>{let r="";i.forEach((o,a)=>{let{width:l}=t[a],c=this.negatePadding(t[a]),h=o;if(c>_t.stringWidth(o)&&(h+=" ".repeat(c-_t.stringWidth(o))),t[a].align&&t[a].align!=="left"&&this.wrap){let d=Fl[t[a].align];h=d(h,c),_t.stringWidth(h)<c&&(h+=" ".repeat((l||0)-_t.stringWidth(h)-1))}let f=t[a].padding||[0,0,0,0];f[Ji]&&(r+=" ".repeat(f[Ji])),r+=wr(t[a],h,"| "),r+=h,r+=wr(t[a],h," |"),f[Ki]&&(r+=" ".repeat(f[Ki])),n===0&&e.length>0&&(r=this.renderInline(r,e[e.length-1]))}),e.push({text:r.replace(/ +$/,""),span:t.span})}),e}renderInline(t,e){let i=t.match(/^ */),n=i?i[0].length:0,r=e.text,o=_t.stringWidth(r.trimRight());return e.span?this.wrap?n<o?t:(e.hidden=!0,r.trimRight()+" ".repeat(n-o)+t.trimLeft()):(e.hidden=!0,r+t):t}rasterize(t){let e=[],i=this.columnWidths(t),n;return t.forEach((r,o)=>{r.width=i[o],this.wrap?n=_t.wrap(r.text,this.negatePadding(r),{hard:!0}).split(`
`):n=r.text.split(`
`),r.border&&(n.unshift("."+"-".repeat(this.negatePadding(r)+2)+"."),n.push("'"+"-".repeat(this.negatePadding(r)+2)+"'")),r.padding&&(n.unshift(...new Array(r.padding[Tl]||0).fill("")),n.push(...new Array(r.padding[jl]||0).fill(""))),n.forEach((a,l)=>{e[l]||e.push([]);let c=e[l];for(let h=0;h<o;h++)c[h]===void 0&&c.push("");c.push(a)})}),e}negatePadding(t){let e=t.width||0;return t.padding&&(e-=(t.padding[Ji]||0)+(t.padding[Ki]||0)),t.border&&(e-=4),e}columnWidths(t){if(!this.wrap)return t.map(o=>o.width||_t.stringWidth(o.text));let e=t.length,i=this.width,n=t.map(o=>{if(o.width)return e--,i-=o.width,o.width}),r=e?Math.floor(i/e):0;return n.map((o,a)=>o===void 0?Math.max(r,Rl(t[a])):o)}};function wr(s,t,e){return s.border?/[.']-+[.']/.test(t)?"":t.trim().length!==0?e:"  ":""}function Rl(s){let t=s.padding||[],e=1+(t[Ji]||0)+(t[Ki]||0);return s.border?e+4:e}function Ml(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}function Il(s,t){s=s.trim();let e=_t.stringWidth(s);return e<t?" ".repeat(t-e)+s:s}function Nl(s,t){s=s.trim();let e=_t.stringWidth(s);return e>=t?s:" ".repeat(t-e>>1)+s}var _t;function br(s,t){return _t=t,new sn({width:(s==null?void 0:s.width)||Ml(),wrap:s==null?void 0:s.wrap})}var yr=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function nn(s){return s.replace(yr,"")}function Sr(s,t){let[e,i]=s.match(yr)||["",""];s=nn(s);let n="";for(let r=0;r<s.length;r++)r!==0&&r%t===0&&(n+=`
`),n+=s.charAt(r);return e&&i&&(n=`${e}${n}${i}`),n}function rn(s){return br(s,{stringWidth:t=>[...t].length,stripAnsi:nn,wrap:Sr})}var qe=require("path"),Zi=require("fs");function xr(s,t){let e=(0,qe.resolve)(".",s),i;for((0,Zi.statSync)(e).isDirectory()||(e=(0,qe.dirname)(e));;){if(i=t(e,(0,Zi.readdirSync)(e)),i)return(0,qe.resolve)(e,i);if(e=(0,qe.dirname)(i=e),i===e)break}}var Lr=require("util"),Dr=require("fs"),Wr=require("url");var Ar=require("util"),es=require("path");function je(s){if(s!==s.toLowerCase()&&s!==s.toUpperCase()||(s=s.toLowerCase()),s.indexOf("-")===-1&&s.indexOf("_")===-1)return s;{let e="",i=!1,n=s.match(/^-+/);for(let r=n?n[0].length:0;r<s.length;r++){let o=s.charAt(r);i&&(i=!1,o=o.toUpperCase()),r!==0&&(o==="-"||o==="_")?i=!0:o!=="-"&&o!=="_"&&(e+=o)}return e}}function Qi(s,t){let e=s.toLowerCase();t=t||"-";let i="";for(let n=0;n<s.length;n++){let r=e.charAt(n),o=s.charAt(n);r!==o&&n>0?i+=`${t}${e.charAt(n)}`:i+=o}return i}function Xi(s){return s==null?!1:typeof s=="number"||/^0x[0-9a-f]+$/i.test(s)?!0:/^0[^.]/.test(s)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(s)}function Er(s){if(Array.isArray(s))return s.map(o=>typeof o!="string"?o+"":o);s=s.trim();let t=0,e=null,i=null,n=null,r=[];for(let o=0;o<s.length;o++){if(e=i,i=s.charAt(o),i===" "&&!n){e!==" "&&t++;continue}i===n?n=null:(i==="'"||i==='"')&&!n&&(n=i),r[t]||(r[t]=""),r[t]+=i}return r}var Mt;(function(s){s.BOOLEAN="boolean",s.STRING="string",s.NUMBER="number",s.ARRAY="array"})(Mt||(Mt={}));var ae,ts=class{constructor(t){ae=t}parse(t,e){let i=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},e),n=Er(t),r=typeof t=="string",o=Pl(Object.assign(Object.create(null),i.alias)),a=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},i.configuration),l=Object.assign(Object.create(null),i.default),c=i.configObjects||[],h=i.envPrefix,f=a["populate--"],d=f?"--":"_",p=Object.create(null),x=Object.create(null),w=i.__||ae.format,m={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},E=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,v=new RegExp("^--"+a["negation-prefix"]+"(.+)");[].concat(i.array||[]).filter(Boolean).forEach(function(g){let y=typeof g=="object"?g.key:g,A=Object.keys(g).map(function(C){return{boolean:"bools",string:"strings",number:"numbers"}[C]}).filter(Boolean).pop();A&&(m[A][y]=!0),m.arrays[y]=!0,m.keys.push(y)}),[].concat(i.boolean||[]).filter(Boolean).forEach(function(g){m.bools[g]=!0,m.keys.push(g)}),[].concat(i.string||[]).filter(Boolean).forEach(function(g){m.strings[g]=!0,m.keys.push(g)}),[].concat(i.number||[]).filter(Boolean).forEach(function(g){m.numbers[g]=!0,m.keys.push(g)}),[].concat(i.count||[]).filter(Boolean).forEach(function(g){m.counts[g]=!0,m.keys.push(g)}),[].concat(i.normalize||[]).filter(Boolean).forEach(function(g){m.normalize[g]=!0,m.keys.push(g)}),typeof i.narg=="object"&&Object.entries(i.narg).forEach(([g,y])=>{typeof y=="number"&&(m.nargs[g]=y,m.keys.push(g))}),typeof i.coerce=="object"&&Object.entries(i.coerce).forEach(([g,y])=>{typeof y=="function"&&(m.coercions[g]=y,m.keys.push(g))}),typeof i.config<"u"&&(Array.isArray(i.config)||typeof i.config=="string"?[].concat(i.config).filter(Boolean).forEach(function(g){m.configs[g]=!0}):typeof i.config=="object"&&Object.entries(i.config).forEach(([g,y])=>{(typeof y=="boolean"||typeof y=="function")&&(m.configs[g]=y)})),Te(i.key,o,i.default,m.arrays),Object.keys(l).forEach(function(g){(m.aliases[g]||[]).forEach(function(y){l[y]=l[g]})});let _=null;Vi();let O=[],T=Object.assign(Object.create(null),{_:[]}),H={};for(let g=0;g<n.length;g++){let y=n[g],A=y.replace(/^-{3,}/,"---"),C,b,N,F,L,pt;if(y!=="--"&&/^-/.test(y)&&st(y))q(y);else if(A.match(/^---+(=|$)/)){q(y);continue}else if(y.match(/^--.+=/)||!a["short-option-groups"]&&y.match(/^-.+=/))F=y.match(/^--?([^=]+)=([\s\S]*)$/),F!==null&&Array.isArray(F)&&F.length>=3&&(W(F[1],m.arrays)?g=J(g,F[1],n,F[2]):W(F[1],m.nargs)!==!1?g=at(g,F[1],n,F[2]):G(F[1],F[2],!0));else if(y.match(v)&&a["boolean-negation"])F=y.match(v),F!==null&&Array.isArray(F)&&F.length>=2&&(b=F[1],G(b,W(b,m.arrays)?[!1]:!1));else if(y.match(/^--.+/)||!a["short-option-groups"]&&y.match(/^-[^-]+/))F=y.match(/^--?(.+)/),F!==null&&Array.isArray(F)&&F.length>=2&&(b=F[1],W(b,m.arrays)?g=J(g,b,n):W(b,m.nargs)!==!1?g=at(g,b,n):(L=n[g+1],L!==void 0&&(!L.match(/^-/)||L.match(E))&&!W(b,m.bools)&&!W(b,m.counts)||/^(true|false)$/.test(L)?(G(b,L),g++):G(b,nt(b))));else if(y.match(/^-.\..+=/))F=y.match(/^-([^=]+)=([\s\S]*)$/),F!==null&&Array.isArray(F)&&F.length>=3&&G(F[1],F[2]);else if(y.match(/^-.\..+/)&&!y.match(E))L=n[g+1],F=y.match(/^-(.\..+)/),F!==null&&Array.isArray(F)&&F.length>=2&&(b=F[1],L!==void 0&&!L.match(/^-/)&&!W(b,m.bools)&&!W(b,m.counts)?(G(b,L),g++):G(b,nt(b)));else if(y.match(/^-[^-]+/)&&!y.match(E)){N=y.slice(1,-1).split(""),C=!1;for(let Et=0;Et<N.length;Et++){if(L=y.slice(Et+2),N[Et+1]&&N[Et+1]==="="){pt=y.slice(Et+3),b=N[Et],W(b,m.arrays)?g=J(g,b,n,pt):W(b,m.nargs)!==!1?g=at(g,b,n,pt):G(b,pt),C=!0;break}if(L==="-"){G(N[Et],L);continue}if(/[A-Za-z]/.test(N[Et])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(L)&&W(L,m.bools)===!1){G(N[Et],L),C=!0;break}if(N[Et+1]&&N[Et+1].match(/\W/)){G(N[Et],L),C=!0;break}else G(N[Et],nt(N[Et]))}b=y.slice(-1)[0],!C&&b!=="-"&&(W(b,m.arrays)?g=J(g,b,n):W(b,m.nargs)!==!1?g=at(g,b,n):(L=n[g+1],L!==void 0&&(!/^(-|--)[^-]/.test(L)||L.match(E))&&!W(b,m.bools)&&!W(b,m.counts)||/^(true|false)$/.test(L)?(G(b,L),g++):G(b,nt(b))))}else if(y.match(/^-[0-9]$/)&&y.match(E)&&W(y.slice(1),m.bools))b=y.slice(1),G(b,nt(b));else if(y==="--"){O=n.slice(g+1);break}else if(a["halt-at-non-option"]){O=n.slice(g);break}else q(y)}V(T,!0),V(T,!1),B(T),ft(),it(T,m.aliases,l,!0),ut(T),a["set-placeholder-key"]&&Fe(T),Object.keys(m.counts).forEach(function(g){re(T,g.split("."))||G(g,0)}),f&&O.length&&(T[d]=[]),O.forEach(function(g){T[d].push(g)}),a["camel-case-expansion"]&&a["strip-dashed"]&&Object.keys(T).filter(g=>g!=="--"&&g.includes("-")).forEach(g=>{delete T[g]}),a["strip-aliased"]&&[].concat(...Object.keys(o).map(g=>o[g])).forEach(g=>{a["camel-case-expansion"]&&g.includes("-")&&delete T[g.split(".").map(y=>je(y)).join(".")],delete T[g]});function q(g){let y=j("_",g);(typeof y=="string"||typeof y=="number")&&T._.push(y)}function at(g,y,A,C){let b,N=W(y,m.nargs);if(N=typeof N!="number"||isNaN(N)?1:N,N===0)return kt(C)||(_=Error(w("Argument unexpected for: %s",y))),G(y,nt(y)),g;let F=kt(C)?0:1;if(a["nargs-eats-options"])A.length-(g+1)+F<N&&(_=Error(w("Not enough arguments following: %s",y))),F=N;else{for(b=g+1;b<A.length&&(!A[b].match(/^-[^0-9]/)||A[b].match(E)||st(A[b]));b++)F++;F<N&&(_=Error(w("Not enough arguments following: %s",y)))}let L=Math.min(F,N);for(!kt(C)&&L>0&&(G(y,C),L--),b=g+1;b<L+g+1;b++)G(y,A[b]);return g+L}function J(g,y,A,C){let b=[],N=C||A[g+1],F=W(y,m.nargs);if(W(y,m.bools)&&!/^(true|false)$/.test(N))b.push(!0);else if(kt(N)||kt(C)&&/^-/.test(N)&&!E.test(N)&&!st(N)){if(l[y]!==void 0){let L=l[y];b=Array.isArray(L)?L:[L]}}else{kt(C)||b.push($(y,C,!0));for(let L=g+1;L<A.length&&!(!a["greedy-arrays"]&&b.length>0||F&&typeof F=="number"&&b.length>=F||(N=A[L],/^-/.test(N)&&!E.test(N)&&!st(N)));L++)g=L,b.push($(y,N,r))}return typeof F=="number"&&(F&&b.length<F||isNaN(F)&&b.length===0)&&(_=Error(w("Not enough arguments following: %s",y))),G(y,b),g}function G(g,y,A=r){if(/-/.test(g)&&a["camel-case-expansion"]){let N=g.split(".").map(function(F){return je(F)}).join(".");I(g,N)}let C=$(g,y,A),b=g.split(".");oe(T,b,C),m.aliases[g]&&m.aliases[g].forEach(function(N){let F=N.split(".");oe(T,F,C)}),b.length>1&&a["dot-notation"]&&(m.aliases[b[0]]||[]).forEach(function(N){let F=N.split("."),L=[].concat(b);L.shift(),F=F.concat(L),(m.aliases[g]||[]).includes(F.join("."))||oe(T,F,C)}),W(g,m.normalize)&&!W(g,m.arrays)&&[g].concat(m.aliases[g]||[]).forEach(function(F){Object.defineProperty(H,F,{enumerable:!0,get(){return y},set(L){y=typeof L=="string"?ae.normalize(L):L}})})}function I(g,y){m.aliases[g]&&m.aliases[g].length||(m.aliases[g]=[y],p[y]=!0),m.aliases[y]&&m.aliases[y].length||I(y,g)}function $(g,y,A){A&&(y=Ll(y)),(W(g,m.bools)||W(g,m.counts))&&typeof y=="string"&&(y=y==="true");let C=Array.isArray(y)?y.map(function(b){return j(g,b)}):j(g,y);return W(g,m.counts)&&(kt(C)||typeof C=="boolean")&&(C=on()),W(g,m.normalize)&&W(g,m.arrays)&&(Array.isArray(y)?C=y.map(b=>ae.normalize(b)):C=ae.normalize(y)),C}function j(g,y){return!a["parse-positional-numbers"]&&g==="_"||!W(g,m.strings)&&!W(g,m.bools)&&!Array.isArray(y)&&(Xi(y)&&a["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${y}`)))||!kt(y)&&W(g,m.numbers))&&(y=Number(y)),y}function B(g){let y=Object.create(null);it(y,m.aliases,l),Object.keys(m.configs).forEach(function(A){let C=g[A]||y[A];if(C)try{let b=null,N=ae.resolve(ae.cwd(),C),F=m.configs[A];if(typeof F=="function"){try{b=F(N)}catch(L){b=L}if(b instanceof Error){_=b;return}}else b=ae.require(N);K(b)}catch(b){b.name==="PermissionDenied"?_=b:g[A]&&(_=Error(w("Invalid JSON config file: %s",C)))}})}function K(g,y){Object.keys(g).forEach(function(A){let C=g[A],b=y?y+"."+A:A;typeof C=="object"&&C!==null&&!Array.isArray(C)&&a["dot-notation"]?K(C,b):(!re(T,b.split("."))||W(b,m.arrays)&&a["combine-arrays"])&&G(b,C)})}function ft(){typeof c<"u"&&c.forEach(function(g){K(g)})}function V(g,y){if(typeof h>"u")return;let A=typeof h=="string"?h:"",C=ae.env();Object.keys(C).forEach(function(b){if(A===""||b.lastIndexOf(A,0)===0){let N=b.split("__").map(function(F,L){return L===0&&(F=F.substring(A.length)),je(F)});(y&&m.configs[N.join(".")]||!y)&&!re(g,N)&&G(N.join("."),C[b])}})}function ut(g){let y,A=new Set;Object.keys(g).forEach(function(C){if(!A.has(C)&&(y=W(C,m.coercions),typeof y=="function"))try{let b=j(C,y(g[C]));[].concat(m.aliases[C]||[],C).forEach(N=>{A.add(N),g[N]=b})}catch(b){_=b}})}function Fe(g){return m.keys.forEach(y=>{~y.indexOf(".")||typeof g[y]>"u"&&(g[y]=void 0)}),g}function it(g,y,A,C=!1){Object.keys(A).forEach(function(b){re(g,b.split("."))||(oe(g,b.split("."),A[b]),C&&(x[b]=!0),(y[b]||[]).forEach(function(N){re(g,N.split("."))||oe(g,N.split("."),A[b])}))})}function re(g,y){let A=g;a["dot-notation"]||(y=[y.join(".")]),y.slice(0,-1).forEach(function(b){A=A[b]||{}});let C=y[y.length-1];return typeof A!="object"?!1:C in A}function oe(g,y,A){let C=g;a["dot-notation"]||(y=[y.join(".")]),y.slice(0,-1).forEach(function(pt){pt=Cr(pt),typeof C=="object"&&C[pt]===void 0&&(C[pt]={}),typeof C[pt]!="object"||Array.isArray(C[pt])?(Array.isArray(C[pt])?C[pt].push({}):C[pt]=[C[pt],{}],C=C[pt][C[pt].length-1]):C=C[pt]});let b=Cr(y[y.length-1]),N=W(y.join("."),m.arrays),F=Array.isArray(A),L=a["duplicate-arguments-array"];!L&&W(b,m.nargs)&&(L=!0,(!kt(C[b])&&m.nargs[b]===1||Array.isArray(C[b])&&C[b].length===m.nargs[b])&&(C[b]=void 0)),A===on()?C[b]=on(C[b]):Array.isArray(C[b])?L&&N&&F?C[b]=a["flatten-duplicate-arrays"]?C[b].concat(A):(Array.isArray(C[b][0])?C[b]:[C[b]]).concat([A]):!L&&!!N==!!F?C[b]=A:C[b]=C[b].concat([A]):C[b]===void 0&&N?C[b]=F?A:[A]:L&&!(C[b]===void 0||W(b,m.counts)||W(b,m.bools))?C[b]=[C[b],A]:C[b]=A}function Te(...g){g.forEach(function(y){Object.keys(y||{}).forEach(function(A){m.aliases[A]||(m.aliases[A]=[].concat(o[A]||[]),m.aliases[A].concat(A).forEach(function(C){if(/-/.test(C)&&a["camel-case-expansion"]){let b=je(C);b!==A&&m.aliases[A].indexOf(b)===-1&&(m.aliases[A].push(b),p[b]=!0)}}),m.aliases[A].concat(A).forEach(function(C){if(C.length>1&&/[A-Z]/.test(C)&&a["camel-case-expansion"]){let b=Qi(C,"-");b!==A&&m.aliases[A].indexOf(b)===-1&&(m.aliases[A].push(b),p[b]=!0)}}),m.aliases[A].forEach(function(C){m.aliases[C]=[A].concat(m.aliases[A].filter(function(b){return C!==b}))}))})})}function W(g,y){let A=[].concat(m.aliases[g]||[],g),C=Object.keys(y),b=A.find(N=>C.includes(N));return b?y[b]:!1}function en(g){let y=Object.keys(m);return[].concat(y.map(C=>m[C])).some(function(C){return Array.isArray(C)?C.includes(g):C[g]})}function D(g,...y){return[].concat(...y).some(function(C){let b=g.match(C);return b&&en(b[1])})}function tt(g){if(g.match(E)||!g.match(/^-[^-]+/))return!1;let y=!0,A,C=g.slice(1).split("");for(let b=0;b<C.length;b++){if(A=g.slice(b+2),!en(C[b])){y=!1;break}if(C[b+1]&&C[b+1]==="="||A==="-"||/[A-Za-z]/.test(C[b])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(A)||C[b+1]&&C[b+1].match(/\W/))break}return y}function st(g){return a["unknown-options-as-args"]&&Y(g)}function Y(g){return g=g.replace(/^-{3,}/,"--"),g.match(E)||tt(g)?!1:!D(g,/^-+([^=]+?)=[\s\S]*$/,v,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function nt(g){return!W(g,m.bools)&&!W(g,m.counts)&&`${g}`in l?l[g]:lt(Gt(g))}function lt(g){return{[Mt.BOOLEAN]:!0,[Mt.STRING]:"",[Mt.NUMBER]:void 0,[Mt.ARRAY]:[]}[g]}function Gt(g){let y=Mt.BOOLEAN;return W(g,m.strings)?y=Mt.STRING:W(g,m.numbers)?y=Mt.NUMBER:W(g,m.bools)?y=Mt.BOOLEAN:W(g,m.arrays)&&(y=Mt.ARRAY),y}function kt(g){return g===void 0}function Vi(){Object.keys(m.counts).find(g=>W(g,m.arrays)?(_=Error(w("Invalid configuration: %s, opts.count excludes opts.array.",g)),!0):W(g,m.nargs)?(_=Error(w("Invalid configuration: %s, opts.count excludes opts.narg.",g)),!0):!1)}return{aliases:Object.assign({},m.aliases),argv:Object.assign(H,T),configuration:a,defaulted:Object.assign({},x),error:_,newAliases:Object.assign({},p)}}};function Pl(s){let t=[],e=Object.create(null),i=!0;for(Object.keys(s).forEach(function(n){t.push([].concat(s[n],n))});i;){i=!1;for(let n=0;n<t.length;n++)for(let r=n+1;r<t.length;r++)if(t[n].filter(function(a){return t[r].indexOf(a)!==-1}).length){t[n]=t[n].concat(t[r]),t.splice(r,1),i=!0;break}}return t.forEach(function(n){n=n.filter(function(o,a,l){return l.indexOf(o)===a});let r=n.pop();r!==void 0&&typeof r=="string"&&(e[r]=n)}),e}function on(s){return s!==void 0?s+1:1}function Cr(s){return s==="__proto__"?"___proto___":s}function Ll(s){return typeof s=="string"&&(s[0]==="'"||s[0]==='"')&&s[s.length-1]===s[0]?s.substring(1,s.length-1):s}var _r=require("fs");var an,ln,cn,Or=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,vr=(ln=(an=process==null?void 0:process.versions)===null||an===void 0?void 0:an.node)!==null&&ln!==void 0?ln:(cn=process==null?void 0:process.version)===null||cn===void 0?void 0:cn.slice(1);if(vr&&Number(vr.match(/^([^.]+)/)[1])<Or)throw Error(`yargs parser supports a minimum Node.js version of ${Or}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var Dl=process?process.env:{},$r=new ts({cwd:process.cwd,env:()=>Dl,format:Ar.format,normalize:es.normalize,resolve:es.resolve,require:s=>{if(typeof require<"u")return require(s);if(s.match(/\.json$/))return JSON.parse((0,_r.readFileSync)(s,"utf8"));throw Error("only .json config files are supported in ESM")}}),yi=function(t,e){return $r.parse(t.slice(),e).argv};yi.detailed=function(s,t){return $r.parse(s.slice(),t)};yi.camelCase=je;yi.decamelize=Qi;yi.looksLikeNumber=Xi;var hn=yi;var Yt=require("path");function Fr(){return Wl()?0:1}function Wl(){return zl()&&!process.defaultApp}function zl(){return!!process.versions.electron}function fn(s){return s.slice(Fr()+1)}function Tr(){return process.argv[Fr()]}var Q=class s extends Error{constructor(t){super(t||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,s)}};var Ve=require("fs"),jr=require("util"),Rr=require("path"),Mr={fs:{readFileSync:Ve.readFileSync,writeFile:Ve.writeFile},format:jr.format,resolve:Rr.resolve,exists:s=>{try{return(0,Ve.statSync)(s).isFile()}catch{return!1}}};var Ht,un=class{constructor(t){t=t||{},this.directory=t.directory||"./locales",this.updateFiles=typeof t.updateFiles=="boolean"?t.updateFiles:!0,this.locale=t.locale||"en",this.fallbackToLanguage=typeof t.fallbackToLanguage=="boolean"?t.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...t){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let e=t.shift(),i=function(){};return typeof t[t.length-1]=="function"&&(i=t.pop()),i=i||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][e]&&this.updateFiles?(this.cache[this.locale][e]=e,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:i})):i(),Ht.format.apply(Ht.format,[this.cache[this.locale][e]||e].concat(t))}__n(){let t=Array.prototype.slice.call(arguments),e=t.shift(),i=t.shift(),n=t.shift(),r=function(){};typeof t[t.length-1]=="function"&&(r=t.pop()),this.cache[this.locale]||this._readLocaleFile();let o=n===1?e:i;this.cache[this.locale][e]&&(o=this.cache[this.locale][e][n===1?"one":"other"]),!this.cache[this.locale][e]&&this.updateFiles?(this.cache[this.locale][e]={one:e,other:i},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:r})):r();let a=[o];return~o.indexOf("%d")&&a.push(n),Ht.format.apply(Ht.format,a.concat(t))}setLocale(t){this.locale=t}getLocale(){return this.locale}updateLocale(t){this.cache[this.locale]||this._readLocaleFile();for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&(this.cache[this.locale][e]=t[e])}_taggedLiteral(t,...e){let i="";return t.forEach(function(n,r){let o=e[r+1];i+=n,typeof o<"u"&&(i+="%s")}),this.__.apply(this,[i].concat([].slice.call(e,1)))}_enqueueWrite(t){this.writeQueue.push(t),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let t=this,e=this.writeQueue[0],i=e.directory,n=e.locale,r=e.cb,o=this._resolveLocaleFile(i,n),a=JSON.stringify(this.cache[n],null,2);Ht.fs.writeFile(o,a,"utf-8",function(l){t.writeQueue.shift(),t.writeQueue.length>0&&t._processWriteQueue(),r(l)})}_readLocaleFile(){let t={},e=this._resolveLocaleFile(this.directory,this.locale);try{Ht.fs.readFileSync&&(t=JSON.parse(Ht.fs.readFileSync(e,"utf-8")))}catch(i){if(i instanceof SyntaxError&&(i.message="syntax error in "+e),i.code==="ENOENT")t={};else throw i}this.cache[this.locale]=t}_resolveLocaleFile(t,e){let i=Ht.resolve(t,"./",e+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(i)&&~e.lastIndexOf("_")){let n=Ht.resolve(t,"./",e.split("_")[0]+".json");this._fileExistsSync(n)&&(i=n)}return i}_fileExistsSync(t){return Ht.exists(t)}};function Ir(s,t){Ht=t;let e=new un(s);return{__:e.__.bind(e),__n:e.__n.bind(e),setLocale:e.setLocale.bind(e),getLocale:e.getLocale.bind(e),updateLocale:e.updateLocale.bind(e),locale:e.locale}}var Bl=s=>Ir(s,Mr),Nr=Bl;var kl={},Ul="require is not supported by ESM",Pr="loading a directory of commands is not supported yet for ESM",Si;try{Si=(0,Wr.fileURLToPath)(kl.url)}catch{Si=process.cwd()}var Gl=Si.substring(0,Si.lastIndexOf("node_modules")),dn={assert:{notStrictEqual:is.notStrictEqual,strictEqual:is.strictEqual},cliui:rn,findUp:xr,getEnv:s=>process.env[s],inspect:Lr.inspect,getCallerFile:()=>{throw new Q(Pr)},getProcessArgvBin:Tr,mainFilename:Gl||process.cwd(),Parser:hn,path:{basename:Yt.basename,dirname:Yt.dirname,extname:Yt.extname,relative:Yt.relative,resolve:Yt.resolve},process:{argv:()=>process.argv,cwd:process.cwd,emitWarning:(s,t)=>process.emitWarning(s,t),execPath:()=>process.execPath,exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:Dr.readFileSync,require:()=>{throw new Q(Ul)},requireDirectory:()=>{throw new Q(Pr)},stringWidth:s=>[...s].length,y18n:Nr({directory:(0,Yt.resolve)(Si,"../../../locales"),updateFiles:!1})};function Ct(s,t,e,i){e.assert.notStrictEqual(s,t,i)}function pn(s,t){t.assert.strictEqual(typeof s,"string")}function Ke(s){return Object.keys(s)}function X(s){return!!s&&!!s.then&&typeof s.then=="function"}function me(s){let e=s.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),i=/\.*[\][<>]/g,n=e.shift();if(!n)throw new Error(`No command found in: ${s}`);let r={cmd:n.replace(i,""),demanded:[],optional:[]};return e.forEach((o,a)=>{let l=!1;o=o.replace(/\s/g,""),/\.+[\]>]/.test(o)&&a===e.length-1&&(l=!0),/^\[/.test(o)?r.optional.push({cmd:o.replace(i,"").split("|"),variadic:l}):r.demanded.push({cmd:o.replace(i,"").split("|"),variadic:l})}),r}var Hl=["first","second","third","fourth","fifth","sixth"];function R(s,t,e){function i(){return typeof s=="object"?[{demanded:[],optional:[]},s,t]:[me(`cmd ${s}`),t,e]}try{let n=0,[r,o,a]=i(),l=[].slice.call(o);for(;l.length&&l[l.length-1]===void 0;)l.pop();let c=a||l.length;if(c<r.demanded.length)throw new Q(`Not enough arguments provided. Expected ${r.demanded.length} but received ${l.length}.`);let h=r.demanded.length+r.optional.length;if(c>h)throw new Q(`Too many arguments provided. Expected max ${h} but received ${c}.`);r.demanded.forEach(f=>{let d=l.shift(),p=zr(d);f.cmd.filter(w=>w===p||w==="*").length===0&&Br(p,f.cmd,n),n+=1}),r.optional.forEach(f=>{if(l.length===0)return;let d=l.shift(),p=zr(d);f.cmd.filter(w=>w===p||w==="*").length===0&&Br(p,f.cmd,n),n+=1})}catch(n){console.warn(n.stack)}}function zr(s){return Array.isArray(s)?"array":s===null?"null":typeof s}function Br(s,t,e){throw new Q(`Invalid ${Hl[e]||"manyith"} argument. Expected ${t.join(" or ")} but received ${s}.`)}var ss=class{constructor(t){this.globalMiddleware=[],this.frozens=[],this.yargs=t}addMiddleware(t,e,i=!0,n=!1){if(R("<array|function> [boolean] [boolean] [boolean]",[t,e,i],arguments.length),Array.isArray(t)){for(let r=0;r<t.length;r++){if(typeof t[r]!="function")throw Error("middleware must be a function");let o=t[r];o.applyBeforeValidation=e,o.global=i}Array.prototype.push.apply(this.globalMiddleware,t)}else if(typeof t=="function"){let r=t;r.applyBeforeValidation=e,r.global=i,r.mutates=n,this.globalMiddleware.push(t)}return this.yargs}addCoerceMiddleware(t,e){let i=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(n=>{let r=[...i[e]||[],e];return n.option?!r.includes(n.option):!0}),t.option=e,this.addMiddleware(t,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let t=this.frozens.pop();t!==void 0&&(this.globalMiddleware=t)}reset(){this.globalMiddleware=this.globalMiddleware.filter(t=>t.global)}};function Ur(s){return s?s.map(t=>(t.applyBeforeValidation=!1,t)):[]}function Re(s,t,e,i){return e.reduce((n,r)=>{if(r.applyBeforeValidation!==i)return n;if(r.mutates){if(r.applied)return n;r.applied=!0}if(X(n))return n.then(o=>Promise.all([o,r(o,t)])).then(([o,a])=>Object.assign(o,a));{let o=r(n,t);return X(o)?o.then(a=>Object.assign(n,a)):Object.assign(n,o)}},s)}function Me(s,t,e=i=>{throw i}){try{let i=Yl(s)?s():s;return X(i)?i.then(n=>t(n)):t(i)}catch(i){return e(i)}}function Yl(s){return typeof s=="function"}function mn(s){if(typeof require>"u")return null;for(let t=0,e=Object.keys(require.cache),i;t<e.length;t++)if(i=require.cache[e[t]],i.exports===s)return i;return null}var Je=/(^\*)|(^\$0)/,gn=class{constructor(t,e,i,n){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=n,this.usage=t,this.globalMiddleware=i,this.validation=e}addDirectory(t,e,i,n){n=n||{},typeof n.recurse!="boolean"&&(n.recurse=!1),Array.isArray(n.extensions)||(n.extensions=["js"]);let r=typeof n.visit=="function"?n.visit:o=>o;n.visit=(o,a,l)=>{let c=r(o,a,l);if(c){if(this.requireCache.has(a))return c;this.requireCache.add(a),this.addHandler(c)}return c},this.shim.requireDirectory({require:e,filename:i},t,n)}addHandler(t,e,i,n,r,o){let a=[],l=Ur(r);if(n=n||(()=>{}),Array.isArray(t))if(ql(t))[t,...a]=t;else for(let c of t)this.addHandler(c);else if(Kl(t)){let c=Array.isArray(t.command)||typeof t.command=="string"?t.command:this.moduleName(t);t.aliases&&(c=[].concat(c).concat(t.aliases)),this.addHandler(c,this.extractDesc(t),t.builder,t.handler,t.middlewares,t.deprecated);return}else if(Gr(i)){this.addHandler([t].concat(a),e,i.builder,i.handler,i.middlewares,i.deprecated);return}if(typeof t=="string"){let c=me(t);a=a.map(d=>me(d).cmd);let h=!1,f=[c.cmd].concat(a).filter(d=>Je.test(d)?(h=!0,!1):!0);f.length===0&&h&&f.push("$0"),h&&(c.cmd=f[0],a=f.slice(1),t=t.replace(Je,c.cmd)),a.forEach(d=>{this.aliasMap[d]=c.cmd}),e!==!1&&this.usage.command(t,e,h,a,o),this.handlers[c.cmd]={original:t,description:e,handler:n,builder:i||{},middlewares:l,deprecated:o,demanded:c.demanded,optional:c.optional},h&&(this.defaultCommand=this.handlers[c.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(t,e,i,n,r,o){let a=this.handlers[t]||this.handlers[this.aliasMap[t]]||this.defaultCommand,l=e.getInternalMethods().getContext(),c=l.commands.slice(),h=!t;t&&(l.commands.push(t),l.fullCommands.push(a.original));let f=this.applyBuilderUpdateUsageAndParse(h,a,e,i.aliases,c,n,r,o);return X(f)?f.then(d=>this.applyMiddlewareAndGetResult(h,a,d.innerArgv,l,r,d.aliases,e)):this.applyMiddlewareAndGetResult(h,a,f.innerArgv,l,r,f.aliases,e)}applyBuilderUpdateUsageAndParse(t,e,i,n,r,o,a,l){let c=e.builder,h=i;if(ns(c)){i.getInternalMethods().getUsageInstance().freeze();let f=c(i.getInternalMethods().reset(n),l);if(X(f))return f.then(d=>(h=Hr(d)?d:i,this.parseAndUpdateUsage(t,e,h,r,o,a)))}else Vl(c)&&(i.getInternalMethods().getUsageInstance().freeze(),h=i.getInternalMethods().reset(n),Object.keys(e.builder).forEach(f=>{h.option(f,c[f])}));return this.parseAndUpdateUsage(t,e,h,r,o,a)}parseAndUpdateUsage(t,e,i,n,r,o){t&&i.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(i)&&i.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(n,e),e.description);let a=i.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,r,o);return X(a)?a.then(l=>({aliases:i.parsed.aliases,innerArgv:l})):{aliases:i.parsed.aliases,innerArgv:a}}shouldUpdateUsage(t){return!t.getInternalMethods().getUsageInstance().getUsageDisabled()&&t.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(t,e){let i=Je.test(e.original)?e.original.replace(Je,"").trim():e.original,n=t.filter(r=>!Je.test(r));return n.push(i),`$0 ${n.join(" ")}`}handleValidationAndGetResult(t,e,i,n,r,o,a,l){if(!o.getInternalMethods().getHasOutput()){let c=o.getInternalMethods().runValidation(r,l,o.parsed.error,t);i=Me(i,h=>(c(h),h))}if(e.handler&&!o.getInternalMethods().getHasOutput()){o.getInternalMethods().setHasOutput();let c=!!o.getOptions().configuration["populate--"];o.getInternalMethods().postProcess(i,c,!1,!1),i=Re(i,o,a,!1),i=Me(i,h=>{let f=e.handler(h);return X(f)?f.then(()=>h):h}),t||o.getInternalMethods().getUsageInstance().cacheHelpMessage(),X(i)&&!o.getInternalMethods().hasParseCallback()&&i.catch(h=>{try{o.getInternalMethods().getUsageInstance().fail(null,h)}catch{}})}return t||(n.commands.pop(),n.fullCommands.pop()),i}applyMiddlewareAndGetResult(t,e,i,n,r,o,a){let l={};if(r)return i;a.getInternalMethods().getHasOutput()||(l=this.populatePositionals(e,i,n,a));let c=this.globalMiddleware.getMiddleware().slice(0).concat(e.middlewares),h=Re(i,a,c,!0);return X(h)?h.then(f=>this.handleValidationAndGetResult(t,e,f,n,o,a,c,l)):this.handleValidationAndGetResult(t,e,h,n,o,a,c,l)}populatePositionals(t,e,i,n){e._=e._.slice(i.commands.length);let r=t.demanded.slice(0),o=t.optional.slice(0),a={};for(this.validation.positionalCount(r.length,e._.length);r.length;){let l=r.shift();this.populatePositional(l,e,a)}for(;o.length;){let l=o.shift();this.populatePositional(l,e,a)}return e._=i.commands.concat(e._.map(l=>""+l)),this.postProcessPositionals(e,a,this.cmdToParseOptions(t.original),n),a}populatePositional(t,e,i){let n=t.cmd[0];t.variadic?i[n]=e._.splice(0).map(String):e._.length&&(i[n]=[String(e._.shift())])}cmdToParseOptions(t){let e={array:[],default:{},alias:{},demand:{}},i=me(t);return i.demanded.forEach(n=>{let[r,...o]=n.cmd;n.variadic&&(e.array.push(r),e.default[r]=[]),e.alias[r]=o,e.demand[r]=!0}),i.optional.forEach(n=>{let[r,...o]=n.cmd;n.variadic&&(e.array.push(r),e.default[r]=[]),e.alias[r]=o}),e}postProcessPositionals(t,e,i,n){let r=Object.assign({},n.getOptions());r.default=Object.assign(i.default,r.default);for(let c of Object.keys(i.alias))r.alias[c]=(r.alias[c]||[]).concat(i.alias[c]);r.array=r.array.concat(i.array),r.config={};let o=[];if(Object.keys(e).forEach(c=>{e[c].map(h=>{r.configuration["unknown-options-as-args"]&&(r.key[c]=!0),o.push(`--${c}`),o.push(h)})}),!o.length)return;let a=Object.assign({},r.configuration,{"populate--":!1}),l=this.shim.Parser.detailed(o,Object.assign({},r,{configuration:a}));if(l.error)n.getInternalMethods().getUsageInstance().fail(l.error.message,l.error);else{let c=Object.keys(e);Object.keys(e).forEach(h=>{c.push(...l.aliases[h])}),Object.keys(l.argv).forEach(h=>{c.includes(h)&&(e[h]||(e[h]=l.argv[h]),!this.isInConfigs(n,h)&&!this.isDefaulted(n,h)&&Object.prototype.hasOwnProperty.call(t,h)&&Object.prototype.hasOwnProperty.call(l.argv,h)&&(Array.isArray(t[h])||Array.isArray(l.argv[h]))?t[h]=[].concat(t[h],l.argv[h]):t[h]=l.argv[h])})}}isDefaulted(t,e){let{default:i}=t.getOptions();return Object.prototype.hasOwnProperty.call(i,e)||Object.prototype.hasOwnProperty.call(i,this.shim.Parser.camelCase(e))}isInConfigs(t,e){let{configObjects:i}=t.getOptions();return i.some(n=>Object.prototype.hasOwnProperty.call(n,e))||i.some(n=>Object.prototype.hasOwnProperty.call(n,this.shim.Parser.camelCase(e)))}runDefaultBuilderOn(t){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(t)){let i=Je.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");t.getInternalMethods().getUsageInstance().usage(i,this.defaultCommand.description)}let e=this.defaultCommand.builder;if(ns(e))return e(t,!0);Gr(e)||Object.keys(e).forEach(i=>{t.option(i,e[i])})}moduleName(t){let e=mn(t);if(!e)throw new Error(`No command name given for module: ${this.shim.inspect(t)}`);return this.commandFromFilename(e.filename)}commandFromFilename(t){return this.shim.path.basename(t,this.shim.path.extname(t))}extractDesc({describe:t,description:e,desc:i}){for(let n of[t,e,i]){if(typeof n=="string"||n===!1)return n;Ct(n,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let t=this.frozens.pop();Ct(t,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=t}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function kr(s,t,e,i){return new gn(s,t,e,i)}function Gr(s){return typeof s=="object"&&!!s.builder&&typeof s.handler=="function"}function ql(s){return s.every(t=>typeof t=="string")}function ns(s){return typeof s=="function"}function Vl(s){return typeof s=="object"}function Kl(s){return typeof s=="object"&&!Array.isArray(s)}function ge(s={},t=()=>!0){let e={};return Ke(s).forEach(i=>{t(i,s[i])&&(e[i]=s[i])}),e}function we(s){typeof process>"u"||[process.stdout,process.stderr].forEach(t=>{let e=t;e._handle&&e.isTTY&&typeof e._handle.setBlocking=="function"&&e._handle.setBlocking(s)})}function Jl(s){return typeof s=="boolean"}function qr(s,t){let e=t.y18n.__,i={},n=[];i.failFn=function($){n.push($)};let r=null,o=null,a=!0;i.showHelpOnFail=function($=!0,j){let[B,K]=typeof $=="string"?[!0,$]:[$,j];return s.getInternalMethods().isGlobalContext()&&(o=K),r=K,a=B,i};let l=!1;i.fail=function($,j){let B=s.getInternalMethods().getLoggerInstance();if(n.length)for(let K=n.length-1;K>=0;--K){let ft=n[K];if(Jl(ft)){if(j)throw j;if($)throw Error($)}else ft($,j,i)}else{if(s.getExitProcess()&&we(!0),!l){l=!0,a&&(s.showHelp("error"),B.error()),($||j)&&B.error($||j);let K=r||o;K&&(($||j)&&B.error(""),B.error(K))}if(j=j||new Q($),s.getExitProcess())return s.exit(1);if(s.getInternalMethods().hasParseCallback())return s.exit(1,j);throw j}};let c=[],h=!1;i.usage=(I,$)=>I===null?(h=!0,c=[],i):(h=!1,c.push([I,$||""]),i),i.getUsage=()=>c,i.getUsageDisabled=()=>h,i.getPositionalGroupName=()=>e("Positionals:");let f=[];i.example=(I,$)=>{f.push([I,$||""])};let d=[];i.command=function($,j,B,K,ft=!1){B&&(d=d.map(V=>(V[2]=!1,V))),d.push([$,j||"",B,K,ft])},i.getCommands=()=>d;let p={};i.describe=function($,j){Array.isArray($)?$.forEach(B=>{i.describe(B,j)}):typeof $=="object"?Object.keys($).forEach(B=>{i.describe(B,$[B])}):p[$]=j},i.getDescriptions=()=>p;let x=[];i.epilog=I=>{x.push(I)};let w=!1,m;i.wrap=I=>{w=!0,m=I},i.getWrap=()=>t.getEnv("YARGS_DISABLE_WRAP")?null:(w||(m=at(),w=!0),m);let E="__yargsString__:";i.deferY18nLookup=I=>E+I,i.help=function(){if(O)return O;_();let $=s.customScriptName?s.$0:t.path.basename(s.$0),j=s.getDemandedOptions(),B=s.getDemandedCommands(),K=s.getDeprecatedOptions(),ft=s.getGroups(),V=s.getOptions(),ut=[];ut=ut.concat(Object.keys(p)),ut=ut.concat(Object.keys(j)),ut=ut.concat(Object.keys(B)),ut=ut.concat(Object.keys(V.default)),ut=ut.filter(H),ut=Object.keys(ut.reduce((D,tt)=>(tt!=="_"&&(D[tt]=!0),D),{}));let Fe=i.getWrap(),it=t.cliui({width:Fe,wrap:!!Fe});if(!h){if(c.length)c.forEach(D=>{it.div({text:`${D[0].replace(/\$0/g,$)}`}),D[1]&&it.div({text:`${D[1]}`,padding:[1,0,0,0]})}),it.div();else if(d.length){let D=null;B._?D=`${$} <${e("command")}>
`:D=`${$} [${e("command")}]
`,it.div(`${D}`)}}if(d.length>1||d.length===1&&!d[0][2]){it.div(e("Commands:"));let D=s.getInternalMethods().getContext(),tt=D.commands.length?`${D.commands.join(" ")} `:"";s.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(d=d.sort((Y,nt)=>Y[0].localeCompare(nt[0])));let st=$?`${$} `:"";d.forEach(Y=>{let nt=`${st}${tt}${Y[0].replace(/^\$0 ?/,"")}`;it.span({text:nt,padding:[0,2,0,2],width:v(d,Fe,`${$}${tt}`)+4},{text:Y[1]});let lt=[];Y[2]&&lt.push(`[${e("default")}]`),Y[3]&&Y[3].length&&lt.push(`[${e("aliases:")} ${Y[3].join(", ")}]`),Y[4]&&(typeof Y[4]=="string"?lt.push(`[${e("deprecated: %s",Y[4])}]`):lt.push(`[${e("deprecated")}]`)),lt.length?it.div({text:lt.join(" "),padding:[0,0,0,2],align:"right"}):it.div()}),it.div()}let re=(Object.keys(V.alias)||[]).concat(Object.keys(s.parsed.newAliases)||[]);ut=ut.filter(D=>!s.parsed.newAliases[D]&&re.every(tt=>(V.alias[tt]||[]).indexOf(D)===-1));let oe=e("Options:");ft[oe]||(ft[oe]=[]),T(ut,V.alias,ft,oe);let Te=D=>/^--/.test(rs(D)),W=Object.keys(ft).filter(D=>ft[D].length>0).map(D=>{let tt=ft[D].filter(H).map(st=>{if(re.includes(st))return st;for(let Y=0,nt;(nt=re[Y])!==void 0;Y++)if((V.alias[nt]||[]).includes(st))return nt;return st});return{groupName:D,normalizedKeys:tt}}).filter(({normalizedKeys:D})=>D.length>0).map(({groupName:D,normalizedKeys:tt})=>{let st=tt.reduce((Y,nt)=>(Y[nt]=[nt].concat(V.alias[nt]||[]).map(lt=>D===i.getPositionalGroupName()?lt:(/^[0-9]$/.test(lt)?V.boolean.includes(nt)?"-":"--":lt.length>1?"--":"-")+lt).sort((lt,Gt)=>Te(lt)===Te(Gt)?0:Te(lt)?1:-1).join(", "),Y),{});return{groupName:D,normalizedKeys:tt,switches:st}});if(W.filter(({groupName:D})=>D!==i.getPositionalGroupName()).some(({normalizedKeys:D,switches:tt})=>!D.every(st=>Te(tt[st])))&&W.filter(({groupName:D})=>D!==i.getPositionalGroupName()).forEach(({normalizedKeys:D,switches:tt})=>{D.forEach(st=>{Te(tt[st])&&(tt[st]=Zl(tt[st],4))})}),W.forEach(({groupName:D,normalizedKeys:tt,switches:st})=>{it.div(D),tt.forEach(Y=>{let nt=st[Y],lt=p[Y]||"",Gt=null;lt.includes(E)&&(lt=e(lt.substring(E.length))),V.boolean.includes(Y)&&(Gt=`[${e("boolean")}]`),V.count.includes(Y)&&(Gt=`[${e("count")}]`),V.string.includes(Y)&&(Gt=`[${e("string")}]`),V.normalize.includes(Y)&&(Gt=`[${e("string")}]`),V.array.includes(Y)&&(Gt=`[${e("array")}]`),V.number.includes(Y)&&(Gt=`[${e("number")}]`);let kt=y=>typeof y=="string"?`[${e("deprecated: %s",y)}]`:`[${e("deprecated")}]`,Vi=[Y in K?kt(K[Y]):null,Gt,Y in j?`[${e("required")}]`:null,V.choices&&V.choices[Y]?`[${e("choices:")} ${i.stringifiedValues(V.choices[Y])}]`:null,q(V.default[Y],V.defaultDescription[Y])].filter(Boolean).join(" ");it.span({text:rs(nt),padding:[0,2,0,2+Yr(nt)],width:v(st,Fe)+4},lt);let g=s.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;Vi&&!g?it.div({text:Vi,padding:[0,0,0,2],align:"right"}):it.div()}),it.div()}),f.length&&(it.div(e("Examples:")),f.forEach(D=>{D[0]=D[0].replace(/\$0/g,$)}),f.forEach(D=>{D[1]===""?it.div({text:D[0],padding:[0,2,0,2]}):it.div({text:D[0],padding:[0,2,0,2],width:v(f,Fe)+4},{text:D[1]})}),it.div()),x.length>0){let D=x.map(tt=>tt.replace(/\$0/g,$)).join(`
`);it.div(`${D}
`)}return it.toString().replace(/\s*$/,"")};function v(I,$,j){let B=0;return Array.isArray(I)||(I=Object.values(I).map(K=>[K])),I.forEach(K=>{B=Math.max(t.stringWidth(j?`${j} ${rs(K[0])}`:rs(K[0]))+Yr(K[0]),B)}),$&&(B=Math.min(B,parseInt(($*.5).toString(),10))),B}function _(){let I=s.getDemandedOptions(),$=s.getOptions();(Object.keys($.alias)||[]).forEach(j=>{$.alias[j].forEach(B=>{p[B]&&i.describe(j,p[B]),B in I&&s.demandOption(j,I[B]),$.boolean.includes(B)&&s.boolean(j),$.count.includes(B)&&s.count(j),$.string.includes(B)&&s.string(j),$.normalize.includes(B)&&s.normalize(j),$.array.includes(B)&&s.array(j),$.number.includes(B)&&s.number(j)})})}let O;i.cacheHelpMessage=function(){O=this.help()},i.clearCachedHelpMessage=function(){O=void 0},i.hasCachedHelpMessage=function(){return!!O};function T(I,$,j,B){let K=[],ft=null;return Object.keys(j).forEach(V=>{K=K.concat(j[V])}),I.forEach(V=>{ft=[V].concat($[V]),ft.some(ut=>K.indexOf(ut)!==-1)||j[B].push(V)}),K}function H(I){return s.getOptions().hiddenOptions.indexOf(I)<0||s.parsed.argv[s.getOptions().showHiddenOpt]}i.showHelp=I=>{let $=s.getInternalMethods().getLoggerInstance();I||(I="error"),(typeof I=="function"?I:$[I])(i.help())},i.functionDescription=I=>["(",I.name?t.Parser.decamelize(I.name,"-"):e("generated-value"),")"].join(""),i.stringifiedValues=function($,j){let B="",K=j||", ",ft=[].concat($);return!$||!ft.length||ft.forEach(V=>{B.length&&(B+=K),B+=JSON.stringify(V)}),B};function q(I,$){let j=`[${e("default:")} `;if(I===void 0&&!$)return null;if($)j+=$;else switch(typeof I){case"string":j+=`"${I}"`;break;case"object":j+=JSON.stringify(I);break;default:j+=I}return`${j}]`}function at(){return t.process.stdColumns?Math.min(80,t.process.stdColumns):80}let J=null;i.version=I=>{J=I},i.showVersion=I=>{let $=s.getInternalMethods().getLoggerInstance();I||(I="error"),(typeof I=="function"?I:$[I])(J)},i.reset=function($){return r=null,l=!1,c=[],h=!1,x=[],f=[],d=[],p=ge(p,j=>!$[j]),i};let G=[];return i.freeze=function(){G.push({failMessage:r,failureOutput:l,usages:c,usageDisabled:h,epilogs:x,examples:f,commands:d,descriptions:p})},i.unfreeze=function($=!1){let j=G.pop();j&&($?(p={...j.descriptions,...p},d=[...j.commands,...d],c=[...j.usages,...c],f=[...j.examples,...f],x=[...j.epilogs,...x]):{failMessage:r,failureOutput:l,usages:c,usageDisabled:h,epilogs:x,examples:f,commands:d,descriptions:p}=j)},i}function wn(s){return typeof s=="object"}function Zl(s,t){return wn(s)?{text:s.text,indentation:s.indentation+t}:{text:s,indentation:t}}function Yr(s){return wn(s)?s.indentation:0}function rs(s){return wn(s)?s.text:s}var Vr=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,Kr=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var bn=class{constructor(t,e,i,n){var r,o,a;this.yargs=t,this.usage=e,this.command=i,this.shim=n,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(a=((r=this.shim.getEnv("SHELL"))===null||r===void 0?void 0:r.includes("zsh"))||((o=this.shim.getEnv("ZSH_NAME"))===null||o===void 0?void 0:o.includes("zsh")))!==null&&a!==void 0?a:!1}defaultCompletion(t,e,i,n){let r=this.command.getCommandHandlers();for(let a=0,l=t.length;a<l;++a)if(r[t[a]]&&r[t[a]].builder){let c=r[t[a]].builder;if(ns(c)){this.indexAfterLastReset=a+1;let h=this.yargs.getInternalMethods().reset();return c(h,!0),h.argv}}let o=[];this.commandCompletions(o,t,i),this.optionCompletions(o,t,e,i),this.choicesFromOptionsCompletions(o,t,e,i),this.choicesFromPositionalsCompletions(o,t,e,i),n(null,o)}commandCompletions(t,e,i){let n=this.yargs.getInternalMethods().getContext().commands;!i.match(/^-/)&&n[n.length-1]!==i&&!this.previousArgHasChoices(e)&&this.usage.getCommands().forEach(r=>{let o=me(r[0]).cmd;if(e.indexOf(o)===-1)if(!this.zshShell)t.push(o);else{let a=r[1]||"";t.push(o.replace(/:/g,"\\:")+":"+a)}})}optionCompletions(t,e,i,n){if((n.match(/^-/)||n===""&&t.length===0)&&!this.previousArgHasChoices(e)){let r=this.yargs.getOptions(),o=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(r.key).forEach(a=>{let l=!!r.configuration["boolean-negation"]&&r.boolean.includes(a);!o.includes(a)&&!r.hiddenOptions.includes(a)&&!this.argsContainKey(e,a,l)&&this.completeOptionKey(a,t,n,l&&!!r.default[a])})}}choicesFromOptionsCompletions(t,e,i,n){if(this.previousArgHasChoices(e)){let r=this.getPreviousArgChoices(e);r&&r.length>0&&t.push(...r.map(o=>o.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(t,e,i,n){if(n===""&&t.length>0&&this.previousArgHasChoices(e))return;let r=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],o=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),a=r[i._.length-o-1];if(!a)return;let l=this.yargs.getOptions().choices[a]||[];for(let c of l)c.startsWith(n)&&t.push(c.replace(/:/g,"\\:"))}getPreviousArgChoices(t){if(t.length<1)return;let e=t[t.length-1],i="";if(!e.startsWith("-")&&t.length>1&&(i=e,e=t[t.length-2]),!e.startsWith("-"))return;let n=e.replace(/^-+/,""),r=this.yargs.getOptions(),o=[n,...this.yargs.getAliases()[n]||[]],a;for(let l of o)if(Object.prototype.hasOwnProperty.call(r.key,l)&&Array.isArray(r.choices[l])){a=r.choices[l];break}if(a)return a.filter(l=>!i||l.startsWith(i))}previousArgHasChoices(t){let e=this.getPreviousArgChoices(t);return e!==void 0&&e.length>0}argsContainKey(t,e,i){let n=r=>t.indexOf((/^[^0-9]$/.test(r)?"-":"--")+r)!==-1;if(n(e)||i&&n(`no-${e}`))return!0;if(this.aliases){for(let r of this.aliases[e])if(n(r))return!0}return!1}completeOptionKey(t,e,i,n){var r,o,a,l;let c=t;if(this.zshShell){let p=this.usage.getDescriptions(),x=(o=(r=this===null||this===void 0?void 0:this.aliases)===null||r===void 0?void 0:r[t])===null||o===void 0?void 0:o.find(E=>{let v=p[E];return typeof v=="string"&&v.length>0}),w=x?p[x]:void 0,m=(l=(a=p[t])!==null&&a!==void 0?a:w)!==null&&l!==void 0?l:"";c=`${t.replace(/:/g,"\\:")}:${m.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let h=p=>/^--/.test(p),f=p=>/^[^0-9]$/.test(p),d=!h(i)&&f(t)?"-":"--";e.push(d+c),n&&e.push(d+"no-"+c)}customCompletion(t,e,i,n){if(Ct(this.customCompletionFunction,null,this.shim),Xl(this.customCompletionFunction)){let r=this.customCompletionFunction(i,e);return X(r)?r.then(o=>{this.shim.process.nextTick(()=>{n(null,o)})}).catch(o=>{this.shim.process.nextTick(()=>{n(o,void 0)})}):n(null,r)}else return tc(this.customCompletionFunction)?this.customCompletionFunction(i,e,(r=n)=>this.defaultCompletion(t,e,i,r),r=>{n(null,r)}):this.customCompletionFunction(i,e,r=>{n(null,r)})}getCompletion(t,e){let i=t.length?t[t.length-1]:"",n=this.yargs.parse(t,!0),r=this.customCompletionFunction?o=>this.customCompletion(t,o,i,e):o=>this.defaultCompletion(t,o,i,e);return X(n)?n.then(r):r(n)}generateCompletionScript(t,e){let i=this.zshShell?Kr:Vr,n=this.shim.path.basename(t);return t.match(/\.js$/)&&(t=`./${t}`),i=i.replace(/{{app_name}}/g,n),i=i.replace(/{{completion_command}}/g,e),i.replace(/{{app_path}}/g,t)}registerFunction(t){this.customCompletionFunction=t}setParsed(t){this.aliases=t.aliases}};function Jr(s,t,e,i){return new bn(s,t,e,i)}function Xl(s){return s.length<3}function tc(s){return s.length>3}function Zr(s,t){if(s.length===0)return t.length;if(t.length===0)return s.length;let e=[],i;for(i=0;i<=t.length;i++)e[i]=[i];let n;for(n=0;n<=s.length;n++)e[0][n]=n;for(i=1;i<=t.length;i++)for(n=1;n<=s.length;n++)t.charAt(i-1)===s.charAt(n-1)?e[i][n]=e[i-1][n-1]:i>1&&n>1&&t.charAt(i-2)===s.charAt(n-1)&&t.charAt(i-1)===s.charAt(n-2)?e[i][n]=e[i-2][n-2]+1:e[i][n]=Math.min(e[i-1][n-1]+1,Math.min(e[i][n-1]+1,e[i-1][n]+1));return e[t.length][s.length]}var Qr=["$0","--","_"];function Xr(s,t,e){let i=e.y18n.__,n=e.y18n.__n,r={};r.nonOptionCount=function(f){let d=s.getDemandedCommands(),x=f._.length+(f["--"]?f["--"].length:0)-s.getInternalMethods().getContext().commands.length;d._&&(x<d._.min||x>d._.max)&&(x<d._.min?d._.minMsg!==void 0?t.fail(d._.minMsg?d._.minMsg.replace(/\$0/g,x.toString()).replace(/\$1/,d._.min.toString()):null):t.fail(n("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",x,x.toString(),d._.min.toString())):x>d._.max&&(d._.maxMsg!==void 0?t.fail(d._.maxMsg?d._.maxMsg.replace(/\$0/g,x.toString()).replace(/\$1/,d._.max.toString()):null):t.fail(n("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",x,x.toString(),d._.max.toString()))))},r.positionalCount=function(f,d){d<f&&t.fail(n("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",d,d+"",f+""))},r.requiredArguments=function(f,d){let p=null;for(let x of Object.keys(d))(!Object.prototype.hasOwnProperty.call(f,x)||typeof f[x]>"u")&&(p=p||{},p[x]=d[x]);if(p){let x=[];for(let m of Object.keys(p)){let E=p[m];E&&x.indexOf(E)<0&&x.push(E)}let w=x.length?`
${x.join(`
`)}`:"";t.fail(n("Missing required argument: %s","Missing required arguments: %s",Object.keys(p).length,Object.keys(p).join(", ")+w))}},r.unknownArguments=function(f,d,p,x,w=!0){var m;let E=s.getInternalMethods().getCommandInstance().getCommands(),v=[],_=s.getInternalMethods().getContext();if(Object.keys(f).forEach(O=>{!Qr.includes(O)&&!Object.prototype.hasOwnProperty.call(p,O)&&!Object.prototype.hasOwnProperty.call(s.getInternalMethods().getParseContext(),O)&&!r.isValidAndSomeAliasIsNotNew(O,d)&&v.push(O)}),w&&(_.commands.length>0||E.length>0||x)&&f._.slice(_.commands.length).forEach(O=>{E.includes(""+O)||v.push(""+O)}),w){let T=((m=s.getDemandedCommands()._)===null||m===void 0?void 0:m.max)||0,H=_.commands.length+T;H<f._.length&&f._.slice(H).forEach(q=>{q=String(q),!_.commands.includes(q)&&!v.includes(q)&&v.push(q)})}v.length&&t.fail(n("Unknown argument: %s","Unknown arguments: %s",v.length,v.map(O=>O.trim()?O:`"${O}"`).join(", ")))},r.unknownCommands=function(f){let d=s.getInternalMethods().getCommandInstance().getCommands(),p=[],x=s.getInternalMethods().getContext();return(x.commands.length>0||d.length>0)&&f._.slice(x.commands.length).forEach(w=>{d.includes(""+w)||p.push(""+w)}),p.length>0?(t.fail(n("Unknown command: %s","Unknown commands: %s",p.length,p.join(", "))),!0):!1},r.isValidAndSomeAliasIsNotNew=function(f,d){if(!Object.prototype.hasOwnProperty.call(d,f))return!1;let p=s.parsed.newAliases;return[f,...d[f]].some(x=>!Object.prototype.hasOwnProperty.call(p,x)||!p[f])},r.limitedChoices=function(f){let d=s.getOptions(),p={};if(!Object.keys(d.choices).length)return;Object.keys(f).forEach(m=>{Qr.indexOf(m)===-1&&Object.prototype.hasOwnProperty.call(d.choices,m)&&[].concat(f[m]).forEach(E=>{d.choices[m].indexOf(E)===-1&&E!==void 0&&(p[m]=(p[m]||[]).concat(E))})});let x=Object.keys(p);if(!x.length)return;let w=i("Invalid values:");x.forEach(m=>{w+=`
  ${i("Argument: %s, Given: %s, Choices: %s",m,t.stringifiedValues(p[m]),t.stringifiedValues(d.choices[m]))}`}),t.fail(w)};let o={};r.implies=function(f,d){R("<string|object> [array|number|string]",[f,d],arguments.length),typeof f=="object"?Object.keys(f).forEach(p=>{r.implies(p,f[p])}):(s.global(f),o[f]||(o[f]=[]),Array.isArray(d)?d.forEach(p=>r.implies(f,p)):(Ct(d,void 0,e),o[f].push(d)))},r.getImplied=function(){return o};function a(h,f){let d=Number(f);return f=isNaN(d)?f:d,typeof f=="number"?f=h._.length>=f:f.match(/^--no-.+/)?(f=f.match(/^--no-(.+)/)[1],f=!Object.prototype.hasOwnProperty.call(h,f)):f=Object.prototype.hasOwnProperty.call(h,f),f}r.implications=function(f){let d=[];if(Object.keys(o).forEach(p=>{let x=p;(o[p]||[]).forEach(w=>{let m=x,E=w;m=a(f,m),w=a(f,w),m&&!w&&d.push(` ${x} -> ${E}`)})}),d.length){let p=`${i("Implications failed:")}
`;d.forEach(x=>{p+=x}),t.fail(p)}};let l={};r.conflicts=function(f,d){R("<string|object> [array|string]",[f,d],arguments.length),typeof f=="object"?Object.keys(f).forEach(p=>{r.conflicts(p,f[p])}):(s.global(f),l[f]||(l[f]=[]),Array.isArray(d)?d.forEach(p=>r.conflicts(f,p)):l[f].push(d))},r.getConflicting=()=>l,r.conflicting=function(f){Object.keys(f).forEach(d=>{l[d]&&l[d].forEach(p=>{p&&f[d]!==void 0&&f[p]!==void 0&&t.fail(i("Arguments %s and %s are mutually exclusive",d,p))})}),s.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(l).forEach(d=>{l[d].forEach(p=>{p&&f[e.Parser.camelCase(d)]!==void 0&&f[e.Parser.camelCase(p)]!==void 0&&t.fail(i("Arguments %s and %s are mutually exclusive",d,p))})})},r.recommendCommands=function(f,d){d=d.sort((m,E)=>E.length-m.length);let x=null,w=1/0;for(let m=0,E;(E=d[m])!==void 0;m++){let v=Zr(f,E);v<=3&&v<w&&(w=v,x=E)}x&&t.fail(i("Did you mean %s?",x))},r.reset=function(f){return o=ge(o,d=>!f[d]),l=ge(l,d=>!f[d]),r};let c=[];return r.freeze=function(){c.push({implied:o,conflicting:l})},r.unfreeze=function(){let f=c.pop();Ct(f,void 0,e),{implied:o,conflicting:l}=f},r}var yn=[],xi;function Ei(s,t,e,i){xi=i;let n={};if(Object.prototype.hasOwnProperty.call(s,"extends")){if(typeof s.extends!="string")return n;let r=/\.json|\..*rc$/.test(s.extends),o=null;if(r)o=ic(t,s.extends);else try{o=require.resolve(s.extends)}catch{return s}ec(o),yn.push(o),n=r?JSON.parse(xi.readFileSync(o,"utf8")):require(s.extends),delete s.extends,n=Ei(n,xi.path.dirname(o),e,xi)}return yn=[],e?to(n,s):Object.assign({},n,s)}function ec(s){if(yn.indexOf(s)>-1)throw new Q(`Circular extended configurations: '${s}'.`)}function ic(s,t){return xi.path.resolve(s,t)}function to(s,t){let e={};function i(n){return n&&typeof n=="object"&&!Array.isArray(n)}Object.assign(e,s);for(let n of Object.keys(t))i(t[n])&&i(e[n])?e[n]=to(s[n],t[n]):e[n]=t[n];return e}var M=function(s,t,e,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?s!==t||!n:!t.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(s,e):n?n.value=e:t.set(s,e),e},u=function(s,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?s!==t||!i:!t.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(s):i?i.value:t.get(s)},ct,Ie,Ci,It,$t,os,be,Ne,as,Nt,ls,Pt,Xt,Ft,Lt,cs,Ze,mt,P,hs,fs,Tt,Pe,Qe,Le,ye,us,z,De,We,ze,U,ds,te,rt;function xo(s){return(t=[],e=s.process.cwd(),i)=>{let n=new Tn(t,e,i,s);return Object.defineProperty(n,"argv",{get:()=>n.parse(),enumerable:!0}),n.help(),n.version(),n}}var eo=Symbol("copyDoubleDash"),io=Symbol("copyDoubleDash"),Sn=Symbol("deleteFromParserHintObject"),so=Symbol("emitWarning"),no=Symbol("freeze"),ro=Symbol("getDollarZero"),Be=Symbol("getParserConfiguration"),oo=Symbol("getUsageConfiguration"),xn=Symbol("guessLocale"),ao=Symbol("guessVersion"),lo=Symbol("parsePositionalNumbers"),En=Symbol("pkgUp"),Se=Symbol("populateParserHintArray"),Xe=Symbol("populateParserHintSingleValueDictionary"),Cn=Symbol("populateParserHintArrayDictionary"),On=Symbol("populateParserHintDictionary"),vn=Symbol("sanitizeKey"),An=Symbol("setKey"),_n=Symbol("unfreeze"),co=Symbol("validateAsync"),ho=Symbol("getCommandInstance"),fo=Symbol("getContext"),uo=Symbol("getHasOutput"),po=Symbol("getLoggerInstance"),mo=Symbol("getParseContext"),go=Symbol("getUsageInstance"),wo=Symbol("getValidationInstance"),ps=Symbol("hasParseCallback"),bo=Symbol("isGlobalContext"),Ue=Symbol("postProcess"),yo=Symbol("rebase"),$n=Symbol("reset"),Oi=Symbol("runYargsParserAndExecuteCommands"),Fn=Symbol("runValidation"),So=Symbol("setHasOutput"),Ge=Symbol("kTrackManuallySetKeys"),Tn=class{constructor(t=[],e,i,n){this.customScriptName=!1,this.parsed=!1,ct.set(this,void 0),Ie.set(this,void 0),Ci.set(this,{commands:[],fullCommands:[]}),It.set(this,null),$t.set(this,null),os.set(this,"show-hidden"),be.set(this,null),Ne.set(this,!0),as.set(this,{}),Nt.set(this,!0),ls.set(this,[]),Pt.set(this,void 0),Xt.set(this,{}),Ft.set(this,!1),Lt.set(this,null),cs.set(this,!0),Ze.set(this,void 0),mt.set(this,""),P.set(this,void 0),hs.set(this,void 0),fs.set(this,{}),Tt.set(this,null),Pe.set(this,null),Qe.set(this,{}),Le.set(this,{}),ye.set(this,void 0),us.set(this,!1),z.set(this,void 0),De.set(this,!1),We.set(this,!1),ze.set(this,!1),U.set(this,void 0),ds.set(this,{}),te.set(this,null),rt.set(this,void 0),M(this,z,n,"f"),M(this,ye,t,"f"),M(this,Ie,e,"f"),M(this,hs,i,"f"),M(this,Pt,new ss(this),"f"),this.$0=this[ro](),this[$n](),M(this,ct,u(this,ct,"f"),"f"),M(this,U,u(this,U,"f"),"f"),M(this,rt,u(this,rt,"f"),"f"),M(this,P,u(this,P,"f"),"f"),u(this,P,"f").showHiddenOpt=u(this,os,"f"),M(this,Ze,this[io](),"f")}addHelpOpt(t,e){let i="help";return R("[string|boolean] [string]",[t,e],arguments.length),u(this,Lt,"f")&&(this[Sn](u(this,Lt,"f")),M(this,Lt,null,"f")),t===!1&&e===void 0?this:(M(this,Lt,typeof t=="string"?t:i,"f"),this.boolean(u(this,Lt,"f")),this.describe(u(this,Lt,"f"),e||u(this,U,"f").deferY18nLookup("Show help")),this)}help(t,e){return this.addHelpOpt(t,e)}addShowHiddenOpt(t,e){if(R("[string|boolean] [string]",[t,e],arguments.length),t===!1&&e===void 0)return this;let i=typeof t=="string"?t:u(this,os,"f");return this.boolean(i),this.describe(i,e||u(this,U,"f").deferY18nLookup("Show hidden options")),u(this,P,"f").showHiddenOpt=i,this}showHidden(t,e){return this.addShowHiddenOpt(t,e)}alias(t,e){return R("<object|string|array> [string|array]",[t,e],arguments.length),this[Cn](this.alias.bind(this),"alias",t,e),this}array(t){return R("<array|string>",[t],arguments.length),this[Se]("array",t),this[Ge](t),this}boolean(t){return R("<array|string>",[t],arguments.length),this[Se]("boolean",t),this[Ge](t),this}check(t,e){return R("<function> [boolean]",[t,e],arguments.length),this.middleware((i,n)=>Me(()=>t(i,n.getOptions()),r=>(r?(typeof r=="string"||r instanceof Error)&&u(this,U,"f").fail(r.toString(),r):u(this,U,"f").fail(u(this,z,"f").y18n.__("Argument check failed: %s",t.toString())),i),r=>(u(this,U,"f").fail(r.message?r.message:r.toString(),r),i)),!1,e),this}choices(t,e){return R("<object|string|array> [string|array]",[t,e],arguments.length),this[Cn](this.choices.bind(this),"choices",t,e),this}coerce(t,e){if(R("<object|string|array> [function]",[t,e],arguments.length),Array.isArray(t)){if(!e)throw new Q("coerce callback must be provided");for(let i of t)this.coerce(i,e);return this}else if(typeof t=="object"){for(let i of Object.keys(t))this.coerce(i,t[i]);return this}if(!e)throw new Q("coerce callback must be provided");return u(this,P,"f").key[t]=!0,u(this,Pt,"f").addCoerceMiddleware((i,n)=>{let r;return Object.prototype.hasOwnProperty.call(i,t)?Me(()=>(r=n.getAliases(),e(i[t])),a=>{i[t]=a;let l=n.getInternalMethods().getParserConfiguration()["strip-aliased"];if(r[t]&&l!==!0)for(let c of r[t])i[c]=a;return i},a=>{throw new Q(a.message)}):i},t),this}conflicts(t,e){return R("<string|object> [string|array]",[t,e],arguments.length),u(this,rt,"f").conflicts(t,e),this}config(t="config",e,i){return R("[object|string] [string|function] [function]",[t,e,i],arguments.length),typeof t=="object"&&!Array.isArray(t)?(t=Ei(t,u(this,Ie,"f"),this[Be]()["deep-merge-config"]||!1,u(this,z,"f")),u(this,P,"f").configObjects=(u(this,P,"f").configObjects||[]).concat(t),this):(typeof e=="function"&&(i=e,e=void 0),this.describe(t,e||u(this,U,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(t)?t:[t]).forEach(n=>{u(this,P,"f").config[n]=i||!0}),this)}completion(t,e,i){return R("[string] [string|boolean|function] [function]",[t,e,i],arguments.length),typeof e=="function"&&(i=e,e=void 0),M(this,$t,t||u(this,$t,"f")||"completion","f"),!e&&e!==!1&&(e="generate completion script"),this.command(u(this,$t,"f"),e),i&&u(this,It,"f").registerFunction(i),this}command(t,e,i,n,r,o){return R("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[t,e,i,n,r,o],arguments.length),u(this,ct,"f").addHandler(t,e,i,n,r,o),this}commands(t,e,i,n,r,o){return this.command(t,e,i,n,r,o)}commandDir(t,e){R("<string> [object]",[t,e],arguments.length);let i=u(this,hs,"f")||u(this,z,"f").require;return u(this,ct,"f").addDirectory(t,i,u(this,z,"f").getCallerFile(),e),this}count(t){return R("<array|string>",[t],arguments.length),this[Se]("count",t),this[Ge](t),this}default(t,e,i){return R("<object|string|array> [*] [string]",[t,e,i],arguments.length),i&&(pn(t,u(this,z,"f")),u(this,P,"f").defaultDescription[t]=i),typeof e=="function"&&(pn(t,u(this,z,"f")),u(this,P,"f").defaultDescription[t]||(u(this,P,"f").defaultDescription[t]=u(this,U,"f").functionDescription(e)),e=e.call()),this[Xe](this.default.bind(this),"default",t,e),this}defaults(t,e,i){return this.default(t,e,i)}demandCommand(t=1,e,i,n){return R("[number] [number|string] [string|null|undefined] [string|null|undefined]",[t,e,i,n],arguments.length),typeof e!="number"&&(i=e,e=1/0),this.global("_",!1),u(this,P,"f").demandedCommands._={min:t,max:e,minMsg:i,maxMsg:n},this}demand(t,e,i){return Array.isArray(e)?(e.forEach(n=>{Ct(i,!0,u(this,z,"f")),this.demandOption(n,i)}),e=1/0):typeof e!="number"&&(i=e,e=1/0),typeof t=="number"?(Ct(i,!0,u(this,z,"f")),this.demandCommand(t,e,i,i)):Array.isArray(t)?t.forEach(n=>{Ct(i,!0,u(this,z,"f")),this.demandOption(n,i)}):typeof i=="string"?this.demandOption(t,i):(i===!0||typeof i>"u")&&this.demandOption(t),this}demandOption(t,e){return R("<object|string|array> [string]",[t,e],arguments.length),this[Xe](this.demandOption.bind(this),"demandedOptions",t,e),this}deprecateOption(t,e){return R("<string> [string|boolean]",[t,e],arguments.length),u(this,P,"f").deprecatedOptions[t]=e,this}describe(t,e){return R("<object|string|array> [string]",[t,e],arguments.length),this[An](t,!0),u(this,U,"f").describe(t,e),this}detectLocale(t){return R("<boolean>",[t],arguments.length),M(this,Ne,t,"f"),this}env(t){return R("[string|boolean]",[t],arguments.length),t===!1?delete u(this,P,"f").envPrefix:u(this,P,"f").envPrefix=t||"",this}epilogue(t){return R("<string>",[t],arguments.length),u(this,U,"f").epilog(t),this}epilog(t){return this.epilogue(t)}example(t,e){return R("<string|array> [string]",[t,e],arguments.length),Array.isArray(t)?t.forEach(i=>this.example(...i)):u(this,U,"f").example(t,e),this}exit(t,e){M(this,Ft,!0,"f"),M(this,be,e,"f"),u(this,Nt,"f")&&u(this,z,"f").process.exit(t)}exitProcess(t=!0){return R("[boolean]",[t],arguments.length),M(this,Nt,t,"f"),this}fail(t){if(R("<function|boolean>",[t],arguments.length),typeof t=="boolean"&&t!==!1)throw new Q("Invalid first argument. Expected function or boolean 'false'");return u(this,U,"f").failFn(t),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(t,e){return R("<array> [function]",[t,e],arguments.length),e?u(this,It,"f").getCompletion(t,e):new Promise((i,n)=>{u(this,It,"f").getCompletion(t,(r,o)=>{r?n(r):i(o)})})}getDemandedOptions(){return R([],0),u(this,P,"f").demandedOptions}getDemandedCommands(){return R([],0),u(this,P,"f").demandedCommands}getDeprecatedOptions(){return R([],0),u(this,P,"f").deprecatedOptions}getDetectLocale(){return u(this,Ne,"f")}getExitProcess(){return u(this,Nt,"f")}getGroups(){return Object.assign({},u(this,Xt,"f"),u(this,Le,"f"))}getHelp(){if(M(this,Ft,!0,"f"),!u(this,U,"f").hasCachedHelpMessage()){if(!this.parsed){let e=this[Oi](u(this,ye,"f"),void 0,void 0,0,!0);if(X(e))return e.then(()=>u(this,U,"f").help())}let t=u(this,ct,"f").runDefaultBuilderOn(this);if(X(t))return t.then(()=>u(this,U,"f").help())}return Promise.resolve(u(this,U,"f").help())}getOptions(){return u(this,P,"f")}getStrict(){return u(this,De,"f")}getStrictCommands(){return u(this,We,"f")}getStrictOptions(){return u(this,ze,"f")}global(t,e){return R("<string|array> [boolean]",[t,e],arguments.length),t=[].concat(t),e!==!1?u(this,P,"f").local=u(this,P,"f").local.filter(i=>t.indexOf(i)===-1):t.forEach(i=>{u(this,P,"f").local.includes(i)||u(this,P,"f").local.push(i)}),this}group(t,e){R("<string|array> <string>",[t,e],arguments.length);let i=u(this,Le,"f")[e]||u(this,Xt,"f")[e];u(this,Le,"f")[e]&&delete u(this,Le,"f")[e];let n={};return u(this,Xt,"f")[e]=(i||[]).concat(t).filter(r=>n[r]?!1:n[r]=!0),this}hide(t){return R("<string>",[t],arguments.length),u(this,P,"f").hiddenOptions.push(t),this}implies(t,e){return R("<string|object> [number|string|array]",[t,e],arguments.length),u(this,rt,"f").implies(t,e),this}locale(t){return R("[string]",[t],arguments.length),t===void 0?(this[xn](),u(this,z,"f").y18n.getLocale()):(M(this,Ne,!1,"f"),u(this,z,"f").y18n.setLocale(t),this)}middleware(t,e,i){return u(this,Pt,"f").addMiddleware(t,!!e,i)}nargs(t,e){return R("<string|object|array> [number]",[t,e],arguments.length),this[Xe](this.nargs.bind(this),"narg",t,e),this}normalize(t){return R("<array|string>",[t],arguments.length),this[Se]("normalize",t),this}number(t){return R("<array|string>",[t],arguments.length),this[Se]("number",t),this[Ge](t),this}option(t,e){if(R("<string|object> [object]",[t,e],arguments.length),typeof t=="object")Object.keys(t).forEach(i=>{this.options(i,t[i])});else{typeof e!="object"&&(e={}),this[Ge](t),u(this,te,"f")&&(t==="version"||(e==null?void 0:e.alias)==="version")&&this[so](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),u(this,P,"f").key[t]=!0,e.alias&&this.alias(t,e.alias);let i=e.deprecate||e.deprecated;i&&this.deprecateOption(t,i);let n=e.demand||e.required||e.require;n&&this.demand(t,n),e.demandOption&&this.demandOption(t,typeof e.demandOption=="string"?e.demandOption:void 0),e.conflicts&&this.conflicts(t,e.conflicts),"default"in e&&this.default(t,e.default),e.implies!==void 0&&this.implies(t,e.implies),e.nargs!==void 0&&this.nargs(t,e.nargs),e.config&&this.config(t,e.configParser),e.normalize&&this.normalize(t),e.choices&&this.choices(t,e.choices),e.coerce&&this.coerce(t,e.coerce),e.group&&this.group(t,e.group),(e.boolean||e.type==="boolean")&&(this.boolean(t),e.alias&&this.boolean(e.alias)),(e.array||e.type==="array")&&(this.array(t),e.alias&&this.array(e.alias)),(e.number||e.type==="number")&&(this.number(t),e.alias&&this.number(e.alias)),(e.string||e.type==="string")&&(this.string(t),e.alias&&this.string(e.alias)),(e.count||e.type==="count")&&this.count(t),typeof e.global=="boolean"&&this.global(t,e.global),e.defaultDescription&&(u(this,P,"f").defaultDescription[t]=e.defaultDescription),e.skipValidation&&this.skipValidation(t);let r=e.describe||e.description||e.desc,o=u(this,U,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(o,t)||typeof r=="string")&&this.describe(t,r),e.hidden&&this.hide(t),e.requiresArg&&this.requiresArg(t)}return this}options(t,e){return this.option(t,e)}parse(t,e,i){R("[string|array] [function|boolean|object] [function]",[t,e,i],arguments.length),this[no](),typeof t>"u"&&(t=u(this,ye,"f")),typeof e=="object"&&(M(this,Pe,e,"f"),e=i),typeof e=="function"&&(M(this,Tt,e,"f"),e=!1),e||M(this,ye,t,"f"),u(this,Tt,"f")&&M(this,Nt,!1,"f");let n=this[Oi](t,!!e),r=this.parsed;return u(this,It,"f").setParsed(this.parsed),X(n)?n.then(o=>(u(this,Tt,"f")&&u(this,Tt,"f").call(this,u(this,be,"f"),o,u(this,mt,"f")),o)).catch(o=>{throw u(this,Tt,"f")&&u(this,Tt,"f")(o,this.parsed.argv,u(this,mt,"f")),o}).finally(()=>{this[_n](),this.parsed=r}):(u(this,Tt,"f")&&u(this,Tt,"f").call(this,u(this,be,"f"),n,u(this,mt,"f")),this[_n](),this.parsed=r,n)}parseAsync(t,e,i){let n=this.parse(t,e,i);return X(n)?n:Promise.resolve(n)}parseSync(t,e,i){let n=this.parse(t,e,i);if(X(n))throw new Q(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return n}parserConfiguration(t){return R("<object>",[t],arguments.length),M(this,fs,t,"f"),this}pkgConf(t,e){R("<string> [string]",[t,e],arguments.length);let i=null,n=this[En](e||u(this,Ie,"f"));return n[t]&&typeof n[t]=="object"&&(i=Ei(n[t],e||u(this,Ie,"f"),this[Be]()["deep-merge-config"]||!1,u(this,z,"f")),u(this,P,"f").configObjects=(u(this,P,"f").configObjects||[]).concat(i)),this}positional(t,e){R("<string> <object>",[t,e],arguments.length);let i=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];e=ge(e,(o,a)=>o==="type"&&!["string","number","boolean"].includes(a)?!1:i.includes(o));let n=u(this,Ci,"f").fullCommands[u(this,Ci,"f").fullCommands.length-1],r=n?u(this,ct,"f").cmdToParseOptions(n):{array:[],alias:{},default:{},demand:{}};return Ke(r).forEach(o=>{let a=r[o];Array.isArray(a)?a.indexOf(t)!==-1&&(e[o]=!0):a[t]&&!(o in e)&&(e[o]=a[t])}),this.group(t,u(this,U,"f").getPositionalGroupName()),this.option(t,e)}recommendCommands(t=!0){return R("[boolean]",[t],arguments.length),M(this,us,t,"f"),this}required(t,e,i){return this.demand(t,e,i)}require(t,e,i){return this.demand(t,e,i)}requiresArg(t){return R("<array|string|object> [number]",[t],arguments.length),typeof t=="string"&&u(this,P,"f").narg[t]?this:(this[Xe](this.requiresArg.bind(this),"narg",t,NaN),this)}showCompletionScript(t,e){return R("[string] [string]",[t,e],arguments.length),t=t||this.$0,u(this,Ze,"f").log(u(this,It,"f").generateCompletionScript(t,e||u(this,$t,"f")||"completion")),this}showHelp(t){if(R("[string|function]",[t],arguments.length),M(this,Ft,!0,"f"),!u(this,U,"f").hasCachedHelpMessage()){if(!this.parsed){let i=this[Oi](u(this,ye,"f"),void 0,void 0,0,!0);if(X(i))return i.then(()=>{u(this,U,"f").showHelp(t)}),this}let e=u(this,ct,"f").runDefaultBuilderOn(this);if(X(e))return e.then(()=>{u(this,U,"f").showHelp(t)}),this}return u(this,U,"f").showHelp(t),this}scriptName(t){return this.customScriptName=!0,this.$0=t,this}showHelpOnFail(t,e){return R("[boolean|string] [string]",[t,e],arguments.length),u(this,U,"f").showHelpOnFail(t,e),this}showVersion(t){return R("[string|function]",[t],arguments.length),u(this,U,"f").showVersion(t),this}skipValidation(t){return R("<array|string>",[t],arguments.length),this[Se]("skipValidation",t),this}strict(t){return R("[boolean]",[t],arguments.length),M(this,De,t!==!1,"f"),this}strictCommands(t){return R("[boolean]",[t],arguments.length),M(this,We,t!==!1,"f"),this}strictOptions(t){return R("[boolean]",[t],arguments.length),M(this,ze,t!==!1,"f"),this}string(t){return R("<array|string>",[t],arguments.length),this[Se]("string",t),this[Ge](t),this}terminalWidth(){return R([],0),u(this,z,"f").process.stdColumns}updateLocale(t){return this.updateStrings(t)}updateStrings(t){return R("<object>",[t],arguments.length),M(this,Ne,!1,"f"),u(this,z,"f").y18n.updateLocale(t),this}usage(t,e,i,n){if(R("<string|null|undefined> [string|boolean] [function|object] [function]",[t,e,i,n],arguments.length),e!==void 0){if(Ct(t,null,u(this,z,"f")),(t||"").match(/^\$0( |$)/))return this.command(t,e,i,n);throw new Q(".usage() description must start with $0 if being used as alias for .command()")}else return u(this,U,"f").usage(t),this}usageConfiguration(t){return R("<object>",[t],arguments.length),M(this,ds,t,"f"),this}version(t,e,i){let n="version";if(R("[boolean|string] [string] [string]",[t,e,i],arguments.length),u(this,te,"f")&&(this[Sn](u(this,te,"f")),u(this,U,"f").version(void 0),M(this,te,null,"f")),arguments.length===0)i=this[ao](),t=n;else if(arguments.length===1){if(t===!1)return this;i=t,t=n}else arguments.length===2&&(i=e,e=void 0);return M(this,te,typeof t=="string"?t:n,"f"),e=e||u(this,U,"f").deferY18nLookup("Show version number"),u(this,U,"f").version(i||void 0),this.boolean(u(this,te,"f")),this.describe(u(this,te,"f"),e),this}wrap(t){return R("<number|null|undefined>",[t],arguments.length),u(this,U,"f").wrap(t),this}[(ct=new WeakMap,Ie=new WeakMap,Ci=new WeakMap,It=new WeakMap,$t=new WeakMap,os=new WeakMap,be=new WeakMap,Ne=new WeakMap,as=new WeakMap,Nt=new WeakMap,ls=new WeakMap,Pt=new WeakMap,Xt=new WeakMap,Ft=new WeakMap,Lt=new WeakMap,cs=new WeakMap,Ze=new WeakMap,mt=new WeakMap,P=new WeakMap,hs=new WeakMap,fs=new WeakMap,Tt=new WeakMap,Pe=new WeakMap,Qe=new WeakMap,Le=new WeakMap,ye=new WeakMap,us=new WeakMap,z=new WeakMap,De=new WeakMap,We=new WeakMap,ze=new WeakMap,U=new WeakMap,ds=new WeakMap,te=new WeakMap,rt=new WeakMap,eo)](t){if(!t._||!t["--"])return t;t._.push.apply(t._,t["--"]);try{delete t["--"]}catch{}return t}[io](){return{log:(...t)=>{this[ps]()||console.log(...t),M(this,Ft,!0,"f"),u(this,mt,"f").length&&M(this,mt,u(this,mt,"f")+`
`,"f"),M(this,mt,u(this,mt,"f")+t.join(" "),"f")},error:(...t)=>{this[ps]()||console.error(...t),M(this,Ft,!0,"f"),u(this,mt,"f").length&&M(this,mt,u(this,mt,"f")+`
`,"f"),M(this,mt,u(this,mt,"f")+t.join(" "),"f")}}}[Sn](t){Ke(u(this,P,"f")).forEach(e=>{if((n=>n==="configObjects")(e))return;let i=u(this,P,"f")[e];Array.isArray(i)?i.includes(t)&&i.splice(i.indexOf(t),1):typeof i=="object"&&delete i[t]}),delete u(this,U,"f").getDescriptions()[t]}[so](t,e,i){u(this,as,"f")[i]||(u(this,z,"f").process.emitWarning(t,e),u(this,as,"f")[i]=!0)}[no](){u(this,ls,"f").push({options:u(this,P,"f"),configObjects:u(this,P,"f").configObjects.slice(0),exitProcess:u(this,Nt,"f"),groups:u(this,Xt,"f"),strict:u(this,De,"f"),strictCommands:u(this,We,"f"),strictOptions:u(this,ze,"f"),completionCommand:u(this,$t,"f"),output:u(this,mt,"f"),exitError:u(this,be,"f"),hasOutput:u(this,Ft,"f"),parsed:this.parsed,parseFn:u(this,Tt,"f"),parseContext:u(this,Pe,"f")}),u(this,U,"f").freeze(),u(this,rt,"f").freeze(),u(this,ct,"f").freeze(),u(this,Pt,"f").freeze()}[ro](){let t="",e;return/\b(node|iojs|electron)(\.exe)?$/.test(u(this,z,"f").process.argv()[0])?e=u(this,z,"f").process.argv().slice(1,2):e=u(this,z,"f").process.argv().slice(0,1),t=e.map(i=>{let n=this[yo](u(this,Ie,"f"),i);return i.match(/^(\/|([a-zA-Z]:)?\\)/)&&n.length<i.length?n:i}).join(" ").trim(),u(this,z,"f").getEnv("_")&&u(this,z,"f").getProcessArgvBin()===u(this,z,"f").getEnv("_")&&(t=u(this,z,"f").getEnv("_").replace(`${u(this,z,"f").path.dirname(u(this,z,"f").process.execPath())}/`,"")),t}[Be](){return u(this,fs,"f")}[oo](){return u(this,ds,"f")}[xn](){if(!u(this,Ne,"f"))return;let t=u(this,z,"f").getEnv("LC_ALL")||u(this,z,"f").getEnv("LC_MESSAGES")||u(this,z,"f").getEnv("LANG")||u(this,z,"f").getEnv("LANGUAGE")||"en_US";this.locale(t.replace(/[.:].*/,""))}[ao](){return this[En]().version||"unknown"}[lo](t){let e=t["--"]?t["--"]:t._;for(let i=0,n;(n=e[i])!==void 0;i++)u(this,z,"f").Parser.looksLikeNumber(n)&&Number.isSafeInteger(Math.floor(parseFloat(`${n}`)))&&(e[i]=Number(n));return t}[En](t){let e=t||"*";if(u(this,Qe,"f")[e])return u(this,Qe,"f")[e];let i={};try{let n=t||u(this,z,"f").mainFilename;!t&&u(this,z,"f").path.extname(n)&&(n=u(this,z,"f").path.dirname(n));let r=u(this,z,"f").findUp(n,(o,a)=>{if(a.includes("package.json"))return"package.json"});Ct(r,void 0,u(this,z,"f")),i=JSON.parse(u(this,z,"f").readFileSync(r,"utf8"))}catch{}return u(this,Qe,"f")[e]=i||{},u(this,Qe,"f")[e]}[Se](t,e){e=[].concat(e),e.forEach(i=>{i=this[vn](i),u(this,P,"f")[t].push(i)})}[Xe](t,e,i,n){this[On](t,e,i,n,(r,o,a)=>{u(this,P,"f")[r][o]=a})}[Cn](t,e,i,n){this[On](t,e,i,n,(r,o,a)=>{u(this,P,"f")[r][o]=(u(this,P,"f")[r][o]||[]).concat(a)})}[On](t,e,i,n,r){if(Array.isArray(i))i.forEach(o=>{t(o,n)});else if((o=>typeof o=="object")(i))for(let o of Ke(i))t(o,i[o]);else r(e,this[vn](i),n)}[vn](t){return t==="__proto__"?"___proto___":t}[An](t,e){return this[Xe](this[An].bind(this),"key",t,e),this}[_n](){var t,e,i,n,r,o,a,l,c,h,f,d;let p=u(this,ls,"f").pop();Ct(p,void 0,u(this,z,"f"));let x;t=this,e=this,i=this,n=this,r=this,o=this,a=this,l=this,c=this,h=this,f=this,d=this,{options:{set value(w){M(t,P,w,"f")}}.value,configObjects:x,exitProcess:{set value(w){M(e,Nt,w,"f")}}.value,groups:{set value(w){M(i,Xt,w,"f")}}.value,output:{set value(w){M(n,mt,w,"f")}}.value,exitError:{set value(w){M(r,be,w,"f")}}.value,hasOutput:{set value(w){M(o,Ft,w,"f")}}.value,parsed:this.parsed,strict:{set value(w){M(a,De,w,"f")}}.value,strictCommands:{set value(w){M(l,We,w,"f")}}.value,strictOptions:{set value(w){M(c,ze,w,"f")}}.value,completionCommand:{set value(w){M(h,$t,w,"f")}}.value,parseFn:{set value(w){M(f,Tt,w,"f")}}.value,parseContext:{set value(w){M(d,Pe,w,"f")}}.value}=p,u(this,P,"f").configObjects=x,u(this,U,"f").unfreeze(),u(this,rt,"f").unfreeze(),u(this,ct,"f").unfreeze(),u(this,Pt,"f").unfreeze()}[co](t,e){return Me(e,i=>(t(i),i))}getInternalMethods(){return{getCommandInstance:this[ho].bind(this),getContext:this[fo].bind(this),getHasOutput:this[uo].bind(this),getLoggerInstance:this[po].bind(this),getParseContext:this[mo].bind(this),getParserConfiguration:this[Be].bind(this),getUsageConfiguration:this[oo].bind(this),getUsageInstance:this[go].bind(this),getValidationInstance:this[wo].bind(this),hasParseCallback:this[ps].bind(this),isGlobalContext:this[bo].bind(this),postProcess:this[Ue].bind(this),reset:this[$n].bind(this),runValidation:this[Fn].bind(this),runYargsParserAndExecuteCommands:this[Oi].bind(this),setHasOutput:this[So].bind(this)}}[ho](){return u(this,ct,"f")}[fo](){return u(this,Ci,"f")}[uo](){return u(this,Ft,"f")}[po](){return u(this,Ze,"f")}[mo](){return u(this,Pe,"f")||{}}[go](){return u(this,U,"f")}[wo](){return u(this,rt,"f")}[ps](){return!!u(this,Tt,"f")}[bo](){return u(this,cs,"f")}[Ue](t,e,i,n){return i||X(t)||(e||(t=this[eo](t)),(this[Be]()["parse-positional-numbers"]||this[Be]()["parse-positional-numbers"]===void 0)&&(t=this[lo](t)),n&&(t=Re(t,this,u(this,Pt,"f").getMiddleware(),!1))),t}[$n](t={}){M(this,P,u(this,P,"f")||{},"f");let e={};e.local=u(this,P,"f").local||[],e.configObjects=u(this,P,"f").configObjects||[];let i={};e.local.forEach(o=>{i[o]=!0,(t[o]||[]).forEach(a=>{i[a]=!0})}),Object.assign(u(this,Le,"f"),Object.keys(u(this,Xt,"f")).reduce((o,a)=>{let l=u(this,Xt,"f")[a].filter(c=>!(c in i));return l.length>0&&(o[a]=l),o},{})),M(this,Xt,{},"f");let n=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],r=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return n.forEach(o=>{e[o]=(u(this,P,"f")[o]||[]).filter(a=>!i[a])}),r.forEach(o=>{e[o]=ge(u(this,P,"f")[o],a=>!i[a])}),e.envPrefix=u(this,P,"f").envPrefix,M(this,P,e,"f"),M(this,U,u(this,U,"f")?u(this,U,"f").reset(i):qr(this,u(this,z,"f")),"f"),M(this,rt,u(this,rt,"f")?u(this,rt,"f").reset(i):Xr(this,u(this,U,"f"),u(this,z,"f")),"f"),M(this,ct,u(this,ct,"f")?u(this,ct,"f").reset():kr(u(this,U,"f"),u(this,rt,"f"),u(this,Pt,"f"),u(this,z,"f")),"f"),u(this,It,"f")||M(this,It,Jr(this,u(this,U,"f"),u(this,ct,"f"),u(this,z,"f")),"f"),u(this,Pt,"f").reset(),M(this,$t,null,"f"),M(this,mt,"","f"),M(this,be,null,"f"),M(this,Ft,!1,"f"),this.parsed=!1,this}[yo](t,e){return u(this,z,"f").path.relative(t,e)}[Oi](t,e,i,n=0,r=!1){let o=!!i||r;t=t||u(this,ye,"f"),u(this,P,"f").__=u(this,z,"f").y18n.__,u(this,P,"f").configuration=this[Be]();let a=!!u(this,P,"f").configuration["populate--"],l=Object.assign({},u(this,P,"f").configuration,{"populate--":!0}),c=u(this,z,"f").Parser.detailed(t,Object.assign({},u(this,P,"f"),{configuration:{"parse-positional-numbers":!1,...l}})),h=Object.assign(c.argv,u(this,Pe,"f")),f,d=c.aliases,p=!1,x=!1;Object.keys(h).forEach(w=>{w===u(this,Lt,"f")&&h[w]?p=!0:w===u(this,te,"f")&&h[w]&&(x=!0)}),h.$0=this.$0,this.parsed=c,n===0&&u(this,U,"f").clearCachedHelpMessage();try{if(this[xn](),e)return this[Ue](h,a,!!i,!1);u(this,Lt,"f")&&[u(this,Lt,"f")].concat(d[u(this,Lt,"f")]||[]).filter(_=>_.length>1).includes(""+h._[h._.length-1])&&(h._.pop(),p=!0),M(this,cs,!1,"f");let w=u(this,ct,"f").getCommands(),m=u(this,It,"f").completionKey in h,E=p||m||r;if(h._.length){if(w.length){let v;for(let _=n||0,O;h._[_]!==void 0;_++)if(O=String(h._[_]),w.includes(O)&&O!==u(this,$t,"f")){let T=u(this,ct,"f").runCommand(O,this,c,_+1,r,p||x||r);return this[Ue](T,a,!!i,!1)}else if(!v&&O!==u(this,$t,"f")){v=O;break}!u(this,ct,"f").hasDefaultCommand()&&u(this,us,"f")&&v&&!E&&u(this,rt,"f").recommendCommands(v,w)}u(this,$t,"f")&&h._.includes(u(this,$t,"f"))&&!m&&(u(this,Nt,"f")&&we(!0),this.showCompletionScript(),this.exit(0))}if(u(this,ct,"f").hasDefaultCommand()&&!E){let v=u(this,ct,"f").runCommand(null,this,c,0,r,p||x||r);return this[Ue](v,a,!!i,!1)}if(m){u(this,Nt,"f")&&we(!0),t=[].concat(t);let v=t.slice(t.indexOf(`--${u(this,It,"f").completionKey}`)+1);return u(this,It,"f").getCompletion(v,(_,O)=>{if(_)throw new Q(_.message);(O||[]).forEach(T=>{u(this,Ze,"f").log(T)}),this.exit(0)}),this[Ue](h,!a,!!i,!1)}if(u(this,Ft,"f")||(p?(u(this,Nt,"f")&&we(!0),o=!0,this.showHelp("log"),this.exit(0)):x&&(u(this,Nt,"f")&&we(!0),o=!0,u(this,U,"f").showVersion("log"),this.exit(0))),!o&&u(this,P,"f").skipValidation.length>0&&(o=Object.keys(h).some(v=>u(this,P,"f").skipValidation.indexOf(v)>=0&&h[v]===!0)),!o){if(c.error)throw new Q(c.error.message);if(!m){let v=this[Fn](d,{},c.error);i||(f=Re(h,this,u(this,Pt,"f").getMiddleware(),!0)),f=this[co](v,f??h),X(f)&&!i&&(f=f.then(()=>Re(h,this,u(this,Pt,"f").getMiddleware(),!1)))}}}catch(w){if(w instanceof Q)u(this,U,"f").fail(w.message,w);else throw w}return this[Ue](f??h,a,!!i,!0)}[Fn](t,e,i,n){let r={...this.getDemandedOptions()};return o=>{if(i)throw new Q(i.message);u(this,rt,"f").nonOptionCount(o),u(this,rt,"f").requiredArguments(o,r);let a=!1;u(this,We,"f")&&(a=u(this,rt,"f").unknownCommands(o)),u(this,De,"f")&&!a?u(this,rt,"f").unknownArguments(o,t,e,!!n):u(this,ze,"f")&&u(this,rt,"f").unknownArguments(o,t,{},!1,!1),u(this,rt,"f").limitedChoices(o),u(this,rt,"f").implications(o),u(this,rt,"f").conflicting(o)}}[So](){M(this,Ft,!0,"f")}[Ge](t){if(typeof t=="string")u(this,P,"f").key[t]=!0;else for(let e of t)u(this,P,"f").key[e]=!0}};function Hr(s){return!!s&&typeof s.getInternalMethods=="function"}var sc=xo(dn),Eo=sc;var Nn=k(require("fs"),1),Io=k(require("path"),1);var Co=(s=0)=>t=>`\x1B[${t+s}m`,Oo=(s=0)=>t=>`\x1B[${38+s};5;${t}m`,vo=(s=0)=>(t,e,i)=>`\x1B[${38+s};2;${t};${e};${i}m`,et={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},Hu=Object.keys(et.modifier),nc=Object.keys(et.color),rc=Object.keys(et.bgColor),Yu=[...nc,...rc];function oc(){let s=new Map;for(let[t,e]of Object.entries(et)){for(let[i,n]of Object.entries(e))et[i]={open:`\x1B[${n[0]}m`,close:`\x1B[${n[1]}m`},e[i]=et[i],s.set(n[0],n[1]);Object.defineProperty(et,t,{value:e,enumerable:!1})}return Object.defineProperty(et,"codes",{value:s,enumerable:!1}),et.color.close="\x1B[39m",et.bgColor.close="\x1B[49m",et.color.ansi=Co(),et.color.ansi256=Oo(),et.color.ansi16m=vo(),et.bgColor.ansi=Co(10),et.bgColor.ansi256=Oo(10),et.bgColor.ansi16m=vo(10),Object.defineProperties(et,{rgbToAnsi256:{value(t,e,i){return t===e&&e===i?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(e/255*5)+Math.round(i/255*5)},enumerable:!1},hexToRgb:{value(t){let e=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!e)return[0,0,0];let[i]=e;i.length===3&&(i=[...i].map(r=>r+r).join(""));let n=Number.parseInt(i,16);return[n>>16&255,n>>8&255,n&255]},enumerable:!1},hexToAnsi256:{value:t=>et.rgbToAnsi256(...et.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value(t){if(t<8)return 30+t;if(t<16)return 90+(t-8);let e,i,n;if(t>=232)e=((t-232)*10+8)/255,i=e,n=e;else{t-=16;let a=t%36;e=Math.floor(t/36)/5,i=Math.floor(a/6)/5,n=a%6/5}let r=Math.max(e,i,n)*2;if(r===0)return 30;let o=30+(Math.round(n)<<2|Math.round(i)<<1|Math.round(e));return r===2&&(o+=60),o},enumerable:!1},rgbToAnsi:{value:(t,e,i)=>et.ansi256ToAnsi(et.rgbToAnsi256(t,e,i)),enumerable:!1},hexToAnsi:{value:t=>et.ansi256ToAnsi(et.hexToAnsi256(t)),enumerable:!1}}),et}var ac=oc(),qt=ac;var gs=k(require("node:process"),1),_o=k(require("node:os"),1),jn=k(require("node:tty"),1);function Dt(s,t=globalThis.Deno?globalThis.Deno.args:gs.default.argv){let e=s.startsWith("-")?"":s.length===1?"-":"--",i=t.indexOf(e+s),n=t.indexOf("--");return i!==-1&&(n===-1||i<n)}var{env:ot}=gs.default,ms;Dt("no-color")||Dt("no-colors")||Dt("color=false")||Dt("color=never")?ms=0:(Dt("color")||Dt("colors")||Dt("color=true")||Dt("color=always"))&&(ms=1);function lc(){if("FORCE_COLOR"in ot)return ot.FORCE_COLOR==="true"?1:ot.FORCE_COLOR==="false"?0:ot.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(ot.FORCE_COLOR,10),3)}function cc(s){return s===0?!1:{level:s,hasBasic:!0,has256:s>=2,has16m:s>=3}}function hc(s,{streamIsTTY:t,sniffFlags:e=!0}={}){let i=lc();i!==void 0&&(ms=i);let n=e?ms:i;if(n===0)return 0;if(e){if(Dt("color=16m")||Dt("color=full")||Dt("color=truecolor"))return 3;if(Dt("color=256"))return 2}if("TF_BUILD"in ot&&"AGENT_NAME"in ot)return 1;if(s&&!t&&n===void 0)return 0;let r=n||0;if(ot.TERM==="dumb")return r;if(gs.default.platform==="win32"){let o=_o.default.release().split(".");return Number(o[0])>=10&&Number(o[2])>=10586?Number(o[2])>=14931?3:2:1}if("CI"in ot)return["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some(o=>o in ot)?3:["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(o=>o in ot)||ot.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in ot)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ot.TEAMCITY_VERSION)?1:0;if(ot.COLORTERM==="truecolor"||ot.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in ot){let o=Number.parseInt((ot.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ot.TERM_PROGRAM){case"iTerm.app":return o>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ot.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ot.TERM)||"COLORTERM"in ot?1:r}function Ao(s,t={}){let e=hc(s,{streamIsTTY:s&&s.isTTY,...t});return cc(e)}var fc={stdout:Ao({isTTY:jn.default.isatty(1)}),stderr:Ao({isTTY:jn.default.isatty(2)})},$o=fc;function Fo(s,t,e){let i=s.indexOf(t);if(i===-1)return s;let n=t.length,r=0,o="";do o+=s.slice(r,i)+t+e,r=i+n,i=s.indexOf(t,r);while(i!==-1);return o+=s.slice(r),o}function To(s,t,e,i){let n=0,r="";do{let o=s[i-1]==="\r";r+=s.slice(n,o?i-1:i)+t+(o?`\r
`:`
`)+e,n=i+1,i=s.indexOf(`
`,n)}while(i!==-1);return r+=s.slice(n),r}var{stdout:jo,stderr:Ro}=$o,Rn=Symbol("GENERATOR"),ti=Symbol("STYLER"),vi=Symbol("IS_EMPTY"),Mo=["ansi","ansi","ansi256","ansi16m"],ei=Object.create(null),uc=(s,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let e=jo?jo.level:0;s.level=t.level===void 0?e:t.level};var dc=s=>{let t=(...e)=>e.join(" ");return uc(t,s),Object.setPrototypeOf(t,Ai.prototype),t};function Ai(s){return dc(s)}Object.setPrototypeOf(Ai.prototype,Function.prototype);for(let[s,t]of Object.entries(qt))ei[s]={get(){let e=ws(this,In(t.open,t.close,this[ti]),this[vi]);return Object.defineProperty(this,s,{value:e}),e}};ei.visible={get(){let s=ws(this,this[ti],!0);return Object.defineProperty(this,"visible",{value:s}),s}};var Mn=(s,t,e,...i)=>s==="rgb"?t==="ansi16m"?qt[e].ansi16m(...i):t==="ansi256"?qt[e].ansi256(qt.rgbToAnsi256(...i)):qt[e].ansi(qt.rgbToAnsi(...i)):s==="hex"?Mn("rgb",t,e,...qt.hexToRgb(...i)):qt[e][s](...i),pc=["rgb","hex","ansi256"];for(let s of pc){ei[s]={get(){let{level:e}=this;return function(...i){let n=In(Mn(s,Mo[e],"color",...i),qt.color.close,this[ti]);return ws(this,n,this[vi])}}};let t="bg"+s[0].toUpperCase()+s.slice(1);ei[t]={get(){let{level:e}=this;return function(...i){let n=In(Mn(s,Mo[e],"bgColor",...i),qt.bgColor.close,this[ti]);return ws(this,n,this[vi])}}}}var mc=Object.defineProperties(()=>{},{...ei,level:{enumerable:!0,get(){return this[Rn].level},set(s){this[Rn].level=s}}}),In=(s,t,e)=>{let i,n;return e===void 0?(i=s,n=t):(i=e.openAll+s,n=t+e.closeAll),{open:s,close:t,openAll:i,closeAll:n,parent:e}},ws=(s,t,e)=>{let i=(...n)=>gc(i,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(i,mc),i[Rn]=s,i[ti]=t,i[vi]=e,i},gc=(s,t)=>{if(s.level<=0||!t)return s[vi]?"":t;let e=s[ti];if(e===void 0)return t;let{openAll:i,closeAll:n}=e;if(t.includes("\x1B"))for(;e!==void 0;)t=Fo(t,e.close,e.open),e=e.parent;let r=t.indexOf(`
`);return r!==-1&&(t=To(t,n,i,r)),i+t+n};Object.defineProperties(Ai.prototype,ei);var wc=Ai(),Xu=Ai({level:Ro?Ro.level:0});var Z=wc;var S={info:s=>console.log(Z.blue(s)),success:s=>console.log(Z.green(s)),error:s=>console.error(Z.red(s)),debug:s=>console.log(Z.gray(s)),warn:s=>console.log(Z.yellow(s))};function No(){try{let s=Io.default.resolve(process.cwd(),".env");if(!Nn.default.existsSync(s))return;let t=Nn.default.readFileSync(s,"utf-8"),e={};return t.split(`
`).forEach(i=>{if(i=i.trim(),!i||i.startsWith("#"))return;let[n,...r]=i.split("="),o=r.join("=").trim();if(!n||!o)return;let a=o.replace(/^["']|["']$/g,"");process.env[n.trim()]=a,e[n.trim()]=a}),e}catch(s){S.debug(`Error loading .env file: ${s.message}`)}}function Wt(){if(S.debug("Checking for GITHUB_TOKEN..."),!process.env.GITHUB_TOKEN)throw new Error("GITHUB_TOKEN is not set in .env file");if(process.env.GITHUB_TOKEN==="your_github_token_here")throw new Error("GITHUB_TOKEN is still set to the default value. Please update it in .env file");S.debug("GITHUB_TOKEN validation passed")}var Po=k(require("fs"),1);function bs(s,t={checkExists:!1}){if(!s)throw new Error("Repository path is required");let[e,i]=s.split("/");if(!e||!i)throw new Error("Invalid repository format. Use owner/repo");if(t.checkExists&&Po.default.existsSync(i))throw new Error(`Directory ${i} already exists`);return{owner:e,repo:i}}async function ee(s,t={}){let e=`${le}${s}`,i=await fetch(e,{headers:{Authorization:`token ${process.env.GITHUB_TOKEN}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},...t});if(!i.ok){let n=await i.text();throw S.error(`GitHub API Error: ${i.status} ${i.statusText}`),S.debug(`Response: ${n}`),i.status===404?new Error("Repository or path not found"):i.status===401?new Error("Invalid GitHub token or missing permissions"):i.status===403?new Error("API rate limit exceeded or insufficient permissions"):new Error(`GitHub API error: ${i.status} ${i.statusText}`)}return i.json()}async function Pn(s,t,e,i){S.debug(`Creating commit in ${s}/${t}...`);try{let r=(await ee(`/repos/${s}/${t}`)).default_branch;S.debug(`Default branch: ${r}`);let o=await ee(`/repos/${s}/${t}/git/ref/heads/${r}`);S.debug(`Current ref: ${o.object.sha}`);let a=await ee(`/repos/${s}/${t}/git/commits/${o.object.sha}`);S.debug(`Parent commit: ${a.sha}`);let l=await ee(`/repos/${s}/${t}/git/trees`,{method:"POST",body:JSON.stringify({base_tree:a.tree.sha,tree:i})});S.debug(`Created tree: ${l.sha}`);let c=await ee(`/repos/${s}/${t}/git/commits`,{method:"POST",body:JSON.stringify({message:e,tree:l.sha,parents:[a.sha]})});return S.debug(`Created commit: ${c.sha}`),await ee(`/repos/${s}/${t}/git/refs/heads/${r}`,{method:"PATCH",body:JSON.stringify({sha:c.sha})}),S.debug("Updated ref to new commit"),c}catch(n){throw S.error(`Failed to create commit: ${n.message}`),n}}var bc=3,yc=1e3;async function ke(s,t={},e=bc){try{let i=await fetch(s,{...t,headers:{Authorization:`token ${process.env.GITHUB_TOKEN}`,Accept:"application/vnd.github.v3+json","User-Agent":"GitHub-CLI",...t.headers}});if(!i.ok){let n=await i.text();throw new Error(`HTTP ${i.status}: ${n}`)}return i.json()}catch(i){if(e>0&&(i.message.includes("ECONNRESET")||i.message.includes("timeout")))return S.debug(`Retrying request to ${s}, ${e} attempts remaining`),await new Promise(n=>setTimeout(n,yc)),ke(s,t,e-1);throw i}}async function Ln(s,t,e=""){S.debug(`Downloading contents for ${s}/${t}/${e}...`);try{let i=await ke(`${le}/repos/${s}/${t}/contents/${e}`);if(!Array.isArray(i))return i.content&&(i.content=Buffer.from(i.content,"base64").toString("utf-8")),[i];let n=i.map(async r=>{if(r.type==="file"&&r.download_url){let o=await ke(r.url);o.content&&(r.content=Buffer.from(o.content,"base64").toString("utf-8"))}return r});return Promise.all(n)}catch(i){throw S.error(`Failed to download contents: ${i.message}`),i}}var le="https://api.github.com";async function xe(s,t){return S.debug(`Fetching repository info for ${s}/${t}...`),ee(`/repos/${s}/${t}`)}async function _i(s,t,e="",i=""){S.debug(`Fetching contents for ${s}/${t}/${e}...`);let n=i?`?ref=${i}`:"";return ee(`/repos/${s}/${t}/contents/${e}${n}`)}var Ss=k(require("fs"),1);var Lo=k(require("path"),1),Dn="_git";function $i(...s){return Lo.default.join(Dn,...s)}function Fi(){return $i("config.json")}function ys(){return $i("snapshot.json")}function Ot(){try{let s=Fi();return Ss.default.existsSync(s)?JSON.parse(Ss.default.readFileSync(s,"utf-8")):{}}catch(s){return S.error(`Failed to read config: ${s.message}`),{}}}function Vt(s){try{let t=Fi();Ss.default.writeFileSync(t,JSON.stringify(s,null,2)),S.debug("Config updated successfully")}catch(t){throw new Error(`Failed to write config: ${t.message}`)}}function Wn(s){let e={...Ot(),...s};return Vt(e),e}async function xs(s,t,e="main"){let i=`${le}/repos/${s}/${t}/commits/${e}`;return(await ke(i)).sha}function Do(){return Ot().lastCommit||null}async function Wo(s,t,e,i){let n=`${le}/repos/${s}/${t}/compare/${e}...${i}`;return ke(n)}var Yi=k(require("fs"),1),or=k(require("path"),1);var oa=k(Qo(),1);var ji=s=>{if(typeof s!="string")throw new TypeError("invalid pattern");if(s.length>65536)throw new TypeError("pattern is too long")};var _c={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Ri=s=>s.replace(/[[\]\\-]/g,"\\$&"),$c=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Xo=s=>s.join(""),ta=(s,t)=>{let e=t;if(s.charAt(e)!=="[")throw new Error("not in a brace expression");let i=[],n=[],r=e+1,o=!1,a=!1,l=!1,c=!1,h=e,f="";t:for(;r<s.length;){let w=s.charAt(r);if((w==="!"||w==="^")&&r===e+1){c=!0,r++;continue}if(w==="]"&&o&&!l){h=r+1;break}if(o=!0,w==="\\"&&!l){l=!0,r++;continue}if(w==="["&&!l){for(let[m,[E,v,_]]of Object.entries(_c))if(s.startsWith(m,r)){if(f)return["$.",!1,s.length-e,!0];r+=m.length,_?n.push(E):i.push(E),a=a||v;continue t}}if(l=!1,f){w>f?i.push(Ri(f)+"-"+Ri(w)):w===f&&i.push(Ri(w)),f="",r++;continue}if(s.startsWith("-]",r+1)){i.push(Ri(w+"-")),r+=2;continue}if(s.startsWith("-",r+1)){f=w,r+=2;continue}i.push(Ri(w)),r++}if(h<r)return["",!1,0,!1];if(!i.length&&!n.length)return["$.",!1,s.length-e,!0];if(n.length===0&&i.length===1&&/^\\?.$/.test(i[0])&&!c){let w=i[0].length===2?i[0].slice(-1):i[0];return[$c(w),!1,h-e,!1]}let d="["+(c?"^":"")+Xo(i)+"]",p="["+(c?"":"^")+Xo(n)+"]";return[i.length&&n.length?"("+d+"|"+p+")":i.length?d:p,a,h-e,!0]};var Kt=(s,{windowsPathsNoEscape:t=!1}={})=>t?s.replace(/\[([^\/\\])\]/g,"$1"):s.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var Fc=new Set(["!","?","+","*","@"]),ea=s=>Fc.has(s),Tc="(?!(?:^|/)\\.\\.?(?:$|/))",Es="(?!\\.)",jc=new Set(["[","."]),Rc=new Set(["..","."]),Mc=new Set("().*{}+?[]^$\\!"),Ic=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Un="[^/]",ia=Un+"*?",sa=Un+"+?",ii=class s{type;#t;#e;#r=!1;#s=[];#o;#S;#c;#f=!1;#a;#l;#n=!1;constructor(t,e,i={}){this.type=t,t&&(this.#e=!0),this.#o=e,this.#t=this.#o?this.#o.#t:this,this.#a=this.#t===this?i:this.#t.#a,this.#c=this.#t===this?[]:this.#t.#c,t==="!"&&!this.#t.#f&&this.#c.push(this),this.#S=this.#o?this.#o.#s.length:0}get hasMagic(){if(this.#e!==void 0)return this.#e;for(let t of this.#s)if(typeof t!="string"&&(t.type||t.hasMagic))return this.#e=!0;return this.#e}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#s.map(t=>String(t)).join("|")+")":this.#l=this.#s.map(t=>String(t)).join("")}#g(){if(this!==this.#t)throw new Error("should only call on root");if(this.#f)return this;this.toString(),this.#f=!0;let t;for(;t=this.#c.pop();){if(t.type!=="!")continue;let e=t,i=e.#o;for(;i;){for(let n=e.#S+1;!i.type&&n<i.#s.length;n++)for(let r of t.#s){if(typeof r=="string")throw new Error("string part in extglob AST??");r.copyIn(i.#s[n])}e=i,i=e.#o}}return this}push(...t){for(let e of t)if(e!==""){if(typeof e!="string"&&!(e instanceof s&&e.#o===this))throw new Error("invalid part: "+e);this.#s.push(e)}}toJSON(){var e;let t=this.type===null?this.#s.slice().map(i=>typeof i=="string"?i:i.toJSON()):[this.type,...this.#s.map(i=>i.toJSON())];return this.isStart()&&!this.type&&t.unshift([]),this.isEnd()&&(this===this.#t||this.#t.#f&&((e=this.#o)==null?void 0:e.type)==="!")&&t.push({}),t}isStart(){var e;if(this.#t===this)return!0;if(!((e=this.#o)!=null&&e.isStart()))return!1;if(this.#S===0)return!0;let t=this.#o;for(let i=0;i<this.#S;i++){let n=t.#s[i];if(!(n instanceof s&&n.type==="!"))return!1}return!0}isEnd(){var e,i,n;if(this.#t===this||((e=this.#o)==null?void 0:e.type)==="!")return!0;if(!((i=this.#o)!=null&&i.isEnd()))return!1;if(!this.type)return(n=this.#o)==null?void 0:n.isEnd();let t=this.#o?this.#o.#s.length:0;return this.#S===t-1}copyIn(t){typeof t=="string"?this.push(t):this.push(t.clone(this))}clone(t){let e=new s(this.type,t);for(let i of this.#s)e.copyIn(i);return e}static#w(t,e,i,n){let r=!1,o=!1,a=-1,l=!1;if(e.type===null){let p=i,x="";for(;p<t.length;){let w=t.charAt(p++);if(r||w==="\\"){r=!r,x+=w;continue}if(o){p===a+1?(w==="^"||w==="!")&&(l=!0):w==="]"&&!(p===a+2&&l)&&(o=!1),x+=w;continue}else if(w==="["){o=!0,a=p,l=!1,x+=w;continue}if(!n.noext&&ea(w)&&t.charAt(p)==="("){e.push(x),x="";let m=new s(w,e);p=s.#w(t,m,p,n),e.push(m);continue}x+=w}return e.push(x),p}let c=i+1,h=new s(null,e),f=[],d="";for(;c<t.length;){let p=t.charAt(c++);if(r||p==="\\"){r=!r,d+=p;continue}if(o){c===a+1?(p==="^"||p==="!")&&(l=!0):p==="]"&&!(c===a+2&&l)&&(o=!1),d+=p;continue}else if(p==="["){o=!0,a=c,l=!1,d+=p;continue}if(ea(p)&&t.charAt(c)==="("){h.push(d),d="";let x=new s(p,h);h.push(x),c=s.#w(t,x,c,n);continue}if(p==="|"){h.push(d),d="",f.push(h),h=new s(null,e);continue}if(p===")")return d===""&&e.#s.length===0&&(e.#n=!0),h.push(d),d="",e.push(...f,h),c;d+=p}return e.type=null,e.#e=void 0,e.#s=[t.substring(i-1)],c}static fromGlob(t,e={}){let i=new s(null,void 0,e);return s.#w(t,i,0,e),i}toMMPattern(){if(this!==this.#t)return this.#t.toMMPattern();let t=this.toString(),[e,i,n,r]=this.toRegExpSource();if(!(n||this.#e||this.#a.nocase&&!this.#a.nocaseMagicOnly&&t.toUpperCase()!==t.toLowerCase()))return i;let a=(this.#a.nocase?"i":"")+(r?"u":"");return Object.assign(new RegExp(`^${e}$`,a),{_src:e,_glob:t})}get options(){return this.#a}toRegExpSource(t){var l;let e=t??!!this.#a.dot;if(this.#t===this&&this.#g(),!this.type){let c=this.isStart()&&this.isEnd(),h=this.#s.map(x=>{let[w,m,E,v]=typeof x=="string"?s.#u(x,this.#e,c):x.toRegExpSource(t);return this.#e=this.#e||E,this.#r=this.#r||v,w}).join(""),f="";if(this.isStart()&&typeof this.#s[0]=="string"&&!(this.#s.length===1&&Rc.has(this.#s[0]))){let w=jc,m=e&&w.has(h.charAt(0))||h.startsWith("\\.")&&w.has(h.charAt(2))||h.startsWith("\\.\\.")&&w.has(h.charAt(4)),E=!e&&!t&&w.has(h.charAt(0));f=m?Tc:E?Es:""}let d="";return this.isEnd()&&this.#t.#f&&((l=this.#o)==null?void 0:l.type)==="!"&&(d="(?:$|\\/)"),[f+h+d,Kt(h),this.#e=!!this.#e,this.#r]}let i=this.type==="*"||this.type==="+",n=this.type==="!"?"(?:(?!(?:":"(?:",r=this.#d(e);if(this.isStart()&&this.isEnd()&&!r&&this.type!=="!"){let c=this.toString();return this.#s=[c],this.type=null,this.#e=void 0,[c,Kt(this.toString()),!1,!1]}let o=!i||t||e||!Es?"":this.#d(!0);o===r&&(o=""),o&&(r=`(?:${r})(?:${o})*?`);let a="";if(this.type==="!"&&this.#n)a=(this.isStart()&&!e?Es:"")+sa;else{let c=this.type==="!"?"))"+(this.isStart()&&!e&&!t?Es:"")+ia+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=n+r+c}return[a,Kt(r),this.#e=!!this.#e,this.#r]}#d(t){return this.#s.map(e=>{if(typeof e=="string")throw new Error("string type in extglob ast??");let[i,n,r,o]=e.toRegExpSource(t);return this.#r=this.#r||o,i}).filter(e=>!(this.isStart()&&this.isEnd())||!!e).join("|")}static#u(t,e,i=!1){let n=!1,r="",o=!1;for(let a=0;a<t.length;a++){let l=t.charAt(a);if(n){n=!1,r+=(Mc.has(l)?"\\":"")+l;continue}if(l==="\\"){a===t.length-1?r+="\\\\":n=!0;continue}if(l==="["){let[c,h,f,d]=ta(t,a);if(f){r+=c,o=o||h,a+=f-1,e=e||d;continue}}if(l==="*"){i&&t==="*"?r+=sa:r+=ia,e=!0;continue}if(l==="?"){r+=Un,e=!0;continue}r+=Ic(l)}return[r,Kt(t),!!e,o]}};var si=(s,{windowsPathsNoEscape:t=!1}={})=>t?s.replace(/[?*()[\]]/g,"[$&]"):s.replace(/[?*()[\]\\]/g,"\\$&");var dt=(s,t,e={})=>(ji(t),!e.nocomment&&t.charAt(0)==="#"?!1:new jt(t,e).match(s)),Nc=/^\*+([^+@!?\*\[\(]*)$/,Pc=s=>t=>!t.startsWith(".")&&t.endsWith(s),Lc=s=>t=>t.endsWith(s),Dc=s=>(s=s.toLowerCase(),t=>!t.startsWith(".")&&t.toLowerCase().endsWith(s)),Wc=s=>(s=s.toLowerCase(),t=>t.toLowerCase().endsWith(s)),zc=/^\*+\.\*+$/,Bc=s=>!s.startsWith(".")&&s.includes("."),Uc=s=>s!=="."&&s!==".."&&s.includes("."),Gc=/^\.\*+$/,kc=s=>s!=="."&&s!==".."&&s.startsWith("."),Hc=/^\*+$/,Yc=s=>s.length!==0&&!s.startsWith("."),qc=s=>s.length!==0&&s!=="."&&s!=="..",Vc=/^\?+([^+@!?\*\[\(]*)?$/,Kc=([s,t=""])=>{let e=aa([s]);return t?(t=t.toLowerCase(),i=>e(i)&&i.toLowerCase().endsWith(t)):e},Jc=([s,t=""])=>{let e=la([s]);return t?(t=t.toLowerCase(),i=>e(i)&&i.toLowerCase().endsWith(t)):e},Zc=([s,t=""])=>{let e=la([s]);return t?i=>e(i)&&i.endsWith(t):e},Qc=([s,t=""])=>{let e=aa([s]);return t?i=>e(i)&&i.endsWith(t):e},aa=([s])=>{let t=s.length;return e=>e.length===t&&!e.startsWith(".")},la=([s])=>{let t=s.length;return e=>e.length===t&&e!=="."&&e!==".."},ca=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",na={win32:{sep:"\\"},posix:{sep:"/"}},Xc=ca==="win32"?na.win32.sep:na.posix.sep;dt.sep=Xc;var yt=Symbol("globstar **");dt.GLOBSTAR=yt;var th="[^/]",eh=th+"*?",ih="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",sh="(?:(?!(?:\\/|^)\\.).)*?",nh=(s,t={})=>e=>dt(e,s,t);dt.filter=nh;var zt=(s,t={})=>Object.assign({},s,t),rh=s=>{if(!s||typeof s!="object"||!Object.keys(s).length)return dt;let t=dt;return Object.assign((i,n,r={})=>t(i,n,zt(s,r)),{Minimatch:class extends t.Minimatch{constructor(n,r={}){super(n,zt(s,r))}static defaults(n){return t.defaults(zt(s,n)).Minimatch}},AST:class extends t.AST{constructor(n,r,o={}){super(n,r,zt(s,o))}static fromGlob(n,r={}){return t.AST.fromGlob(n,zt(s,r))}},unescape:(i,n={})=>t.unescape(i,zt(s,n)),escape:(i,n={})=>t.escape(i,zt(s,n)),filter:(i,n={})=>t.filter(i,zt(s,n)),defaults:i=>t.defaults(zt(s,i)),makeRe:(i,n={})=>t.makeRe(i,zt(s,n)),braceExpand:(i,n={})=>t.braceExpand(i,zt(s,n)),match:(i,n,r={})=>t.match(i,n,zt(s,r)),sep:t.sep,GLOBSTAR:yt})};dt.defaults=rh;var ha=(s,t={})=>(ji(s),t.nobrace||!/\{(?:(?!\{).)*\}/.test(s)?[s]:(0,oa.default)(s));dt.braceExpand=ha;var oh=(s,t={})=>new jt(s,t).makeRe();dt.makeRe=oh;var ah=(s,t,e={})=>{let i=new jt(t,e);return s=s.filter(n=>i.match(n)),i.options.nonull&&!s.length&&s.push(t),s};dt.match=ah;var ra=/[?*]|[+@!]\(.*?\)|\[|\]/,lh=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),jt=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(t,e={}){ji(t),e=e||{},this.options=e,this.pattern=t,this.platform=e.platform||ca,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!e.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!e.nonegate,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=e.windowsNoMagicRoot!==void 0?e.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let t of this.set)for(let e of t)if(typeof e!="string")return!0;return!1}debug(...t){}make(){let t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],e.debug&&(this.debug=(...r)=>console.error(...r)),this.debug(this.pattern,this.globSet);let i=this.globSet.map(r=>this.slashSplit(r));this.globParts=this.preprocess(i),this.debug(this.pattern,this.globParts);let n=this.globParts.map((r,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=r[0]===""&&r[1]===""&&(r[2]==="?"||!ra.test(r[2]))&&!ra.test(r[3]),c=/^[a-z]:/i.test(r[0]);if(l)return[...r.slice(0,4),...r.slice(4).map(h=>this.parse(h))];if(c)return[r[0],...r.slice(1).map(h=>this.parse(h))]}return r.map(l=>this.parse(l))});if(this.debug(this.pattern,n),this.set=n.filter(r=>r.indexOf(!1)===-1),this.isWindows)for(let r=0;r<this.set.length;r++){let o=this.set[r];o[0]===""&&o[1]===""&&this.globParts[r][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let i=0;i<t.length;i++)for(let n=0;n<t[i].length;n++)t[i][n]==="**"&&(t[i][n]="*");let{optimizationLevel:e=1}=this.options;return e>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):e>=1?t=this.levelOneOptimize(t):t=this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map(e=>{let i=-1;for(;(i=e.indexOf("**",i+1))!==-1;){let n=i;for(;e[n+1]==="**";)n++;n!==i&&e.splice(i,n-i)}return e})}levelOneOptimize(t){return t.map(e=>(e=e.reduce((i,n)=>{let r=i[i.length-1];return n==="**"&&r==="**"?i:n===".."&&r&&r!==".."&&r!=="."&&r!=="**"?(i.pop(),i):(i.push(n),i)},[]),e.length===0?[""]:e))}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let e=!1;do{if(e=!1,!this.preserveMultipleSlashes){for(let n=1;n<t.length-1;n++){let r=t[n];n===1&&r===""&&t[0]===""||(r==="."||r==="")&&(e=!0,t.splice(n,1),n--)}t[0]==="."&&t.length===2&&(t[1]==="."||t[1]==="")&&(e=!0,t.pop())}let i=0;for(;(i=t.indexOf("..",i+1))!==-1;){let n=t[i-1];n&&n!=="."&&n!==".."&&n!=="**"&&(e=!0,t.splice(i-1,2),i-=2)}}while(e);return t.length===0?[""]:t}firstPhasePreProcess(t){let e=!1;do{e=!1;for(let i of t){let n=-1;for(;(n=i.indexOf("**",n+1))!==-1;){let o=n;for(;i[o+1]==="**";)o++;o>n&&i.splice(n+1,o-n);let a=i[n+1],l=i[n+2],c=i[n+3];if(a!==".."||!l||l==="."||l===".."||!c||c==="."||c==="..")continue;e=!0,i.splice(n,1);let h=i.slice(0);h[n]="**",t.push(h),n--}if(!this.preserveMultipleSlashes){for(let o=1;o<i.length-1;o++){let a=i[o];o===1&&a===""&&i[0]===""||(a==="."||a==="")&&(e=!0,i.splice(o,1),o--)}i[0]==="."&&i.length===2&&(i[1]==="."||i[1]==="")&&(e=!0,i.pop())}let r=0;for(;(r=i.indexOf("..",r+1))!==-1;){let o=i[r-1];if(o&&o!=="."&&o!==".."&&o!=="**"){e=!0;let l=r===1&&i[r+1]==="**"?["."]:[];i.splice(r-1,2,...l),i.length===0&&i.push(""),r-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++)for(let i=e+1;i<t.length;i++){let n=this.partsMatch(t[e],t[i],!this.preserveMultipleSlashes);if(n){t[e]=[],t[i]=n;break}}return t.filter(e=>e.length)}partsMatch(t,e,i=!1){let n=0,r=0,o=[],a="";for(;n<t.length&&r<e.length;)if(t[n]===e[r])o.push(a==="b"?e[r]:t[n]),n++,r++;else if(i&&t[n]==="**"&&e[r]===t[n+1])o.push(t[n]),n++;else if(i&&e[r]==="**"&&t[n]===e[r+1])o.push(e[r]),r++;else if(t[n]==="*"&&e[r]&&(this.options.dot||!e[r].startsWith("."))&&e[r]!=="**"){if(a==="b")return!1;a="a",o.push(t[n]),n++,r++}else if(e[r]==="*"&&t[n]&&(this.options.dot||!t[n].startsWith("."))&&t[n]!=="**"){if(a==="a")return!1;a="b",o.push(e[r]),n++,r++}else return!1;return t.length===e.length&&o}parseNegate(){if(this.nonegate)return;let t=this.pattern,e=!1,i=0;for(let n=0;n<t.length&&t.charAt(n)==="!";n++)e=!e,i++;i&&(this.pattern=t.slice(i)),this.negate=e}matchOne(t,e,i=!1){let n=this.options;if(this.isWindows){let w=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),m=!w&&t[0]===""&&t[1]===""&&t[2]==="?"&&/^[a-z]:$/i.test(t[3]),E=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),v=!E&&e[0]===""&&e[1]===""&&e[2]==="?"&&typeof e[3]=="string"&&/^[a-z]:$/i.test(e[3]),_=m?3:w?0:void 0,O=v?3:E?0:void 0;if(typeof _=="number"&&typeof O=="number"){let[T,H]=[t[_],e[O]];T.toLowerCase()===H.toLowerCase()&&(e[O]=T,O>_?e=e.slice(O):_>O&&(t=t.slice(_)))}}let{optimizationLevel:r=1}=this.options;r>=2&&(t=this.levelTwoFileOptimize(t)),this.debug("matchOne",this,{file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var o=0,a=0,l=t.length,c=e.length;o<l&&a<c;o++,a++){this.debug("matchOne loop");var h=e[a],f=t[o];if(this.debug(e,h,f),h===!1)return!1;if(h===yt){this.debug("GLOBSTAR",[e,h,f]);var d=o,p=a+1;if(p===c){for(this.debug("** at the end");o<l;o++)if(t[o]==="."||t[o]===".."||!n.dot&&t[o].charAt(0)===".")return!1;return!0}for(;d<l;){var x=t[d];if(this.debug(`
globstar while`,t,d,e,p,x),this.matchOne(t.slice(d),e.slice(p),i))return this.debug("globstar found match!",d,l,x),!0;if(x==="."||x===".."||!n.dot&&x.charAt(0)==="."){this.debug("dot detected!",t,d,e,p);break}this.debug("globstar swallow a segment, and continue"),d++}return!!(i&&(this.debug(`
>>> no match, partial?`,t,d,e,p),d===l))}let w;if(typeof h=="string"?(w=f===h,this.debug("string match",h,f,w)):(w=h.test(f),this.debug("pattern match",h,f,w)),!w)return!1}if(o===l&&a===c)return!0;if(o===l)return i;if(a===c)return o===l-1&&t[o]==="";throw new Error("wtf?")}braceExpand(){return ha(this.pattern,this.options)}parse(t){ji(t);let e=this.options;if(t==="**")return yt;if(t==="")return"";let i,n=null;(i=t.match(Hc))?n=e.dot?qc:Yc:(i=t.match(Nc))?n=(e.nocase?e.dot?Wc:Dc:e.dot?Lc:Pc)(i[1]):(i=t.match(Vc))?n=(e.nocase?e.dot?Jc:Kc:e.dot?Zc:Qc)(i):(i=t.match(zc))?n=e.dot?Uc:Bc:(i=t.match(Gc))&&(n=kc);let r=ii.fromGlob(t,this.options).toMMPattern();return n&&typeof r=="object"&&Reflect.defineProperty(r,"test",{value:n}),r}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let t=this.set;if(!t.length)return this.regexp=!1,this.regexp;let e=this.options,i=e.noglobstar?eh:e.dot?ih:sh,n=new Set(e.nocase?["i"]:[]),r=t.map(l=>{let c=l.map(h=>{if(h instanceof RegExp)for(let f of h.flags.split(""))n.add(f);return typeof h=="string"?lh(h):h===yt?yt:h._src});return c.forEach((h,f)=>{let d=c[f+1],p=c[f-1];h!==yt||p===yt||(p===void 0?d!==void 0&&d!==yt?c[f+1]="(?:\\/|"+i+"\\/)?"+d:c[f]=i:d===void 0?c[f-1]=p+"(?:\\/|"+i+")?":d!==yt&&(c[f-1]=p+"(?:\\/|\\/"+i+"\\/)"+d,c[f+1]=yt))}),c.filter(h=>h!==yt).join("/")}).join("|"),[o,a]=t.length>1?["(?:",")"]:["",""];r="^"+o+r+a+"$",this.negate&&(r="^(?!"+r+").+$");try{this.regexp=new RegExp(r,[...n].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(t)?["",...t.split(/\/+/)]:t.split(/\/+/)}match(t,e=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&e)return!0;let i=this.options;this.isWindows&&(t=t.split("\\").join("/"));let n=this.slashSplit(t);this.debug(this.pattern,"split",n);let r=this.set;this.debug(this.pattern,"set",r);let o=n[n.length-1];if(!o)for(let a=n.length-2;!o&&a>=0;a--)o=n[a];for(let a=0;a<r.length;a++){let l=r[a],c=n;if(i.matchBase&&l.length===1&&(c=[o]),this.matchOne(c,l,e))return i.flipNegate?!0:!this.negate}return i.flipNegate?!1:this.negate}static defaults(t){return dt.defaults(t).Minimatch}};dt.AST=ii;dt.Minimatch=jt;dt.escape=si;dt.unescape=Kt;var Na=require("node:url");var ni=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,da=new Set,Gn=typeof process=="object"&&process?process:{},pa=(s,t,e,i)=>{typeof Gn.emitWarning=="function"?Gn.emitWarning(s,t,e,i):console.error(`[${e}] ${t}: ${s}`)},Cs=globalThis.AbortController,fa=globalThis.AbortSignal,ua;if(typeof Cs>"u"){fa=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(i,n){this._onabort.push(n)}},Cs=class{constructor(){t()}signal=new fa;abort(i){var n,r;if(!this.signal.aborted){this.signal.reason=i,this.signal.aborted=!0;for(let o of this.signal._onabort)o(i);(r=(n=this.signal).onabort)==null||r.call(n,i)}}};let s=((ua=Gn.env)==null?void 0:ua.LRU_CACHE_IGNORE_AC_WARNING)!=="1",t=()=>{s&&(s=!1,pa("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}var ch=s=>!da.has(s),ip=Symbol("type"),Ee=s=>s&&s===Math.floor(s)&&s>0&&isFinite(s),ma=s=>Ee(s)?s<=Math.pow(2,8)?Uint8Array:s<=Math.pow(2,16)?Uint16Array:s<=Math.pow(2,32)?Uint32Array:s<=Number.MAX_SAFE_INTEGER?ri:null:null,ri=class extends Array{constructor(t){super(t),this.fill(0)}},kn=class s{heap;length;static#t=!1;static create(t){let e=ma(t);if(!e)return[];s.#t=!0;let i=new s(t,e);return s.#t=!1,i}constructor(t,e){if(!s.#t)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},Mi=class s{#t;#e;#r;#s;#o;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#c;#f;#a;#l;#n;#g;#w;#d;#u;#C;#m;#O;#v;#y;#x;#E;#p;static unsafeExposeInternals(t){return{starts:t.#v,ttls:t.#y,sizes:t.#O,keyMap:t.#a,keyList:t.#l,valList:t.#n,next:t.#g,prev:t.#w,get head(){return t.#d},get tail(){return t.#u},free:t.#C,isBackgroundFetch:e=>t.#h(e),backgroundFetch:(e,i,n,r)=>t.#D(e,i,n,r),moveToTail:e=>t.#z(e),indexes:e=>t.#_(e),rindexes:e=>t.#$(e),isStale:e=>t.#b(e)}}get max(){return this.#t}get maxSize(){return this.#e}get calculatedSize(){return this.#f}get size(){return this.#c}get fetchMethod(){return this.#o}get memoMethod(){return this.#S}get dispose(){return this.#r}get disposeAfter(){return this.#s}constructor(t){let{max:e=0,ttl:i,ttlResolution:n=1,ttlAutopurge:r,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:l,dispose:c,disposeAfter:h,noDisposeOnSet:f,noUpdateTTL:d,maxSize:p=0,maxEntrySize:x=0,sizeCalculation:w,fetchMethod:m,memoMethod:E,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:_,allowStaleOnFetchRejection:O,allowStaleOnFetchAbort:T,ignoreFetchAbort:H}=t;if(e!==0&&!Ee(e))throw new TypeError("max option must be a nonnegative integer");let q=e?ma(e):Array;if(!q)throw new Error("invalid max value: "+e);if(this.#t=e,this.#e=p,this.maxEntrySize=x||this.#e,this.sizeCalculation=w,this.sizeCalculation){if(!this.#e&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(E!==void 0&&typeof E!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=E,m!==void 0&&typeof m!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#o=m,this.#E=!!m,this.#a=new Map,this.#l=new Array(e).fill(void 0),this.#n=new Array(e).fill(void 0),this.#g=new q(e),this.#w=new q(e),this.#d=0,this.#u=0,this.#C=kn.create(e),this.#c=0,this.#f=0,typeof c=="function"&&(this.#r=c),typeof h=="function"?(this.#s=h,this.#m=[]):(this.#s=void 0,this.#m=void 0),this.#x=!!this.#r,this.#p=!!this.#s,this.noDisposeOnSet=!!f,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!v,this.allowStaleOnFetchRejection=!!O,this.allowStaleOnFetchAbort=!!T,this.ignoreFetchAbort=!!H,this.maxEntrySize!==0){if(this.#e!==0&&!Ee(this.#e))throw new TypeError("maxSize must be a positive integer if specified");if(!Ee(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#T()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!_,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Ee(n)||n===0?n:1,this.ttlAutopurge=!!r,this.ttl=i||0,this.ttl){if(!Ee(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#F()}if(this.#t===0&&this.ttl===0&&this.#e===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#e){let at="LRU_CACHE_UNBOUNDED";ch(at)&&(da.add(at),pa("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",at,s))}}getRemainingTTL(t){return this.#a.has(t)?1/0:0}#F(){let t=new ri(this.#t),e=new ri(this.#t);this.#y=t,this.#v=e,this.#R=(r,o,a=ni.now())=>{if(e[r]=o!==0?a:0,t[r]=o,o!==0&&this.ttlAutopurge){let l=setTimeout(()=>{this.#b(r)&&this.#j(this.#l[r],"expire")},o+1);l.unref&&l.unref()}},this.#A=r=>{e[r]=t[r]!==0?ni.now():0},this.#i=(r,o)=>{if(t[o]){let a=t[o],l=e[o];if(!a||!l)return;r.ttl=a,r.start=l,r.now=i||n();let c=r.now-l;r.remainingTTL=a-c}};let i=0,n=()=>{let r=ni.now();if(this.ttlResolution>0){i=r;let o=setTimeout(()=>i=0,this.ttlResolution);o.unref&&o.unref()}return r};this.getRemainingTTL=r=>{let o=this.#a.get(r);if(o===void 0)return 0;let a=t[o],l=e[o];if(!a||!l)return 1/0;let c=(i||n())-l;return a-c},this.#b=r=>{let o=e[r],a=t[r];return!!a&&!!o&&(i||n())-o>a}}#A=()=>{};#i=()=>{};#R=()=>{};#b=()=>!1;#T(){let t=new ri(this.#t);this.#f=0,this.#O=t,this.#M=e=>{this.#f-=t[e],t[e]=0},this.#N=(e,i,n,r)=>{if(this.#h(i))return 0;if(!Ee(n))if(r){if(typeof r!="function")throw new TypeError("sizeCalculation must be a function");if(n=r(i,e),!Ee(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return n},this.#I=(e,i,n)=>{if(t[e]=i,this.#e){let r=this.#e-t[e];for(;this.#f>r;)this.#L(!0)}this.#f+=t[e],n&&(n.entrySize=i,n.totalCalculatedSize=this.#f)}}#M=t=>{};#I=(t,e,i)=>{};#N=(t,e,i,n)=>{if(i||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#_({allowStale:t=this.allowStale}={}){if(this.#c)for(let e=this.#u;!(!this.#P(e)||((t||!this.#b(e))&&(yield e),e===this.#d));)e=this.#w[e]}*#$({allowStale:t=this.allowStale}={}){if(this.#c)for(let e=this.#d;!(!this.#P(e)||((t||!this.#b(e))&&(yield e),e===this.#u));)e=this.#g[e]}#P(t){return t!==void 0&&this.#a.get(this.#l[t])===t}*entries(){for(let t of this.#_())this.#n[t]!==void 0&&this.#l[t]!==void 0&&!this.#h(this.#n[t])&&(yield[this.#l[t],this.#n[t]])}*rentries(){for(let t of this.#$())this.#n[t]!==void 0&&this.#l[t]!==void 0&&!this.#h(this.#n[t])&&(yield[this.#l[t],this.#n[t]])}*keys(){for(let t of this.#_()){let e=this.#l[t];e!==void 0&&!this.#h(this.#n[t])&&(yield e)}}*rkeys(){for(let t of this.#$()){let e=this.#l[t];e!==void 0&&!this.#h(this.#n[t])&&(yield e)}}*values(){for(let t of this.#_())this.#n[t]!==void 0&&!this.#h(this.#n[t])&&(yield this.#n[t])}*rvalues(){for(let t of this.#$())this.#n[t]!==void 0&&!this.#h(this.#n[t])&&(yield this.#n[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(let i of this.#_()){let n=this.#n[i],r=this.#h(n)?n.__staleWhileFetching:n;if(r!==void 0&&t(r,this.#l[i],this))return this.get(this.#l[i],e)}}forEach(t,e=this){for(let i of this.#_()){let n=this.#n[i],r=this.#h(n)?n.__staleWhileFetching:n;r!==void 0&&t.call(e,r,this.#l[i],this)}}rforEach(t,e=this){for(let i of this.#$()){let n=this.#n[i],r=this.#h(n)?n.__staleWhileFetching:n;r!==void 0&&t.call(e,r,this.#l[i],this)}}purgeStale(){let t=!1;for(let e of this.#$({allowStale:!0}))this.#b(e)&&(this.#j(this.#l[e],"expire"),t=!0);return t}info(t){let e=this.#a.get(t);if(e===void 0)return;let i=this.#n[e],n=this.#h(i)?i.__staleWhileFetching:i;if(n===void 0)return;let r={value:n};if(this.#y&&this.#v){let o=this.#y[e],a=this.#v[e];if(o&&a){let l=o-(ni.now()-a);r.ttl=l,r.start=Date.now()}}return this.#O&&(r.size=this.#O[e]),r}dump(){let t=[];for(let e of this.#_({allowStale:!0})){let i=this.#l[e],n=this.#n[e],r=this.#h(n)?n.__staleWhileFetching:n;if(r===void 0||i===void 0)continue;let o={value:r};if(this.#y&&this.#v){o.ttl=this.#y[e];let a=ni.now()-this.#v[e];o.start=Math.floor(Date.now()-a)}this.#O&&(o.size=this.#O[e]),t.unshift([i,o])}return t}load(t){this.clear();for(let[e,i]of t){if(i.start){let n=Date.now()-i.start;i.start=ni.now()-n}this.set(e,i.value,i)}}set(t,e,i={}){var d,p,x,w,m;if(e===void 0)return this.delete(t),this;let{ttl:n=this.ttl,start:r,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=i,{noUpdateTTL:c=this.noUpdateTTL}=i,h=this.#N(t,e,i.size||0,a);if(this.maxEntrySize&&h>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.#j(t,"set"),this;let f=this.#c===0?void 0:this.#a.get(t);if(f===void 0)f=this.#c===0?this.#u:this.#C.length!==0?this.#C.pop():this.#c===this.#t?this.#L(!1):this.#c,this.#l[f]=t,this.#n[f]=e,this.#a.set(t,f),this.#g[this.#u]=f,this.#w[f]=this.#u,this.#u=f,this.#c++,this.#I(f,h,l),l&&(l.set="add"),c=!1;else{this.#z(f);let E=this.#n[f];if(e!==E){if(this.#E&&this.#h(E)){E.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:v}=E;v!==void 0&&!o&&(this.#x&&((d=this.#r)==null||d.call(this,v,t,"set")),this.#p&&((p=this.#m)==null||p.push([v,t,"set"])))}else o||(this.#x&&((x=this.#r)==null||x.call(this,E,t,"set")),this.#p&&((w=this.#m)==null||w.push([E,t,"set"])));if(this.#M(f),this.#I(f,h,l),this.#n[f]=e,l){l.set="replace";let v=E&&this.#h(E)?E.__staleWhileFetching:E;v!==void 0&&(l.oldValue=v)}}else l&&(l.set="update")}if(n!==0&&!this.#y&&this.#F(),this.#y&&(c||this.#R(f,n,r),l&&this.#i(l,f)),!o&&this.#p&&this.#m){let E=this.#m,v;for(;v=E==null?void 0:E.shift();)(m=this.#s)==null||m.call(this,...v)}return this}pop(){var t;try{for(;this.#c;){let e=this.#n[this.#d];if(this.#L(!0),this.#h(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#p&&this.#m){let e=this.#m,i;for(;i=e==null?void 0:e.shift();)(t=this.#s)==null||t.call(this,...i)}}}#L(t){var r,o;let e=this.#d,i=this.#l[e],n=this.#n[e];return this.#E&&this.#h(n)?n.__abortController.abort(new Error("evicted")):(this.#x||this.#p)&&(this.#x&&((r=this.#r)==null||r.call(this,n,i,"evict")),this.#p&&((o=this.#m)==null||o.push([n,i,"evict"]))),this.#M(e),t&&(this.#l[e]=void 0,this.#n[e]=void 0,this.#C.push(e)),this.#c===1?(this.#d=this.#u=0,this.#C.length=0):this.#d=this.#g[e],this.#a.delete(i),this.#c--,e}has(t,e={}){let{updateAgeOnHas:i=this.updateAgeOnHas,status:n}=e,r=this.#a.get(t);if(r!==void 0){let o=this.#n[r];if(this.#h(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#b(r))n&&(n.has="stale",this.#i(n,r));else return i&&this.#A(r),n&&(n.has="hit",this.#i(n,r)),!0}else n&&(n.has="miss");return!1}peek(t,e={}){let{allowStale:i=this.allowStale}=e,n=this.#a.get(t);if(n===void 0||!i&&this.#b(n))return;let r=this.#n[n];return this.#h(r)?r.__staleWhileFetching:r}#D(t,e,i,n){let r=e===void 0?void 0:this.#n[e];if(this.#h(r))return r;let o=new Cs,{signal:a}=i;a==null||a.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let l={signal:o.signal,options:i,context:n},c=(w,m=!1)=>{let{aborted:E}=o.signal,v=i.ignoreFetchAbort&&w!==void 0;if(i.status&&(E&&!m?(i.status.fetchAborted=!0,i.status.fetchError=o.signal.reason,v&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),E&&!v&&!m)return f(o.signal.reason);let _=p;return this.#n[e]===p&&(w===void 0?_.__staleWhileFetching?this.#n[e]=_.__staleWhileFetching:this.#j(t,"fetch"):(i.status&&(i.status.fetchUpdated=!0),this.set(t,w,l.options))),w},h=w=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=w),f(w)),f=w=>{let{aborted:m}=o.signal,E=m&&i.allowStaleOnFetchAbort,v=E||i.allowStaleOnFetchRejection,_=v||i.noDeleteOnFetchRejection,O=p;if(this.#n[e]===p&&(!_||O.__staleWhileFetching===void 0?this.#j(t,"fetch"):E||(this.#n[e]=O.__staleWhileFetching)),v)return i.status&&O.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),O.__staleWhileFetching;if(O.__returned===O)throw w},d=(w,m)=>{var v;let E=(v=this.#o)==null?void 0:v.call(this,t,r,l);E&&E instanceof Promise&&E.then(_=>w(_===void 0?void 0:_),m),o.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(w(void 0),i.allowStaleOnFetchAbort&&(w=_=>c(_,!0)))})};i.status&&(i.status.fetchDispatched=!0);let p=new Promise(d).then(c,h),x=Object.assign(p,{__abortController:o,__staleWhileFetching:r,__returned:void 0});return e===void 0?(this.set(t,x,{...l.options,status:void 0}),e=this.#a.get(t)):this.#n[e]=x,x}#h(t){if(!this.#E)return!1;let e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof Cs}async fetch(t,e={}){let{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:p=this.ignoreFetchAbort,allowStaleOnFetchAbort:x=this.allowStaleOnFetchAbort,context:w,forceRefresh:m=!1,status:E,signal:v}=e;if(!this.#E)return E&&(E.fetch="get"),this.get(t,{allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:r,status:E});let _={allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:r,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:h,noDeleteOnFetchRejection:f,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:x,ignoreFetchAbort:p,status:E,signal:v},O=this.#a.get(t);if(O===void 0){E&&(E.fetch="miss");let T=this.#D(t,O,_,w);return T.__returned=T}else{let T=this.#n[O];if(this.#h(T)){let G=i&&T.__staleWhileFetching!==void 0;return E&&(E.fetch="inflight",G&&(E.returnedStale=!0)),G?T.__staleWhileFetching:T.__returned=T}let H=this.#b(O);if(!m&&!H)return E&&(E.fetch="hit"),this.#z(O),n&&this.#A(O),E&&this.#i(E,O),T;let q=this.#D(t,O,_,w),J=q.__staleWhileFetching!==void 0&&i;return E&&(E.fetch=H?"stale":"refresh",J&&H&&(E.returnedStale=!0)),J?q.__staleWhileFetching:q.__returned=q}}async forceFetch(t,e={}){let i=await this.fetch(t,e);if(i===void 0)throw new Error("fetch() returned undefined");return i}memo(t,e={}){let i=this.#S;if(!i)throw new Error("no memoMethod provided to constructor");let{context:n,forceRefresh:r,...o}=e,a=this.get(t,o);if(!r&&a!==void 0)return a;let l=i(t,a,{options:o,context:n});return this.set(t,l,o),l}get(t,e={}){let{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,status:o}=e,a=this.#a.get(t);if(a!==void 0){let l=this.#n[a],c=this.#h(l);return o&&this.#i(o,a),this.#b(a)?(o&&(o.get="stale"),c?(o&&i&&l.__staleWhileFetching!==void 0&&(o.returnedStale=!0),i?l.__staleWhileFetching:void 0):(r||this.#j(t,"expire"),o&&i&&(o.returnedStale=!0),i?l:void 0)):(o&&(o.get="hit"),c?l.__staleWhileFetching:(this.#z(a),n&&this.#A(a),l))}else o&&(o.get="miss")}#W(t,e){this.#w[e]=t,this.#g[t]=e}#z(t){t!==this.#u&&(t===this.#d?this.#d=this.#g[t]:this.#W(this.#w[t],this.#g[t]),this.#W(this.#u,t),this.#u=t)}delete(t){return this.#j(t,"delete")}#j(t,e){var n,r,o,a;let i=!1;if(this.#c!==0){let l=this.#a.get(t);if(l!==void 0)if(i=!0,this.#c===1)this.#B(e);else{this.#M(l);let c=this.#n[l];if(this.#h(c)?c.__abortController.abort(new Error("deleted")):(this.#x||this.#p)&&(this.#x&&((n=this.#r)==null||n.call(this,c,t,e)),this.#p&&((r=this.#m)==null||r.push([c,t,e]))),this.#a.delete(t),this.#l[l]=void 0,this.#n[l]=void 0,l===this.#u)this.#u=this.#w[l];else if(l===this.#d)this.#d=this.#g[l];else{let h=this.#w[l];this.#g[h]=this.#g[l];let f=this.#g[l];this.#w[f]=this.#w[l]}this.#c--,this.#C.push(l)}}if(this.#p&&((o=this.#m)!=null&&o.length)){let l=this.#m,c;for(;c=l==null?void 0:l.shift();)(a=this.#s)==null||a.call(this,...c)}return i}clear(){return this.#B("delete")}#B(t){var e,i,n;for(let r of this.#$({allowStale:!0})){let o=this.#n[r];if(this.#h(o))o.__abortController.abort(new Error("deleted"));else{let a=this.#l[r];this.#x&&((e=this.#r)==null||e.call(this,o,a,t)),this.#p&&((i=this.#m)==null||i.push([o,a,t]))}}if(this.#a.clear(),this.#n.fill(void 0),this.#l.fill(void 0),this.#y&&this.#v&&(this.#y.fill(0),this.#v.fill(0)),this.#O&&this.#O.fill(0),this.#d=0,this.#u=0,this.#C.length=0,this.#f=0,this.#c=0,this.#p&&this.#m){let r=this.#m,o;for(;o=r==null?void 0:r.shift();)(n=this.#s)==null||n.call(this,...o)}}};var li=require("node:path"),va=require("node:url"),ne=require("fs"),yh=k(require("node:fs"),1),ve=require("node:fs/promises");var Ts=require("node:events"),Zn=k(require("node:stream"),1),Sa=require("node:string_decoder"),ga=typeof process=="object"&&process?process:{stdout:null,stderr:null},hh=s=>!!s&&typeof s=="object"&&(s instanceof Oe||s instanceof Zn.default||fh(s)||uh(s)),fh=s=>!!s&&typeof s=="object"&&s instanceof Ts.EventEmitter&&typeof s.pipe=="function"&&s.pipe!==Zn.default.Writable.prototype.pipe,uh=s=>!!s&&typeof s=="object"&&s instanceof Ts.EventEmitter&&typeof s.write=="function"&&typeof s.end=="function",ce=Symbol("EOF"),he=Symbol("maybeEmitEnd"),Ce=Symbol("emittedEnd"),Os=Symbol("emittingEnd"),Ii=Symbol("emittedError"),vs=Symbol("closed"),wa=Symbol("read"),As=Symbol("flush"),ba=Symbol("flushChunk"),Jt=Symbol("encoding"),oi=Symbol("decoder"),gt=Symbol("flowing"),Ni=Symbol("paused"),ai=Symbol("resume"),wt=Symbol("buffer"),vt=Symbol("pipes"),bt=Symbol("bufferLength"),Hn=Symbol("bufferPush"),_s=Symbol("bufferShift"),St=Symbol("objectMode"),ht=Symbol("destroyed"),Yn=Symbol("error"),qn=Symbol("emitData"),ya=Symbol("emitEnd"),Vn=Symbol("emitEnd2"),ie=Symbol("async"),Kn=Symbol("abort"),$s=Symbol("aborted"),Pi=Symbol("signal"),He=Symbol("dataListeners"),Rt=Symbol("discarded"),Li=s=>Promise.resolve().then(s),dh=s=>s(),ph=s=>s==="end"||s==="finish"||s==="prefinish",mh=s=>s instanceof ArrayBuffer||!!s&&typeof s=="object"&&s.constructor&&s.constructor.name==="ArrayBuffer"&&s.byteLength>=0,gh=s=>!Buffer.isBuffer(s)&&ArrayBuffer.isView(s),Fs=class{src;dest;opts;ondrain;constructor(t,e,i){this.src=t,this.dest=e,this.opts=i,this.ondrain=()=>t[ai](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(t){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Jn=class extends Fs{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(t,e,i){super(t,e,i),this.proxyErrors=n=>e.emit("error",n),t.on("error",this.proxyErrors)}},wh=s=>!!s.objectMode,bh=s=>!s.objectMode&&!!s.encoding&&s.encoding!=="buffer",Oe=class extends Ts.EventEmitter{[gt]=!1;[Ni]=!1;[vt]=[];[wt]=[];[St];[Jt];[ie];[oi];[ce]=!1;[Ce]=!1;[Os]=!1;[vs]=!1;[Ii]=null;[bt]=0;[ht]=!1;[Pi];[$s]=!1;[He]=0;[Rt]=!1;writable=!0;readable=!0;constructor(...t){let e=t[0]||{};if(super(),e.objectMode&&typeof e.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");wh(e)?(this[St]=!0,this[Jt]=null):bh(e)?(this[Jt]=e.encoding,this[St]=!1):(this[St]=!1,this[Jt]=null),this[ie]=!!e.async,this[oi]=this[Jt]?new Sa.StringDecoder(this[Jt]):null,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[wt]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[vt]});let{signal:i}=e;i&&(this[Pi]=i,i.aborted?this[Kn]():i.addEventListener("abort",()=>this[Kn]()))}get bufferLength(){return this[bt]}get encoding(){return this[Jt]}set encoding(t){throw new Error("Encoding must be set at instantiation time")}setEncoding(t){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[St]}set objectMode(t){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ie]}set async(t){this[ie]=this[ie]||!!t}[Kn](){var t,e;this[$s]=!0,this.emit("abort",(t=this[Pi])==null?void 0:t.reason),this.destroy((e=this[Pi])==null?void 0:e.reason)}get aborted(){return this[$s]}set aborted(t){}write(t,e,i){var r;if(this[$s])return!1;if(this[ce])throw new Error("write after end");if(this[ht])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof e=="function"&&(i=e,e="utf8"),e||(e="utf8");let n=this[ie]?Li:dh;if(!this[St]&&!Buffer.isBuffer(t)){if(gh(t))t=Buffer.from(t.buffer,t.byteOffset,t.byteLength);else if(mh(t))t=Buffer.from(t);else if(typeof t!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[St]?(this[gt]&&this[bt]!==0&&this[As](!0),this[gt]?this.emit("data",t):this[Hn](t),this[bt]!==0&&this.emit("readable"),i&&n(i),this[gt]):t.length?(typeof t=="string"&&!(e===this[Jt]&&!((r=this[oi])!=null&&r.lastNeed))&&(t=Buffer.from(t,e)),Buffer.isBuffer(t)&&this[Jt]&&(t=this[oi].write(t)),this[gt]&&this[bt]!==0&&this[As](!0),this[gt]?this.emit("data",t):this[Hn](t),this[bt]!==0&&this.emit("readable"),i&&n(i),this[gt]):(this[bt]!==0&&this.emit("readable"),i&&n(i),this[gt])}read(t){if(this[ht])return null;if(this[Rt]=!1,this[bt]===0||t===0||t&&t>this[bt])return this[he](),null;this[St]&&(t=null),this[wt].length>1&&!this[St]&&(this[wt]=[this[Jt]?this[wt].join(""):Buffer.concat(this[wt],this[bt])]);let e=this[wa](t||null,this[wt][0]);return this[he](),e}[wa](t,e){if(this[St])this[_s]();else{let i=e;t===i.length||t===null?this[_s]():typeof i=="string"?(this[wt][0]=i.slice(t),e=i.slice(0,t),this[bt]-=t):(this[wt][0]=i.subarray(t),e=i.subarray(0,t),this[bt]-=t)}return this.emit("data",e),!this[wt].length&&!this[ce]&&this.emit("drain"),e}end(t,e,i){return typeof t=="function"&&(i=t,t=void 0),typeof e=="function"&&(i=e,e="utf8"),t!==void 0&&this.write(t,e),i&&this.once("end",i),this[ce]=!0,this.writable=!1,(this[gt]||!this[Ni])&&this[he](),this}[ai](){this[ht]||(!this[He]&&!this[vt].length&&(this[Rt]=!0),this[Ni]=!1,this[gt]=!0,this.emit("resume"),this[wt].length?this[As]():this[ce]?this[he]():this.emit("drain"))}resume(){return this[ai]()}pause(){this[gt]=!1,this[Ni]=!0,this[Rt]=!1}get destroyed(){return this[ht]}get flowing(){return this[gt]}get paused(){return this[Ni]}[Hn](t){this[St]?this[bt]+=1:this[bt]+=t.length,this[wt].push(t)}[_s](){return this[St]?this[bt]-=1:this[bt]-=this[wt][0].length,this[wt].shift()}[As](t=!1){do;while(this[ba](this[_s]())&&this[wt].length);!t&&!this[wt].length&&!this[ce]&&this.emit("drain")}[ba](t){return this.emit("data",t),this[gt]}pipe(t,e){if(this[ht])return t;this[Rt]=!1;let i=this[Ce];return e=e||{},t===ga.stdout||t===ga.stderr?e.end=!1:e.end=e.end!==!1,e.proxyErrors=!!e.proxyErrors,i?e.end&&t.end():(this[vt].push(e.proxyErrors?new Jn(this,t,e):new Fs(this,t,e)),this[ie]?Li(()=>this[ai]()):this[ai]()),t}unpipe(t){let e=this[vt].find(i=>i.dest===t);e&&(this[vt].length===1?(this[gt]&&this[He]===0&&(this[gt]=!1),this[vt]=[]):this[vt].splice(this[vt].indexOf(e),1),e.unpipe())}addListener(t,e){return this.on(t,e)}on(t,e){let i=super.on(t,e);if(t==="data")this[Rt]=!1,this[He]++,!this[vt].length&&!this[gt]&&this[ai]();else if(t==="readable"&&this[bt]!==0)super.emit("readable");else if(ph(t)&&this[Ce])super.emit(t),this.removeAllListeners(t);else if(t==="error"&&this[Ii]){let n=e;this[ie]?Li(()=>n.call(this,this[Ii])):n.call(this,this[Ii])}return i}removeListener(t,e){return this.off(t,e)}off(t,e){let i=super.off(t,e);return t==="data"&&(this[He]=this.listeners("data").length,this[He]===0&&!this[Rt]&&!this[vt].length&&(this[gt]=!1)),i}removeAllListeners(t){let e=super.removeAllListeners(t);return(t==="data"||t===void 0)&&(this[He]=0,!this[Rt]&&!this[vt].length&&(this[gt]=!1)),e}get emittedEnd(){return this[Ce]}[he](){!this[Os]&&!this[Ce]&&!this[ht]&&this[wt].length===0&&this[ce]&&(this[Os]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[vs]&&this.emit("close"),this[Os]=!1)}emit(t,...e){let i=e[0];if(t!=="error"&&t!=="close"&&t!==ht&&this[ht])return!1;if(t==="data")return!this[St]&&!i?!1:this[ie]?(Li(()=>this[qn](i)),!0):this[qn](i);if(t==="end")return this[ya]();if(t==="close"){if(this[vs]=!0,!this[Ce]&&!this[ht])return!1;let r=super.emit("close");return this.removeAllListeners("close"),r}else if(t==="error"){this[Ii]=i,super.emit(Yn,i);let r=!this[Pi]||this.listeners("error").length?super.emit("error",i):!1;return this[he](),r}else if(t==="resume"){let r=super.emit("resume");return this[he](),r}else if(t==="finish"||t==="prefinish"){let r=super.emit(t);return this.removeAllListeners(t),r}let n=super.emit(t,...e);return this[he](),n}[qn](t){for(let i of this[vt])i.dest.write(t)===!1&&this.pause();let e=this[Rt]?!1:super.emit("data",t);return this[he](),e}[ya](){return this[Ce]?!1:(this[Ce]=!0,this.readable=!1,this[ie]?(Li(()=>this[Vn]()),!0):this[Vn]())}[Vn](){if(this[oi]){let e=this[oi].end();if(e){for(let i of this[vt])i.dest.write(e);this[Rt]||super.emit("data",e)}}for(let e of this[vt])e.end();let t=super.emit("end");return this.removeAllListeners("end"),t}async collect(){let t=Object.assign([],{dataLength:0});this[St]||(t.dataLength=0);let e=this.promise();return this.on("data",i=>{t.push(i),this[St]||(t.dataLength+=i.length)}),await e,t}async concat(){if(this[St])throw new Error("cannot concat in objectMode");let t=await this.collect();return this[Jt]?t.join(""):Buffer.concat(t,t.dataLength)}async promise(){return new Promise((t,e)=>{this.on(ht,()=>e(new Error("stream destroyed"))),this.on("error",i=>e(i)),this.on("end",()=>t())})}[Symbol.asyncIterator](){this[Rt]=!1;let t=!1,e=async()=>(this.pause(),t=!0,{value:void 0,done:!0});return{next:()=>{if(t)return e();let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[ce])return e();let r,o,a=f=>{this.off("data",l),this.off("end",c),this.off(ht,h),e(),o(f)},l=f=>{this.off("error",a),this.off("end",c),this.off(ht,h),this.pause(),r({value:f,done:!!this[ce]})},c=()=>{this.off("error",a),this.off("data",l),this.off(ht,h),e(),r({done:!0,value:void 0})},h=()=>a(new Error("stream destroyed"));return new Promise((f,d)=>{o=d,r=f,this.once(ht,h),this.once("error",a),this.once("end",c),this.once("data",l)})},throw:e,return:e,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Rt]=!1;let t=!1,e=()=>(this.pause(),this.off(Yn,e),this.off(ht,e),this.off("end",e),t=!0,{done:!0,value:void 0}),i=()=>{if(t)return e();let n=this.read();return n===null?e():{done:!1,value:n}};return this.once("end",e),this.once(Yn,e),this.once(ht,e),{next:i,throw:e,return:e,[Symbol.iterator](){return this}}}destroy(t){if(this[ht])return t?this.emit("error",t):this.emit(ht),this;this[ht]=!0,this[Rt]=!0,this[wt].length=0,this[bt]=0;let e=this;return typeof e.close=="function"&&!this[vs]&&e.close(),t?this.emit("error",t):this.emit(ht),this}static get isStream(){return hh}};var Sh=ne.realpathSync.native,Wi={lstatSync:ne.lstatSync,readdir:ne.readdir,readdirSync:ne.readdirSync,readlinkSync:ne.readlinkSync,realpathSync:Sh,promises:{lstat:ve.lstat,readdir:ve.readdir,readlink:ve.readlink,realpath:ve.realpath}},Aa=s=>!s||s===Wi||s===yh?Wi:{...Wi,...s,promises:{...Wi.promises,...s.promises||{}}},_a=/^\\\\\?\\([a-z]:)\\?$/i,xh=s=>s.replace(/\//g,"\\").replace(_a,"$1\\"),Eh=/[\\\/]/,Ut=0,$a=1,Fa=2,se=4,Ta=6,ja=8,Ye=10,Ra=12,Bt=15,Di=~Bt,Qn=16,xa=32,zi=64,Zt=128,js=256,Ms=512,Ea=zi|Zt|Ms,Ch=1023,Xn=s=>s.isFile()?ja:s.isDirectory()?se:s.isSymbolicLink()?Ye:s.isCharacterDevice()?Fa:s.isBlockDevice()?Ta:s.isSocket()?Ra:s.isFIFO()?$a:Ut,Ca=new Map,Bi=s=>{let t=Ca.get(s);if(t)return t;let e=s.normalize("NFKD");return Ca.set(s,e),e},Oa=new Map,Rs=s=>{let t=Oa.get(s);if(t)return t;let e=Bi(s.toLowerCase());return Oa.set(s,e),e},Is=class extends Mi{constructor(){super({max:256})}},tr=class extends Mi{constructor(t=16*1024){super({maxSize:t,sizeCalculation:e=>e.length+1})}},Ma=Symbol("PathScurry setAsCwd"),xt=class{name;root;roots;parent;nocase;isCWD=!1;#t;#e;get dev(){return this.#e}#r;get mode(){return this.#r}#s;get nlink(){return this.#s}#o;get uid(){return this.#o}#S;get gid(){return this.#S}#c;get rdev(){return this.#c}#f;get blksize(){return this.#f}#a;get ino(){return this.#a}#l;get size(){return this.#l}#n;get blocks(){return this.#n}#g;get atimeMs(){return this.#g}#w;get mtimeMs(){return this.#w}#d;get ctimeMs(){return this.#d}#u;get birthtimeMs(){return this.#u}#C;get atime(){return this.#C}#m;get mtime(){return this.#m}#O;get ctime(){return this.#O}#v;get birthtime(){return this.#v}#y;#x;#E;#p;#F;#A;#i;#R;#b;#T;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(t,e=Ut,i,n,r,o,a){this.name=t,this.#y=r?Rs(t):Bi(t),this.#i=e&Ch,this.nocase=r,this.roots=n,this.root=i||this,this.#R=o,this.#E=a.fullpath,this.#F=a.relative,this.#A=a.relativePosix,this.parent=a.parent,this.parent?this.#t=this.parent.#t:this.#t=Aa(a.fs)}depth(){return this.#x!==void 0?this.#x:this.parent?this.#x=this.parent.depth()+1:this.#x=0}childrenCache(){return this.#R}resolve(t){if(!t)return this;let e=this.getRootString(t),n=t.substring(e.length).split(this.splitSep);return e?this.getRoot(e).#M(n):this.#M(n)}#M(t){let e=this;for(let i of t)e=e.child(i);return e}children(){let t=this.#R.get(this);if(t)return t;let e=Object.assign([],{provisional:0});return this.#R.set(this,e),this.#i&=~Qn,e}child(t,e){if(t===""||t===".")return this;if(t==="..")return this.parent||this;let i=this.children(),n=this.nocase?Rs(t):Bi(t);for(let l of i)if(l.#y===n)return l;let r=this.parent?this.sep:"",o=this.#E?this.#E+r+t:void 0,a=this.newChild(t,Ut,{...e,parent:this,fullpath:o});return this.canReaddir()||(a.#i|=Zt),i.push(a),a}relative(){if(this.isCWD)return"";if(this.#F!==void 0)return this.#F;let t=this.name,e=this.parent;if(!e)return this.#F=this.name;let i=e.relative();return i+(!i||!e.parent?"":this.sep)+t}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#A!==void 0)return this.#A;let t=this.name,e=this.parent;if(!e)return this.#A=this.fullpathPosix();let i=e.relativePosix();return i+(!i||!e.parent?"":"/")+t}fullpath(){if(this.#E!==void 0)return this.#E;let t=this.name,e=this.parent;if(!e)return this.#E=this.name;let n=e.fullpath()+(e.parent?this.sep:"")+t;return this.#E=n}fullpathPosix(){if(this.#p!==void 0)return this.#p;if(this.sep==="/")return this.#p=this.fullpath();if(!this.parent){let n=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(n)?this.#p=`//?/${n}`:this.#p=n}let t=this.parent,e=t.fullpathPosix(),i=e+(!e||!t.parent?"":"/")+this.name;return this.#p=i}isUnknown(){return(this.#i&Bt)===Ut}isType(t){return this[`is${t}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#i&Bt)===ja}isDirectory(){return(this.#i&Bt)===se}isCharacterDevice(){return(this.#i&Bt)===Fa}isBlockDevice(){return(this.#i&Bt)===Ta}isFIFO(){return(this.#i&Bt)===$a}isSocket(){return(this.#i&Bt)===Ra}isSymbolicLink(){return(this.#i&Ye)===Ye}lstatCached(){return this.#i&xa?this:void 0}readlinkCached(){return this.#b}realpathCached(){return this.#T}readdirCached(){let t=this.children();return t.slice(0,t.provisional)}canReadlink(){if(this.#b)return!0;if(!this.parent)return!1;let t=this.#i&Bt;return!(t!==Ut&&t!==Ye||this.#i&js||this.#i&Zt)}calledReaddir(){return!!(this.#i&Qn)}isENOENT(){return!!(this.#i&Zt)}isNamed(t){return this.nocase?this.#y===Rs(t):this.#y===Bi(t)}async readlink(){var e;let t=this.#b;if(t)return t;if(this.canReadlink()&&this.parent)try{let i=await this.#t.promises.readlink(this.fullpath()),n=(e=await this.parent.realpath())==null?void 0:e.resolve(i);if(n)return this.#b=n}catch(i){this.#h(i.code);return}}readlinkSync(){var e;let t=this.#b;if(t)return t;if(this.canReadlink()&&this.parent)try{let i=this.#t.readlinkSync(this.fullpath()),n=(e=this.parent.realpathSync())==null?void 0:e.resolve(i);if(n)return this.#b=n}catch(i){this.#h(i.code);return}}#I(t){this.#i|=Qn;for(let e=t.provisional;e<t.length;e++){let i=t[e];i&&i.#N()}}#N(){this.#i&Zt||(this.#i=(this.#i|Zt)&Di,this.#_())}#_(){let t=this.children();t.provisional=0;for(let e of t)e.#N()}#$(){this.#i|=Ms,this.#P()}#P(){if(this.#i&zi)return;let t=this.#i;(t&Bt)===se&&(t&=Di),this.#i=t|zi,this.#_()}#L(t=""){t==="ENOTDIR"||t==="EPERM"?this.#P():t==="ENOENT"?this.#N():this.children().provisional=0}#D(t=""){t==="ENOTDIR"?this.parent.#P():t==="ENOENT"&&this.#N()}#h(t=""){let e=this.#i;e|=js,t==="ENOENT"&&(e|=Zt),(t==="EINVAL"||t==="UNKNOWN")&&(e&=Di),this.#i=e,t==="ENOTDIR"&&this.parent&&this.parent.#P()}#W(t,e){return this.#j(t,e)||this.#z(t,e)}#z(t,e){let i=Xn(t),n=this.newChild(t.name,i,{parent:this}),r=n.#i&Bt;return r!==se&&r!==Ye&&r!==Ut&&(n.#i|=zi),e.unshift(n),e.provisional++,n}#j(t,e){for(let i=e.provisional;i<e.length;i++){let n=e[i];if((this.nocase?Rs(t.name):Bi(t.name))===n.#y)return this.#B(t,n,i,e)}}#B(t,e,i,n){let r=e.name;return e.#i=e.#i&Di|Xn(t),r!==t.name&&(e.name=t.name),i!==n.provisional&&(i===n.length-1?n.pop():n.splice(i,1),n.unshift(e)),n.provisional++,e}async lstat(){if(!(this.#i&Zt))try{return this.#H(await this.#t.promises.lstat(this.fullpath())),this}catch(t){this.#D(t.code)}}lstatSync(){if(!(this.#i&Zt))try{return this.#H(this.#t.lstatSync(this.fullpath())),this}catch(t){this.#D(t.code)}}#H(t){let{atime:e,atimeMs:i,birthtime:n,birthtimeMs:r,blksize:o,blocks:a,ctime:l,ctimeMs:c,dev:h,gid:f,ino:d,mode:p,mtime:x,mtimeMs:w,nlink:m,rdev:E,size:v,uid:_}=t;this.#C=e,this.#g=i,this.#v=n,this.#u=r,this.#f=o,this.#n=a,this.#O=l,this.#d=c,this.#e=h,this.#S=f,this.#a=d,this.#r=p,this.#m=x,this.#w=w,this.#s=m,this.#c=E,this.#l=v,this.#o=_;let O=Xn(t);this.#i=this.#i&Di|O|xa,O!==Ut&&O!==se&&O!==Ye&&(this.#i|=zi)}#G=[];#k=!1;#Y(t){this.#k=!1;let e=this.#G.slice();this.#G.length=0,e.forEach(i=>i(null,t))}readdirCB(t,e=!1){if(!this.canReaddir()){e?t(null,[]):queueMicrotask(()=>t(null,[]));return}let i=this.children();if(this.calledReaddir()){let r=i.slice(0,i.provisional);e?t(null,r):queueMicrotask(()=>t(null,r));return}if(this.#G.push(t),this.#k)return;this.#k=!0;let n=this.fullpath();this.#t.readdir(n,{withFileTypes:!0},(r,o)=>{if(r)this.#L(r.code),i.provisional=0;else{for(let a of o)this.#W(a,i);this.#I(i)}this.#Y(i.slice(0,i.provisional))})}#U;async readdir(){if(!this.canReaddir())return[];let t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);let e=this.fullpath();if(this.#U)await this.#U;else{let i=()=>{};this.#U=new Promise(n=>i=n);try{for(let n of await this.#t.promises.readdir(e,{withFileTypes:!0}))this.#W(n,t);this.#I(t)}catch(n){this.#L(n.code),t.provisional=0}this.#U=void 0,i()}return t.slice(0,t.provisional)}readdirSync(){if(!this.canReaddir())return[];let t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);let e=this.fullpath();try{for(let i of this.#t.readdirSync(e,{withFileTypes:!0}))this.#W(i,t);this.#I(t)}catch(i){this.#L(i.code),t.provisional=0}return t.slice(0,t.provisional)}canReaddir(){if(this.#i&Ea)return!1;let t=Bt&this.#i;return t===Ut||t===se||t===Ye}shouldWalk(t,e){return(this.#i&se)===se&&!(this.#i&Ea)&&!t.has(this)&&(!e||e(this))}async realpath(){if(this.#T)return this.#T;if(!((Ms|js|Zt)&this.#i))try{let t=await this.#t.promises.realpath(this.fullpath());return this.#T=this.resolve(t)}catch{this.#$()}}realpathSync(){if(this.#T)return this.#T;if(!((Ms|js|Zt)&this.#i))try{let t=this.#t.realpathSync(this.fullpath());return this.#T=this.resolve(t)}catch{this.#$()}}[Ma](t){if(t===this)return;t.isCWD=!1,this.isCWD=!0;let e=new Set([]),i=[],n=this;for(;n&&n.parent;)e.add(n),n.#F=i.join(this.sep),n.#A=i.join("/"),n=n.parent,i.push("..");for(n=t;n&&n.parent&&!e.has(n);)n.#F=void 0,n.#A=void 0,n=n.parent}},Ns=class s extends xt{sep="\\";splitSep=Eh;constructor(t,e=Ut,i,n,r,o,a){super(t,e,i,n,r,o,a)}newChild(t,e=Ut,i={}){return new s(t,e,this.root,this.roots,this.nocase,this.childrenCache(),i)}getRootString(t){return li.win32.parse(t).root}getRoot(t){if(t=xh(t.toUpperCase()),t===this.root.name)return this.root;for(let[e,i]of Object.entries(this.roots))if(this.sameRoot(t,e))return this.roots[t]=i;return this.roots[t]=new ci(t,this).root}sameRoot(t,e=this.root.name){return t=t.toUpperCase().replace(/\//g,"\\").replace(_a,"$1\\"),t===e}},Ps=class s extends xt{splitSep="/";sep="/";constructor(t,e=Ut,i,n,r,o,a){super(t,e,i,n,r,o,a)}getRootString(t){return t.startsWith("/")?"/":""}getRoot(t){return this.root}newChild(t,e=Ut,i={}){return new s(t,e,this.root,this.roots,this.nocase,this.childrenCache(),i)}},Ls=class{root;rootPath;roots;cwd;#t;#e;#r;nocase;#s;constructor(t=process.cwd(),e,i,{nocase:n,childrenCacheSize:r=16*1024,fs:o=Wi}={}){this.#s=Aa(o),(t instanceof URL||t.startsWith("file://"))&&(t=(0,va.fileURLToPath)(t));let a=e.resolve(t);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#t=new Is,this.#e=new Is,this.#r=new tr(r);let l=a.substring(this.rootPath.length).split(i);if(l.length===1&&!l[0]&&l.pop(),n===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=n,this.root=this.newRoot(this.#s),this.roots[this.rootPath]=this.root;let c=this.root,h=l.length-1,f=e.sep,d=this.rootPath,p=!1;for(let x of l){let w=h--;c=c.child(x,{relative:new Array(w).fill("..").join(f),relativePosix:new Array(w).fill("..").join("/"),fullpath:d+=(p?"":f)+x}),p=!0}this.cwd=c}depth(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.depth()}childrenCache(){return this.#r}resolve(...t){let e="";for(let r=t.length-1;r>=0;r--){let o=t[r];if(!(!o||o===".")&&(e=e?`${o}/${e}`:o,this.isAbsolute(o)))break}let i=this.#t.get(e);if(i!==void 0)return i;let n=this.cwd.resolve(e).fullpath();return this.#t.set(e,n),n}resolvePosix(...t){let e="";for(let r=t.length-1;r>=0;r--){let o=t[r];if(!(!o||o===".")&&(e=e?`${o}/${e}`:o,this.isAbsolute(o)))break}let i=this.#e.get(e);if(i!==void 0)return i;let n=this.cwd.resolve(e).fullpathPosix();return this.#e.set(e,n),n}relative(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.relative()}relativePosix(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.relativePosix()}basename(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.name}dirname(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),(t.parent||t).fullpath()}async readdir(t=this.cwd,e={withFileTypes:!0}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t,t=this.cwd);let{withFileTypes:i}=e;if(t.canReaddir()){let n=await t.readdir();return i?n:n.map(r=>r.name)}else return[]}readdirSync(t=this.cwd,e={withFileTypes:!0}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t,t=this.cwd);let{withFileTypes:i=!0}=e;return t.canReaddir()?i?t.readdirSync():t.readdirSync().map(n=>n.name):[]}async lstat(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.lstat()}lstatSync(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.lstatSync()}async readlink(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t.withFileTypes,t=this.cwd);let i=await t.readlink();return e?i:i==null?void 0:i.fullpath()}readlinkSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t.withFileTypes,t=this.cwd);let i=t.readlinkSync();return e?i:i==null?void 0:i.fullpath()}async realpath(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t.withFileTypes,t=this.cwd);let i=await t.realpath();return e?i:i==null?void 0:i.fullpath()}realpathSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t.withFileTypes,t=this.cwd);let i=t.realpathSync();return e?i:i==null?void 0:i.fullpath()}async walk(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=[];(!r||r(t))&&a.push(i?t:t.fullpath());let l=new Set,c=(f,d)=>{l.add(f),f.readdirCB((p,x)=>{if(p)return d(p);let w=x.length;if(!w)return d();let m=()=>{--w===0&&d()};for(let E of x)(!r||r(E))&&a.push(i?E:E.fullpath()),n&&E.isSymbolicLink()?E.realpath().then(v=>v!=null&&v.isUnknown()?v.lstat():v).then(v=>v!=null&&v.shouldWalk(l,o)?c(v,m):m()):E.shouldWalk(l,o)?c(E,m):m()},!0)},h=t;return new Promise((f,d)=>{c(h,p=>{if(p)return d(p);f(a)})})}walkSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=[];(!r||r(t))&&a.push(i?t:t.fullpath());let l=new Set([t]);for(let c of l){let h=c.readdirSync();for(let f of h){(!r||r(f))&&a.push(i?f:f.fullpath());let d=f;if(f.isSymbolicLink()){if(!(n&&(d=f.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(l,o)&&l.add(d)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(t=this.cwd,e={}){return typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t,t=this.cwd),this.stream(t,e)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:r,walkFilter:o}=e;(!r||r(t))&&(yield i?t:t.fullpath());let a=new Set([t]);for(let l of a){let c=l.readdirSync();for(let h of c){(!r||r(h))&&(yield i?h:h.fullpath());let f=h;if(h.isSymbolicLink()){if(!(n&&(f=h.realpathSync())))continue;f.isUnknown()&&f.lstatSync()}f.shouldWalk(a,o)&&a.add(f)}}}stream(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=new Oe({objectMode:!0});(!r||r(t))&&a.write(i?t:t.fullpath());let l=new Set,c=[t],h=0,f=()=>{let d=!1;for(;!d;){let p=c.shift();if(!p){h===0&&a.end();return}h++,l.add(p);let x=(m,E,v=!1)=>{if(m)return a.emit("error",m);if(n&&!v){let _=[];for(let O of E)O.isSymbolicLink()&&_.push(O.realpath().then(T=>T!=null&&T.isUnknown()?T.lstat():T));if(_.length){Promise.all(_).then(()=>x(null,E,!0));return}}for(let _ of E)_&&(!r||r(_))&&(a.write(i?_:_.fullpath())||(d=!0));h--;for(let _ of E){let O=_.realpathCached()||_;O.shouldWalk(l,o)&&c.push(O)}d&&!a.flowing?a.once("drain",f):w||f()},w=!0;p.readdirCB(x,!0),w=!1}};return f(),a}streamSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=new Oe({objectMode:!0}),l=new Set;(!r||r(t))&&a.write(i?t:t.fullpath());let c=[t],h=0,f=()=>{let d=!1;for(;!d;){let p=c.shift();if(!p){h===0&&a.end();return}h++,l.add(p);let x=p.readdirSync();for(let w of x)(!r||r(w))&&(a.write(i?w:w.fullpath())||(d=!0));h--;for(let w of x){let m=w;if(w.isSymbolicLink()){if(!(n&&(m=w.realpathSync())))continue;m.isUnknown()&&m.lstatSync()}m.shouldWalk(l,o)&&c.push(m)}}d&&!a.flowing&&a.once("drain",f)};return f(),a}chdir(t=this.cwd){let e=this.cwd;this.cwd=typeof t=="string"?this.cwd.resolve(t):t,this.cwd[Ma](e)}},ci=class extends Ls{sep="\\";constructor(t=process.cwd(),e={}){let{nocase:i=!0}=e;super(t,li.win32,"\\",{...e,nocase:i}),this.nocase=i;for(let n=this.cwd;n;n=n.parent)n.nocase=this.nocase}parseRootPath(t){return li.win32.parse(t).root.toUpperCase()}newRoot(t){return new Ns(this.rootPath,se,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")||t.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(t)}},hi=class extends Ls{sep="/";constructor(t=process.cwd(),e={}){let{nocase:i=!1}=e;super(t,li.posix,"/",{...e,nocase:i}),this.nocase=i}parseRootPath(t){return"/"}newRoot(t){return new Ps(this.rootPath,se,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")}},Ui=class extends hi{constructor(t=process.cwd(),e={}){let{nocase:i=!0}=e;super(t,{...e,nocase:i})}},ap=process.platform==="win32"?Ns:Ps,Ia=process.platform==="win32"?ci:process.platform==="darwin"?Ui:hi;var Oh=s=>s.length>=1,vh=s=>s.length>=1,fi=class s{#t;#e;#r;length;#s;#o;#S;#c;#f;#a;#l=!0;constructor(t,e,i,n){if(!Oh(t))throw new TypeError("empty pattern list");if(!vh(e))throw new TypeError("empty glob list");if(e.length!==t.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=t.length,i<0||i>=this.length)throw new TypeError("index out of range");if(this.#t=t,this.#e=e,this.#r=i,this.#s=n,this.#r===0){if(this.isUNC()){let[r,o,a,l,...c]=this.#t,[h,f,d,p,...x]=this.#e;c[0]===""&&(c.shift(),x.shift());let w=[r,o,a,l,""].join("/"),m=[h,f,d,p,""].join("/");this.#t=[w,...c],this.#e=[m,...x],this.length=this.#t.length}else if(this.isDrive()||this.isAbsolute()){let[r,...o]=this.#t,[a,...l]=this.#e;o[0]===""&&(o.shift(),l.shift());let c=r+"/",h=a+"/";this.#t=[c,...o],this.#e=[h,...l],this.length=this.#t.length}}}pattern(){return this.#t[this.#r]}isString(){return typeof this.#t[this.#r]=="string"}isGlobstar(){return this.#t[this.#r]===yt}isRegExp(){return this.#t[this.#r]instanceof RegExp}globString(){return this.#S=this.#S||(this.#r===0?this.isAbsolute()?this.#e[0]+this.#e.slice(1).join("/"):this.#e.join("/"):this.#e.slice(this.#r).join("/"))}hasMore(){return this.length>this.#r+1}rest(){return this.#o!==void 0?this.#o:this.hasMore()?(this.#o=new s(this.#t,this.#e,this.#r+1,this.#s),this.#o.#a=this.#a,this.#o.#f=this.#f,this.#o.#c=this.#c,this.#o):this.#o=null}isUNC(){let t=this.#t;return this.#f!==void 0?this.#f:this.#f=this.#s==="win32"&&this.#r===0&&t[0]===""&&t[1]===""&&typeof t[2]=="string"&&!!t[2]&&typeof t[3]=="string"&&!!t[3]}isDrive(){let t=this.#t;return this.#c!==void 0?this.#c:this.#c=this.#s==="win32"&&this.#r===0&&this.length>1&&typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0])}isAbsolute(){let t=this.#t;return this.#a!==void 0?this.#a:this.#a=t[0]===""&&t.length>1||this.isDrive()||this.isUNC()}root(){let t=this.#t[0];return typeof t=="string"&&this.isAbsolute()&&this.#r===0?t:""}checkFollowGlobstar(){return!(this.#r===0||!this.isGlobstar()||!this.#l)}markFollowGlobstar(){return this.#r===0||!this.isGlobstar()||!this.#l?!1:(this.#l=!1,!0)}};var Ah=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",ui=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(t,{nobrace:e,nocase:i,noext:n,noglobstar:r,platform:o=Ah}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=o,this.mmopts={dot:!0,nobrace:e,nocase:i,noext:n,noglobstar:r,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let a of t)this.add(a)}add(t){let e=new jt(t,this.mmopts);for(let i=0;i<e.set.length;i++){let n=e.set[i],r=e.globParts[i];if(!n||!r)throw new Error("invalid pattern object");for(;n[0]==="."&&r[0]===".";)n.shift(),r.shift();let o=new fi(n,r,0,this.platform),a=new jt(o.globString(),this.mmopts),l=r[r.length-1]==="**",c=o.isAbsolute();c?this.absolute.push(a):this.relative.push(a),l&&(c?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}ignored(t){let e=t.fullpath(),i=`${e}/`,n=t.relative()||".",r=`${n}/`;for(let o of this.relative)if(o.match(n)||o.match(r))return!0;for(let o of this.absolute)if(o.match(e)||o.match(i))return!0;return!1}childrenIgnored(t){let e=t.fullpath()+"/",i=(t.relative()||".")+"/";for(let n of this.relativeChildren)if(n.match(i))return!0;for(let n of this.absoluteChildren)if(n.match(e))return!0;return!1}};var er=class s{store;constructor(t=new Map){this.store=t}copy(){return new s(new Map(this.store))}hasWalked(t,e){var i;return(i=this.store.get(t.fullpath()))==null?void 0:i.has(e.globString())}storeWalked(t,e){let i=t.fullpath(),n=this.store.get(i);n?n.add(e.globString()):this.store.set(i,new Set([e.globString()]))}},ir=class{store=new Map;add(t,e,i){let n=(e?2:0)|(i?1:0),r=this.store.get(t);this.store.set(t,r===void 0?n:n&r)}entries(){return[...this.store.entries()].map(([t,e])=>[t,!!(e&2),!!(e&1)])}},sr=class{store=new Map;add(t,e){if(!t.canReaddir())return;let i=this.store.get(t);i?i.find(n=>n.globString()===e.globString())||i.push(e):this.store.set(t,[e])}get(t){let e=this.store.get(t);if(!e)throw new Error("attempting to walk unknown path");return e}entries(){return this.keys().map(t=>[t,this.store.get(t)])}keys(){return[...this.store.keys()].filter(t=>t.canReaddir())}},Gi=class s{hasWalkedCache;matches=new ir;subwalks=new sr;patterns;follow;dot;opts;constructor(t,e){this.opts=t,this.follow=!!t.follow,this.dot=!!t.dot,this.hasWalkedCache=e?e.copy():new er}processPatterns(t,e){this.patterns=e;let i=e.map(n=>[t,n]);for(let[n,r]of i){this.hasWalkedCache.storeWalked(n,r);let o=r.root(),a=r.isAbsolute()&&this.opts.absolute!==!1;if(o){n=n.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let f=r.rest();if(f)r=f;else{this.matches.add(n,!0,!1);continue}}if(n.isENOENT())continue;let l,c,h=!1;for(;typeof(l=r.pattern())=="string"&&(c=r.rest());)n=n.resolve(l),r=c,h=!0;if(l=r.pattern(),c=r.rest(),h){if(this.hasWalkedCache.hasWalked(n,r))continue;this.hasWalkedCache.storeWalked(n,r)}if(typeof l=="string"){let f=l===".."||l===""||l===".";this.matches.add(n.resolve(l),a,f);continue}else if(l===yt){(!n.isSymbolicLink()||this.follow||r.checkFollowGlobstar())&&this.subwalks.add(n,r);let f=c==null?void 0:c.pattern(),d=c==null?void 0:c.rest();if(!c||(f===""||f===".")&&!d)this.matches.add(n,a,f===""||f===".");else if(f===".."){let p=n.parent||n;d?this.hasWalkedCache.hasWalked(p,d)||this.subwalks.add(p,d):this.matches.add(p,a,!0)}}else l instanceof RegExp&&this.subwalks.add(n,r)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new s(this.opts,this.hasWalkedCache)}filterEntries(t,e){let i=this.subwalks.get(t),n=this.child();for(let r of e)for(let o of i){let a=o.isAbsolute(),l=o.pattern(),c=o.rest();l===yt?n.testGlobstar(r,o,c,a):l instanceof RegExp?n.testRegExp(r,l,c,a):n.testString(r,l,c,a)}return n}testGlobstar(t,e,i,n){if((this.dot||!t.name.startsWith("."))&&(e.hasMore()||this.matches.add(t,n,!1),t.canReaddir()&&(this.follow||!t.isSymbolicLink()?this.subwalks.add(t,e):t.isSymbolicLink()&&(i&&e.checkFollowGlobstar()?this.subwalks.add(t,i):e.markFollowGlobstar()&&this.subwalks.add(t,e)))),i){let r=i.pattern();if(typeof r=="string"&&r!==".."&&r!==""&&r!==".")this.testString(t,r,i.rest(),n);else if(r===".."){let o=t.parent||t;this.subwalks.add(o,i)}else r instanceof RegExp&&this.testRegExp(t,r,i.rest(),n)}}testRegExp(t,e,i,n){e.test(t.name)&&(i?this.subwalks.add(t,i):this.matches.add(t,n,!1))}testString(t,e,i,n){t.isNamed(e)&&(i?this.subwalks.add(t,i):this.matches.add(t,n,!1))}};var _h=(s,t)=>typeof s=="string"?new ui([s],t):Array.isArray(s)?new ui(s,t):s,Ds=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#t=[];#e;#r;signal;maxDepth;includeChildMatches;constructor(t,e,i){if(this.patterns=t,this.path=e,this.opts=i,this.#r=!i.posix&&i.platform==="win32"?"\\":"/",this.includeChildMatches=i.includeChildMatches!==!1,(i.ignore||!this.includeChildMatches)&&(this.#e=_h(i.ignore??[],i),!this.includeChildMatches&&typeof this.#e.add!="function")){let n="cannot ignore child matches, ignore lacks add() method.";throw new Error(n)}this.maxDepth=i.maxDepth||1/0,i.signal&&(this.signal=i.signal,this.signal.addEventListener("abort",()=>{this.#t.length=0}))}#s(t){var e,i;return this.seen.has(t)||!!((i=(e=this.#e)==null?void 0:e.ignored)!=null&&i.call(e,t))}#o(t){var e,i;return!!((i=(e=this.#e)==null?void 0:e.childrenIgnored)!=null&&i.call(e,t))}pause(){this.paused=!0}resume(){var e;if((e=this.signal)!=null&&e.aborted)return;this.paused=!1;let t;for(;!this.paused&&(t=this.#t.shift());)t()}onResume(t){var e;(e=this.signal)!=null&&e.aborted||(this.paused?this.#t.push(t):t())}async matchCheck(t,e){if(e&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=t.realpathCached()||await t.realpath(),!i)return;t=i}let r=t.isUnknown()||this.opts.stat?await t.lstat():t;if(this.opts.follow&&this.opts.nodir&&(r!=null&&r.isSymbolicLink())){let o=await r.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(r,e)}matchCheckTest(t,e){var i;return t&&(this.maxDepth===1/0||t.depth()<=this.maxDepth)&&(!e||t.canReaddir())&&(!this.opts.nodir||!t.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!t.isSymbolicLink()||!((i=t.realpathCached())!=null&&i.isDirectory()))&&!this.#s(t)?t:void 0}matchCheckSync(t,e){if(e&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=t.realpathCached()||t.realpathSync(),!i)return;t=i}let r=t.isUnknown()||this.opts.stat?t.lstatSync():t;if(this.opts.follow&&this.opts.nodir&&(r!=null&&r.isSymbolicLink())){let o=r.realpathSync();o&&(o!=null&&o.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(r,e)}matchFinish(t,e){var r;if(this.#s(t))return;if(!this.includeChildMatches&&((r=this.#e)!=null&&r.add)){let o=`${t.relativePosix()}/**`;this.#e.add(o)}let i=this.opts.absolute===void 0?e:this.opts.absolute;this.seen.add(t);let n=this.opts.mark&&t.isDirectory()?this.#r:"";if(this.opts.withFileTypes)this.matchEmit(t);else if(i){let o=this.opts.posix?t.fullpathPosix():t.fullpath();this.matchEmit(o+n)}else{let o=this.opts.posix?t.relativePosix():t.relative(),a=this.opts.dotRelative&&!o.startsWith(".."+this.#r)?"."+this.#r:"";this.matchEmit(o?a+o+n:"."+n)}}async match(t,e,i){let n=await this.matchCheck(t,i);n&&this.matchFinish(n,e)}matchSync(t,e,i){let n=this.matchCheckSync(t,i);n&&this.matchFinish(n,e)}walkCB(t,e,i){var n;(n=this.signal)!=null&&n.aborted&&i(),this.walkCB2(t,e,new Gi(this.opts),i)}walkCB2(t,e,i,n){var a;if(this.#o(t))return n();if((a=this.signal)!=null&&a.aborted&&n(),this.paused){this.onResume(()=>this.walkCB2(t,e,i,n));return}i.processPatterns(t,e);let r=1,o=()=>{--r===0&&n()};for(let[l,c,h]of i.matches.entries())this.#s(l)||(r++,this.match(l,c,h).then(()=>o()));for(let l of i.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;r++;let c=l.readdirCached();l.calledReaddir()?this.walkCB3(l,c,i,o):l.readdirCB((h,f)=>this.walkCB3(l,f,i,o),!0)}o()}walkCB3(t,e,i,n){i=i.filterEntries(t,e);let r=1,o=()=>{--r===0&&n()};for(let[a,l,c]of i.matches.entries())this.#s(a)||(r++,this.match(a,l,c).then(()=>o()));for(let[a,l]of i.subwalks.entries())r++,this.walkCB2(a,l,i.child(),o);o()}walkCBSync(t,e,i){var n;(n=this.signal)!=null&&n.aborted&&i(),this.walkCB2Sync(t,e,new Gi(this.opts),i)}walkCB2Sync(t,e,i,n){var a;if(this.#o(t))return n();if((a=this.signal)!=null&&a.aborted&&n(),this.paused){this.onResume(()=>this.walkCB2Sync(t,e,i,n));return}i.processPatterns(t,e);let r=1,o=()=>{--r===0&&n()};for(let[l,c,h]of i.matches.entries())this.#s(l)||this.matchSync(l,c,h);for(let l of i.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;r++;let c=l.readdirSync();this.walkCB3Sync(l,c,i,o)}o()}walkCB3Sync(t,e,i,n){i=i.filterEntries(t,e);let r=1,o=()=>{--r===0&&n()};for(let[a,l,c]of i.matches.entries())this.#s(a)||this.matchSync(a,l,c);for(let[a,l]of i.subwalks.entries())r++,this.walkCB2Sync(a,l,i.child(),o);o()}},ki=class extends Ds{matches=new Set;constructor(t,e,i){super(t,e,i)}matchEmit(t){this.matches.add(t)}async walk(){var t;if((t=this.signal)!=null&&t.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,i)=>{this.walkCB(this.path,this.patterns,()=>{var n;(n=this.signal)!=null&&n.aborted?i(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){var t;if((t=this.signal)!=null&&t.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{var e;if((e=this.signal)!=null&&e.aborted)throw this.signal.reason}),this.matches}},Hi=class extends Ds{results;constructor(t,e,i){super(t,e,i),this.results=new Oe({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(t){this.results.write(t),this.results.flowing||this.pause()}stream(){let t=this.path;return t.isUnknown()?t.lstat().then(()=>{this.walkCB(t,this.patterns,()=>this.results.end())}):this.walkCB(t,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var $h=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Qt=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(t,e){if(!e)throw new TypeError("glob options required");if(this.withFileTypes=!!e.withFileTypes,this.signal=e.signal,this.follow=!!e.follow,this.dot=!!e.dot,this.dotRelative=!!e.dotRelative,this.nodir=!!e.nodir,this.mark=!!e.mark,e.cwd?(e.cwd instanceof URL||e.cwd.startsWith("file://"))&&(e.cwd=(0,Na.fileURLToPath)(e.cwd)):this.cwd="",this.cwd=e.cwd||"",this.root=e.root,this.magicalBraces=!!e.magicalBraces,this.nobrace=!!e.nobrace,this.noext=!!e.noext,this.realpath=!!e.realpath,this.absolute=e.absolute,this.includeChildMatches=e.includeChildMatches!==!1,this.noglobstar=!!e.noglobstar,this.matchBase=!!e.matchBase,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:1/0,this.stat=!!e.stat,this.ignore=e.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof t=="string"&&(t=[t]),this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(t=t.map(l=>l.replace(/\\/g,"/"))),this.matchBase){if(e.noglobstar)throw new TypeError("base matching requires globstar");t=t.map(l=>l.includes("/")?l:`./**/${l}`)}if(this.pattern=t,this.platform=e.platform||$h,this.opts={...e,platform:this.platform},e.scurry){if(this.scurry=e.scurry,e.nocase!==void 0&&e.nocase!==e.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let l=e.platform==="win32"?ci:e.platform==="darwin"?Ui:e.platform?hi:Ia;this.scurry=new l(this.cwd,{nocase:e.nocase,fs:e.fs})}this.nocase=this.scurry.nocase;let i=this.platform==="darwin"||this.platform==="win32",n={...e,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:i,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},r=this.pattern.map(l=>new jt(l,n)),[o,a]=r.reduce((l,c)=>(l[0].push(...c.set),l[1].push(...c.globParts),l),[[],[]]);this.patterns=o.map((l,c)=>{let h=a[c];if(!h)throw new Error("invalid pattern object");return new fi(l,h,0,this.platform)})}async walk(){return[...await new ki(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new ki(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Hi(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Hi(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var nr=(s,t={})=>{Array.isArray(s)||(s=[s]);for(let e of s)if(new jt(e,t).hasMagic())return!0;return!1};function Ws(s,t={}){return new Qt(s,t).streamSync()}function La(s,t={}){return new Qt(s,t).stream()}function Da(s,t={}){return new Qt(s,t).walkSync()}async function Pa(s,t={}){return new Qt(s,t).walk()}function zs(s,t={}){return new Qt(s,t).iterateSync()}function Wa(s,t={}){return new Qt(s,t).iterate()}var Fh=Ws,Th=Object.assign(La,{sync:Ws}),jh=zs,Rh=Object.assign(Wa,{sync:zs}),Mh=Object.assign(Da,{stream:Ws,iterate:zs}),At=Object.assign(Pa,{glob:Pa,globSync:Da,sync:Mh,globStream:La,stream:Th,globStreamSync:Ws,streamSync:Fh,globIterate:Wa,iterate:Rh,globIterateSync:zs,iterateSync:jh,Glob:Qt,hasMagic:nr,escape:si,unescape:Kt});At.glob=At;var di=k(require("fs"),1),za=k(require("path"),1);function Ae(s){di.default.existsSync(s)||(di.default.mkdirSync(s,{recursive:!0}),S.debug(`Created directory: ${s}`))}function fe(s,t){Ae(za.default.dirname(s)),di.default.writeFileSync(s,t),S.debug(`Created file: ${s}`)}function Bs(s){di.default.existsSync(s)||(di.default.mkdirSync(s,{recursive:!0}),S.debug(`Created directory: ${s}`))}var rr=k(require("fs"),1),Ba=k(require("path"),1);var _e=["**/node_modules/**","**/.git/**",".git",".git/**/*","_git/**/*"];function Us(s="."){let t=[..._e],e=Ba.default.join(s,".gitignore");if(rr.default.existsSync(e))try{let n=rr.default.readFileSync(e,"utf-8").split(`
`).map(r=>r.trim()).filter(r=>r&&!r.startsWith("#")).map(r=>r.startsWith("/")?r.slice(1):r.endsWith("/")?`${r}**`:r.startsWith("*")?r:`**/${r}`);t.push(...n)}catch(i){S.debug(`Error reading .gitignore: ${i.message}`)}return t}async function $e(s="."){Bs(or.default.join(s,Dn));let t=Us(),e=await At("**/*",{cwd:s,dot:!0,nodir:!0,ignore:_e}),i={};for(let r of e)if(!t.some(a=>dt(r,a,{dot:!0}))){let a=or.default.join(s,r);i[r]=Yi.default.readFileSync(a,"utf-8")||""}let n=$i("snapshot.json");return Yi.default.writeFileSync(n,JSON.stringify(i,null,2)),S.debug(`Created repository snapshot with ${Object.keys(i).length} files`),i}function Gs(s="."){let t=$i("snapshot.json");return Yi.default.existsSync(t)?JSON.parse(Yi.default.readFileSync(t,"utf-8")):{}}async function ks(s,t,e={}){S.info(`Initializing repository ${s}/${t}...`),await xe(s,t),Bs("_git");let i=e.commit||await xs(s,t);S.info(`Target commit: ${i}`);let n={remote:{origin:{owner:s,repo:t,url:`https://github.com/${s}/${t}.git`}},lastCommit:i};return Vt(n),await $e("."),{commitHash:i}}var Ua=k(require("path"),1);async function Hs(s){try{S.info("Starting clone operation..."),Wt();let{owner:t,repo:e}=bs(s.repo,{checkExists:!0});await Ih(t,e),S.success(`\u2713 Repository ${t}/${e} cloned successfully!`),S.info(`Directory: ${e}`)}catch(t){S.error(`Clone failed: ${t.message}`),S.debug(`Stack trace: ${t.stack}`),process.exit(1)}}async function Ih(s,t){S.info(`Cloning ${s}/${t}...`),await xe(s,t),Ae(t);let e=process.cwd();try{process.chdir(t),await ks(s,t),await Ga(s,t)}catch(i){throw S.error(`Failed to download contents: ${i.message}`),i}finally{process.chdir(e)}}async function Ga(s,t,e=""){let i=await Ln(s,t,e);for(let n of i){let r=Ua.default.join(e,n.name);S.debug(`Processing: ${r}`),n.type==="dir"?(Ae(r),await Ga(s,t,r)):n.type==="file"&&n.content&&fe(r,n.content)}}var Vs=k(require("fs"),1);function ka(){let t=Ot().lastCommit;return t?{hash:t,shortHash:t.substring(0,7)}:null}var qs=k(require("fs"),1),Ya=k(require("path"),1);function Ha(s){return s.replace(/[.+^${}()|[\]\\]/g,"\\$&")}var Ys={patterns:null,mtime:0};function ue(s="."){let t=[..._e],e=Ya.default.join(s,".gitignore");if(qs.default.existsSync(e))try{let i=qs.default.statSync(e);i.mtimeMs>Ys.mtime&&(Ys={patterns:qs.default.readFileSync(e,"utf-8").split(`
`).map(o=>o.trim()).filter(o=>o&&!o.startsWith("#")).map(Nh),mtime:i.mtimeMs}),Ys.patterns&&t.push(...Ys.patterns)}catch(i){S.debug(`Error reading .gitignore: ${i.message}`)}return t}function Nh(s){return s.startsWith("/")&&(s=s.slice(1)),s.endsWith("/")&&(s=`${s}**`),!s.startsWith("*")&&!s.startsWith("/")&&(s=`**/${s}`),Ha(s)}function pi(s,t){if(!s)return!1;let e=s.replace(/\\/g,"/");return t.some(i=>dt(e,i,{dot:!0,matchBase:!0,nocase:!0}))}function qa(s){if(!s){console.log(Z.yellow(`
No commits yet`));return}console.log(Z.blue(`
On commit: ${s.shortHash}`))}async function Va(){try{let s=ys();if(!Vs.default.existsSync(s))throw new Error("Not a git repository");let t=JSON.parse(Vs.default.readFileSync(s,"utf-8")),e=Object.keys(t),i=ue(),n=await At("**/*",{dot:!0,nodir:!0,ignore:i}),r=[],o=[],a=[];for(let c of e)n.includes(c)?Vs.default.readFileSync(c,"utf-8")!==t[c]&&r.push(c):a.push(c);for(let c of n)e.includes(c)||o.push(c);let l=ka();if(qa(l),r.length===0&&o.length===0&&a.length===0){console.log(Z.green(`
Working tree clean`));return}r.length>0&&(console.log(Z.bold(`
Modified files:`)),r.forEach(c=>console.log(Z.red(`  ${c}`)))),o.length>0&&(console.log(Z.bold(`
New files:`)),o.forEach(c=>console.log(Z.green(`  ${c}`)))),a.length>0&&(console.log(Z.bold(`
Deleted files:`)),a.forEach(c=>console.log(Z.red(`  ${c}`)))),console.log()}catch(s){S.error(`Status failed: ${s.message}`),process.exit(1)}}var ur=k(require("fs"),1);function de(){}de.prototype={diff:function(t,e){var i,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.callback;typeof n=="function"&&(r=n,n={}),this.options=n;var o=this;function a(O){return r?(setTimeout(function(){r(void 0,O)},0),!0):O}t=this.castInput(t),e=this.castInput(e),t=this.removeEmpty(this.tokenize(t)),e=this.removeEmpty(this.tokenize(e));var l=e.length,c=t.length,h=1,f=l+c;n.maxEditLength&&(f=Math.min(f,n.maxEditLength));var d=(i=n.timeout)!==null&&i!==void 0?i:1/0,p=Date.now()+d,x=[{oldPos:-1,lastComponent:void 0}],w=this.extractCommon(x[0],e,t,0);if(x[0].oldPos+1>=c&&w+1>=l)return a([{value:this.join(e),count:e.length}]);var m=-1/0,E=1/0;function v(){for(var O=Math.max(m,-h);O<=Math.min(E,h);O+=2){var T=void 0,H=x[O-1],q=x[O+1];H&&(x[O-1]=void 0);var at=!1;if(q){var J=q.oldPos-O;at=q&&0<=J&&J<l}var G=H&&H.oldPos+1<c;if(!at&&!G){x[O]=void 0;continue}if(!G||at&&H.oldPos+1<q.oldPos?T=o.addToPath(q,!0,void 0,0):T=o.addToPath(H,void 0,!0,1),w=o.extractCommon(T,e,t,O),T.oldPos+1>=c&&w+1>=l)return a(Ph(o,T.lastComponent,e,t,o.useLongestToken));x[O]=T,T.oldPos+1>=c&&(E=Math.min(E,O-1)),w+1>=l&&(m=Math.max(m,O+1))}h++}if(r)(function O(){setTimeout(function(){if(h>f||Date.now()>p)return r();v()||O()},0)})();else for(;h<=f&&Date.now()<=p;){var _=v();if(_)return _}},addToPath:function(t,e,i,n){var r=t.lastComponent;return r&&r.added===e&&r.removed===i?{oldPos:t.oldPos+n,lastComponent:{count:r.count+1,added:e,removed:i,previousComponent:r.previousComponent}}:{oldPos:t.oldPos+n,lastComponent:{count:1,added:e,removed:i,previousComponent:r}}},extractCommon:function(t,e,i,n){for(var r=e.length,o=i.length,a=t.oldPos,l=a-n,c=0;l+1<r&&a+1<o&&this.equals(e[l+1],i[a+1]);)l++,a++,c++;return c&&(t.lastComponent={count:c,previousComponent:t.lastComponent}),t.oldPos=a,l},equals:function(t,e){return this.options.comparator?this.options.comparator(t,e):t===e||this.options.ignoreCase&&t.toLowerCase()===e.toLowerCase()},removeEmpty:function(t){for(var e=[],i=0;i<t.length;i++)t[i]&&e.push(t[i]);return e},castInput:function(t){return t},tokenize:function(t){return t.split("")},join:function(t){return t.join("")}};function Ph(s,t,e,i,n){for(var r=[],o;t;)r.push(t),o=t.previousComponent,delete t.previousComponent,t=o;r.reverse();for(var a=0,l=r.length,c=0,h=0;a<l;a++){var f=r[a];if(f.removed){if(f.value=s.join(i.slice(h,h+f.count)),h+=f.count,a&&r[a-1].added){var p=r[a-1];r[a-1]=r[a],r[a]=p}}else{if(!f.added&&n){var d=e.slice(c,c+f.count);d=d.map(function(w,m){var E=i[h+m];return E.length>w.length?E:w}),f.value=s.join(d)}else f.value=s.join(e.slice(c,c+f.count));c+=f.count,f.added||(h+=f.count)}}var x=r[l-1];return l>1&&typeof x.value=="string"&&(x.added||x.removed)&&s.equals("",x.value)&&(r[l-2].value+=x.value,r.pop()),r}var Tm=new de;var Ka=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Ja=/\S/,Za=new de;Za.equals=function(s,t){return this.options.ignoreCase&&(s=s.toLowerCase(),t=t.toLowerCase()),s===t||this.options.ignoreWhitespace&&!Ja.test(s)&&!Ja.test(t)};Za.tokenize=function(s){for(var t=s.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),e=0;e<t.length-1;e++)!t[e+1]&&t[e+2]&&Ka.test(t[e])&&Ka.test(t[e+2])&&(t[e]+=t[e+2],t.splice(e+1,2),e--);return t};var fr=new de;fr.tokenize=function(s){this.options.stripTrailingCr&&(s=s.replace(/\r\n/g,`
`));var t=[],e=s.split(/(\n|\r\n)/);e[e.length-1]||e.pop();for(var i=0;i<e.length;i++){var n=e[i];i%2&&!this.options.newlineIsToken?t[t.length-1]+=n:(this.options.ignoreWhitespace&&(n=n.trim()),t.push(n))}return t};function Lh(s,t,e){return fr.diff(s,t,e)}var Dh=new de;Dh.tokenize=function(s){return s.split(/(\S.+?[.!?])(?=\s+|$)/)};var Wh=new de;Wh.tokenize=function(s){return s.split(/([{}:;,]|\s+)/)};function Ks(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ks=function(t){return typeof t}:Ks=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ks(s)}function ar(s){return zh(s)||Bh(s)||Uh(s)||Gh()}function zh(s){if(Array.isArray(s))return lr(s)}function Bh(s){if(typeof Symbol<"u"&&Symbol.iterator in Object(s))return Array.from(s)}function Uh(s,t){if(s){if(typeof s=="string")return lr(s,t);var e=Object.prototype.toString.call(s).slice(8,-1);if(e==="Object"&&s.constructor&&(e=s.constructor.name),e==="Map"||e==="Set")return Array.from(s);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return lr(s,t)}}function lr(s,t){(t==null||t>s.length)&&(t=s.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=s[e];return i}function Gh(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var kh=Object.prototype.toString,qi=new de;qi.useLongestToken=!0;qi.tokenize=fr.tokenize;qi.castInput=function(s){var t=this.options,e=t.undefinedReplacement,i=t.stringifyReplacer,n=i===void 0?function(r,o){return typeof o>"u"?e:o}:i;return typeof s=="string"?s:JSON.stringify(cr(s,null,null,n),n,"  ")};qi.equals=function(s,t){return de.prototype.equals.call(qi,s.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function cr(s,t,e,i,n){t=t||[],e=e||[],i&&(s=i(n,s));var r;for(r=0;r<t.length;r+=1)if(t[r]===s)return e[r];var o;if(kh.call(s)==="[object Array]"){for(t.push(s),o=new Array(s.length),e.push(o),r=0;r<s.length;r+=1)o[r]=cr(s[r],t,e,i,n);return t.pop(),e.pop(),o}if(s&&s.toJSON&&(s=s.toJSON()),Ks(s)==="object"&&s!==null){t.push(s),o={},e.push(o);var a=[],l;for(l in s)s.hasOwnProperty(l)&&a.push(l);for(a.sort(),r=0;r<a.length;r+=1)l=a[r],o[l]=cr(s[l],t,e,i,l);t.pop(),e.pop()}else o=s;return o}var hr=new de;hr.tokenize=function(s){return s.slice()};hr.join=hr.removeEmpty=function(s){return s};function Hh(s,t,e,i,n,r,o){o||(o={}),typeof o.context>"u"&&(o.context=4);var a=Lh(e,i,o);if(!a)return;a.push({value:"",lines:[]});function l(E){return E.map(function(v){return" "+v})}for(var c=[],h=0,f=0,d=[],p=1,x=1,w=function(v){var _=a[v],O=_.lines||_.value.replace(/\n$/,"").split(`
`);if(_.lines=O,_.added||_.removed){var T;if(!h){var H=a[v-1];h=p,f=x,H&&(d=o.context>0?l(H.lines.slice(-o.context)):[],h-=d.length,f-=d.length)}(T=d).push.apply(T,ar(O.map(function(B){return(_.added?"+":"-")+B}))),_.added?x+=O.length:p+=O.length}else{if(h)if(O.length<=o.context*2&&v<a.length-2){var q;(q=d).push.apply(q,ar(l(O)))}else{var at,J=Math.min(O.length,o.context);(at=d).push.apply(at,ar(l(O.slice(0,J))));var G={oldStart:h,oldLines:p-h+J,newStart:f,newLines:x-f+J,lines:d};if(v>=a.length-2&&O.length<=o.context){var I=/\n$/.test(e),$=/\n$/.test(i),j=O.length==0&&d.length>G.oldLines;!I&&j&&e.length>0&&d.splice(G.oldLines,0,"\\ No newline at end of file"),(!I&&!j||!$)&&d.push("\\ No newline at end of file")}c.push(G),h=0,f=0,d=[]}p+=O.length,x+=O.length}},m=0;m<a.length;m++)w(m);return{oldFileName:s,newFileName:t,oldHeader:n,newHeader:r,hunks:c}}function Qa(s){if(Array.isArray(s))return s.map(Qa).join(`
`);var t=[];s.oldFileName==s.newFileName&&t.push("Index: "+s.oldFileName),t.push("==================================================================="),t.push("--- "+s.oldFileName+(typeof s.oldHeader>"u"?"":"	"+s.oldHeader)),t.push("+++ "+s.newFileName+(typeof s.newHeader>"u"?"":"	"+s.newHeader));for(var e=0;e<s.hunks.length;e++){var i=s.hunks[e];i.oldLines===0&&(i.oldStart-=1),i.newLines===0&&(i.newStart-=1),t.push("@@ -"+i.oldStart+","+i.oldLines+" +"+i.newStart+","+i.newLines+" @@"),t.push.apply(t,i.lines)}return t.join(`
`)+`
`}function Yh(s,t,e,i,n,r,o){return Qa(Hh(s,t,e,i,n,r,o))}function Xa(s,t,e,i,n,r){return Yh(s,s,t,e,i,n,r)}var Js=k(require("fs"),1);function Zs(s,t){return pi(s,t)}function mi(s,t){if(!s)return;let e=t[s]??"";if(Js.default.existsSync(s)){if(!Js.default.statSync(s).isFile())return;let n=Js.default.readFileSync(s,"utf-8");if(!(s in t)&&n===""){console.log(Z.green(`
New empty file: ${s}`));return}if(n===e)return;let r=Xa(s,e,n);qh(s,r)}else s in t&&console.log(Z.red(`
Deleted: ${s}`))}function qh(s,t){console.log(Z.bold(`
Diff for ${s}:`)),t.split(`
`).slice(4).forEach(i=>{i.startsWith("+")?console.log(Z.green(i)):i.startsWith("-")?console.log(Z.red(i)):console.log(i)})}async function tl(s){try{let t=ys();if(!ur.default.existsSync(t))throw new Error("Not a git repository");let e=JSON.parse(ur.default.readFileSync(t,"utf-8")),i=ue();if(s.filepath)Zs(s.filepath,i)||mi(s.filepath,e);else{let n=await At("**/*",{dot:!0,nodir:!0,ignore:i}),r=[...new Set([...n,...Object.keys(e)])];for(let o of r)Zs(o,i)||mi(o,e)}}catch(t){S.error(`Diff failed: ${t.message}`),S.debug(`Stack trace: ${t.stack}`),process.exit(1)}}var el=k(require("fs"),1),il=k(require("path"),1);async function Qs(s,t){var e;try{if(Wt(),!s)throw new Error("Commit message is required");let i=Ot();if(!((e=i.remote)!=null&&e.origin))throw new Error('No remote repository configured. Use "remote add" first.');let{owner:n,repo:r}=i.remote.origin,o=t.directory||".";await xe(n,r),S.info(`Pushing to ${n}/${r}...`);let l=(await At("**/*",{cwd:o,nodir:!0,ignore:ue(o)})).map(h=>({path:h,mode:"100644",type:"blob",content:el.default.readFileSync(il.default.join(o,h),"utf-8")})),c=await Pn(n,r,s,l);Vt({...i,lastCommit:c.sha}),await $e(o),S.success(`\u2713 Code pushed to https://github.com/${n}/${r}`)}catch(i){S.error(`Push failed: ${i.message}`),process.exit(1)}}var gi=k(require("fs"),1),sl=k(require("path"),1);async function nl(s,t,e=[],i={},n=""){if(!i){S.info("No changes to process");return}let{added:r=[],modified:o=[],deleted:a=[],renamed:l=[]}=i,c=[...r,...o];if(l.length>0){S.info(`
Renaming files:`);for(let{from:h,to:f}of l)try{gi.default.existsSync(h)?(gi.default.mkdirSync(sl.default.dirname(f),{recursive:!0}),gi.default.renameSync(h,f),S.success(`\u2713 Renamed: ${h} \u2192 ${f}`)):(c.push(f),S.debug(`Source file ${h} not found, will download ${f} as new file`))}catch(d){throw S.error(`Failed to rename ${h} to ${f}: ${d.message}`),d}}if(a.length>0){S.info(`
Deleting files:`);for(let h of a)try{gi.default.existsSync(h)&&(gi.default.unlinkSync(h),S.success(`\u2713 Deleted: ${h}`))}catch(f){S.error(`Failed to delete ${h}: ${f.message}`)}}if(c.length>0){S.info(`
Downloading files:`);for(let h of c)if(!e.includes(h))try{let f=await Vh(s,t,h,n);f!==null&&(fe(h,f),S.success(`\u2713 Downloaded: ${h}`))}catch(f){S.error(`Failed to download ${h}: ${f.message}`)}}}async function Vh(s,t,e,i=""){try{let n=await _i(s,t,e,i);return n.content?Buffer.from(n.content,"base64").toString("utf-8"):n.size===0?"":null}catch(n){return S.error(`Failed to fetch file ${e}: ${n.message}`),null}}function rl(s,t){let{modified:e,deleted:i}=s;e.length>0&&(S.info(`
Modified files:`),e.forEach(n=>{S.info(Z.red(`  ${n}`)),mi(n,t)})),i.length>0&&(S.info(`
Deleted files:`),i.forEach(n=>{S.info(Z.red(`  ${n}`))}))}function Kh(s){let t={added:[],modified:[],deleted:[],renamed:[]};for(let e of s)switch(e.status){case"added":t.added.push(e.filename);break;case"modified":t.modified.push(e.filename);break;case"removed":t.deleted.push(e.filename);break;case"renamed":t.renamed.push({from:e.previous_filename,to:e.filename});break}return t}async function ol(s,t,e,i){var l;let n=Do(),r=await xs(s,t);if(S.debug(`Comparing commits: ${n} -> ${r}`),!n){S.info("No local commit found, performing full sync...");let h={added:(await _i(s,t,"",r)).filter(f=>f.type==="file").map(f=>f.path),modified:[],deleted:[]};return{remoteCommit:r,changes:h}}if(n===r)return S.info("Already up to date"),{remoteCommit:r,changes:null};let o=await Wo(s,t,n,r);S.debug(`Found ${((l=o.files)==null?void 0:l.length)||0} changed files`);let a=Kh(o.files||[]);if(i!=null&&i.length){let c=h=>!i.some(f=>f===h||f.includes(h));a.added=a.added.filter(c),a.modified=a.modified.filter(c),a.deleted=a.deleted.filter(c),a.renamed=a.renamed.filter(({from:h,to:f})=>c(h)&&c(f))}return{remoteCommit:r,changes:a}}var dr=k(require("fs"),1);function al(){var s;try{let t=Fi();if(!dr.default.existsSync(t))return null;let e=JSON.parse(dr.default.readFileSync(t,"utf-8"));return(s=e.remote)!=null&&s.origin?{owner:e.remote.origin.owner,repo:e.remote.origin.repo}:null}catch(t){return S.debug(`Error reading git config: ${t.message}`),null}}var Xs=k(require("fs"),1);async function ll(s,t){let e=await At("**/*",{dot:!0,nodir:!0,ignore:[..._e,...t]}),i=!1,n={modified:[],deleted:[]};for(let r of e)if(Xs.default.existsSync(r)){let o=Xs.default.readFileSync(r,"utf-8"),a=s[r]||"";o!==a&&n.modified.push(r)}for(let r of Object.keys(s))!Xs.default.existsSync(r)&&!t.includes(r)&&n.deleted.push(r);return i=n.modified.length>0||n.deleted.length>0,{hasChanges:i,changes:n}}async function cl(s={force:!1,dryRun:!1}){var t,e,i,n;try{Wt();let r=al();if(!r)throw new Error('No remote repository configured. Use "remote add" first.');let o=Gs(),a=Us(),{hasChanges:l,changes:c}=await ll(o,a);if(l&&!s.force)throw rl(c,o),new Error("Cannot pull with local changes. Commit or reset your changes first, or use --force to override.");let f=Ot().lastCommit;S.info(`${s.dryRun?"[DRY RUN] ":""}Pulling from ${r.owner}/${r.repo}`),S.info(`Current commit: ${f}`);let{remoteCommit:d,changes:p}=await ol(r.owner,r.repo,o,a);if(S.info(`Remote commit: ${d}`),p&&(S.info(`
Changes to pull:`),(t=p.renamed)!=null&&t.length&&(S.info(`
Renamed files:`),p.renamed.forEach(({from:x,to:w})=>S.info(`  * ${x} \u2192 ${w}`))),(e=p.added)!=null&&e.length&&(S.info(`
New files:`),p.added.forEach(x=>S.info(`  + ${x}`))),(i=p.modified)!=null&&i.length&&(S.info(`
Modified files:`),p.modified.forEach(x=>S.info(`  * ${x}`))),(n=p.deleted)!=null&&n.length&&(S.info(`
Deleted files:`),p.deleted.forEach(x=>S.info(`  - ${x}`)))),s.dryRun){S.info(`
[DRY RUN] No changes were made`);return}await nl(r.owner,r.repo,a,p),Wn({remote:{origin:{owner:r.owner,repo:r.repo,url:`https://github.com/${r.owner}/${r.repo}.git`}},lastCommit:d}),await $e("."),S.success("\u2713 Pull completed successfully")}catch(r){S.error(`Pull failed: ${r.message}`),process.exit(1)}}var hl=k(require("fs"),1);async function fl(s,t){try{if(!hl.default.existsSync("_git"))throw new Error("Not a git repository");switch(s){case"add":await Jh(t);break;case"show":await Zh();break;default:throw new Error('Invalid command. Use "add" or "show"')}}catch(e){S.error(`Remote operation failed: ${e.message}`),process.exit(1)}}async function Jh(s){if(Wt(),!s)throw new Error("Repository path required (format: owner/repo)");let[t,e]=s.split("/");if(!t||!e)throw new Error("Invalid repository format. Use owner/repo");await xe(t,e);let i={remote:{origin:{owner:t,repo:e,url:`https://github.com/${t}/${e}.git`}}};Vt(i),S.success(`\u2713 Remote origin added: ${t}/${e}`)}async function Zh(){var i;let s=Ot();if(!((i=s.remote)!=null&&i.origin)){S.info("No remote repository configured");return}let{owner:t,repo:e}=s.remote.origin;S.info(`origin	https://github.com/${t}/${e}.git (fetch)`),S.info(`origin	https://github.com/${t}/${e}.git (push)`)}var ul=k(require("fs"),1),dl=k(require("path"),1);async function pl(){try{let s="_git";if(dl.default.basename(process.cwd())===s)throw new Error("Cannot initialize git repository inside _git directory");if(ul.default.existsSync(s))throw new Error("Git repository already exists");Ae(s),Vt({}),await $e("."),S.success("Initialized empty Git repository")}catch(s){S.error(`Init failed: ${s.message}`),process.exit(1)}}var tn=k(require("fs"),1);async function ml(s,t,e){try{switch(s){case"add":await Qh(t,e.path);break;case"status":await Xh();break;case"push":await tf(t,e);break;default:throw new Error('Invalid command. Use "add", "status", or "push"')}}catch(i){S.error(`Submodule operation failed: ${i.message}`),process.exit(1)}}async function Qh(s,t){if(Wt(),!s)throw new Error("Repository path required (format: owner/repo)");let[e,i]=s.split("/");if(!e||!i)throw new Error("Invalid repository format. Use owner/repo");Ae(t);let n=process.cwd();try{process.chdir(t),await Hs(s),process.chdir(n);let r=Ot();r.submodules=r.submodules||{},r.submodules[t]={owner:e,repo:i},Vt(r),ef(t),S.success(`\u2713 Submodule added at ${t}`)}finally{process.chdir(n)}}async function Xh(){let s=Ot();if(!s.submodules||Object.keys(s.submodules).length===0){S.info("No submodules configured");return}S.info(`
Submodules:`);for(let[t,{owner:e,repo:i}]of Object.entries(s.submodules))S.info(`  ${t} -> ${e}/${i}`)}async function tf(s,t){let e=Ot();if(!e.submodules)throw new Error("No submodules configured");let i=process.cwd(),n=null;for(let[r,o]of Object.entries(e.submodules))if(`${o.owner}/${o.repo}`===s){n=r;break}if(!n)throw new Error(`Submodule ${s} not found`);try{process.chdir(n),await Qs(t.message,{directory:"."})}finally{process.chdir(i)}}function ef(s){let t=".gitignore",e="";tn.default.existsSync(t)&&(e=tn.default.readFileSync(t,"utf-8"),e&&!e.endsWith(`
`)&&(e+=`
`)),e.includes(s)||(e+=`${s}/
`,tn.default.writeFileSync(t,e),S.debug(`Updated .gitignore with ${s}`))}var wi=k(require("fs"),1);function gl(s,t){return wi.default.existsSync(s)?wi.default.readFileSync(s,"utf-8")!==t:!0}async function wl(s){try{if(!wi.default.existsSync("_git"))throw new Error("Not a git repository");let t=Gs();if(Object.keys(t).length===0)throw new Error("No snapshot found");let e=ue();s.filepath?await sf(s.filepath,t):await nf(t,e),S.success("Reset completed successfully")}catch(t){S.error(`Reset failed: ${t.message}`),S.debug(`Stack trace: ${t.stack}`),process.exit(1)}}async function sf(s,t){if(!s)return;let e=ue();if(pi(s,e)){S.debug(`Skipping ignored file: ${s}`);return}if(!(s in t))throw new Error(`File ${s} not found in snapshot`);if(!gl(s,t[s])){S.debug(`Skipping unmodified file: ${s}`);return}fe(s,t[s]),S.info(`Reset ${s}`)}async function nf(s,t){let e=await At("**/*",{dot:!0,nodir:!0,ignore:t});for(let[i,n]of Object.entries(s))pi(i,t)||(gl(i,n)?(fe(i,n),S.info(`Reset ${i}`)):S.debug(`Skipping unmodified file: ${i}`));for(let i of e)!(i in s)&&!pi(i,t)&&wi.default.existsSync(i)&&(wi.default.unlinkSync(i),S.info(`Removed ${i}`))}var pe=k(require("fs"),1),bi=k(require("path"),1),Sl=k(require("os"),1);async function pr(s,t={}){let e=`${le}${s}`,i=await fetch(e,{headers:{Authorization:`token ${process.env.GITHUB_TOKEN}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},...t});if(!i.ok){let n=await i.text();S.error(`GitHub API Error: ${i.status} ${i.statusText}`),S.debug(`Response: ${n}`);let r=new Error(`GitHub API error: ${i.status} ${i.statusText}`);throw r.status=i.status,r}return i.json()}async function bl(s,t,e,i=""){try{let n=i?`?ref=${i}`:"",r=await pr(`/repos/${s}/${t}/contents/${e}${n}`);return r.size===0?"":r.content?Buffer.from(r.content,"base64").toString("utf-8"):null}catch(n){if(n.status===404)return S.debug(`File not found: ${e}`),null;throw n}}async function yl(s,t,e="",i=""){try{let n=i?`?ref=${i}`:"",r=await pr(`/repos/${s}/${t}/contents/${e}${n}`);return Array.isArray(r)?r:[r]}catch(n){if(n.status===404)return S.debug(`Directory not found: ${e}`),[];throw n}}async function xl(s){try{S.info("Starting attach operation..."),Wt();let{owner:t,repo:e}=bs(s.repo);if(s.destructive){let n=process.cwd(),r=bi.default.basename(n);process.chdir(".."),pe.default.existsSync(r)&&(S.info(`Removing existing directory: ${r}`),pe.default.rmSync(r,{recursive:!0,force:!0})),pe.default.mkdirSync(r),process.chdir(r),S.info(`Created fresh directory: ${r}`)}let i=await rf(t,e,s);pe.default.mkdirSync("_git",{recursive:!0}),pe.default.writeFileSync("_git/snapshot.json",JSON.stringify(i,null,2)),S.success(`\u2713 Repository ${t}/${e} attached successfully!`)}catch(t){S.error(`Attach failed: ${t.message}`),S.debug(`Stack trace: ${t.stack}`),process.exit(1)}}async function rf(s,t,e){S.info(`Attaching ${s}/${t}...`);let i=pe.default.mkdtempSync(bi.default.join(Sl.default.tmpdir(),"git-attach-"));S.debug(`Created temporary directory: ${i}`);let{commitHash:n}=await ks(s,t,{commit:e.commit}),r=await El(s,t,i,"",n);return pe.default.rmSync(i,{recursive:!0,force:!0}),S.debug("Cleaned up temporary directory"),r}async function El(s,t,e,i="",n=""){S.info(`Fetching contents for ${s}/${t}/${i}`);let r=await yl(s,t,i,n),o={};for(let a of r){let l=i?bi.default.join(i,a.name):a.name,c=bi.default.join(e,l);if(a.type==="dir"){pe.default.mkdirSync(bi.default.dirname(c),{recursive:!0});let h=await El(s,t,e,l,n);Object.assign(o,h)}else if(a.type==="file"){let h=await bl(s,t,l,n);if(h===null){S.warn(`Failed to download ${l}`);continue}fe(c,h),o[l]=h,S.info(`Downloaded: ${l}`)}}return o}No();Eo(fn(process.argv)).scriptName("git").usage("$0 <cmd> [args]").command("init","Initialize a new git repository",{},pl).command("clone <repo>","Clone a repository",s=>s.positional("repo",{describe:"Repository in format owner/repo",type:"string"}),Hs).command("attach <repo>","Initialize current directory and clone repository into it",s=>s.positional("repo",{describe:"Repository in format owner/repo",type:"string"}).option("commit",{alias:"c",describe:"Specific commit hash to attach to",type:"string"}).option("destructive",{alias:"D",describe:"Remove existing directory before attaching",type:"boolean",default:!1}),xl).command("remote <command> [repo]","Manage remote repositories",s=>s.positional("command",{describe:"Command to execute (add, show)",type:"string"}).positional("repo",{describe:"Repository in format owner/repo",type:"string"}),fl).command("push <message>","Push code to remote repository",s=>s.positional("message",{describe:"Commit message",type:"string"}).option("directory",{alias:"d",describe:"Directory to push",default:".",type:"string"}),s=>Qs(s.message,{directory:s.directory})).command("pull","Pull latest changes from remote repository",s=>s.option("force",{alias:"f",describe:"Force pull even with local changes",type:"boolean",default:!1}).option("dry-run",{describe:"Show what would be pulled without making changes",type:"boolean",default:!1}),cl).command("status","Show working tree status",{},Va).command("diff [filepath]","Show changes between working tree and snapshot",s=>s.positional("filepath",{describe:"Optional file path to show diff for",type:"string"}),tl).command("reset [filepath]","Reset working tree to last snapshot",s=>s.positional("filepath",{describe:"Optional file path to reset",type:"string"}),wl).command("submodule <command> [repo]","Manage submodules",s=>s.positional("command",{describe:"Command to execute (add, init, update, status)",type:"string"}).positional("repo",{describe:"Repository in format owner/repo",type:"string"}).option("path",{alias:"p",describe:"Path where to add the submodule",default:"repo",type:"string"}),s=>ml(s.command,s.repo,{path:s.path})).demandCommand(1,"You need at least one command before moving on").strict().help().argv;
/*! Bundled license information:

yargs-parser/build/lib/string-utils.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/tokenize-arg-string.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/yargs-parser-types.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)
*/
