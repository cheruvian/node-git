#!/usr/bin/env node
var Sl=Object.create;var ur=Object.defineProperty;var xl=Object.getOwnPropertyDescriptor;var El=Object.getOwnPropertyNames;var Cl=Object.getPrototypeOf,Ol=Object.prototype.hasOwnProperty;var dr=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports);var vl=(s,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of El(t))!Ol.call(s,n)&&n!==e&&ur(s,n,{get:()=>t[n],enumerable:!(i=xl(t,n))||i.enumerable});return s};var k=(s,t,e)=>(e=s!=null?Sl(Cl(s)):{},vl(t||!s||!s.__esModule?ur(e,"default",{value:s,enumerable:!0}):e,s));var Do=dr((vd,Lo)=>{"use strict";Lo.exports=No;function No(s,t,e){s instanceof RegExp&&(s=Io(s,e)),t instanceof RegExp&&(t=Io(t,e));var i=Po(s,t,e);return i&&{start:i[0],end:i[1],pre:e.slice(0,i[0]),body:e.slice(i[0]+s.length,i[1]),post:e.slice(i[1]+t.length)}}function Io(s,t){var e=t.match(s);return e?e[0]:null}No.range=Po;function Po(s,t,e){var i,n,r,o,a,l=e.indexOf(s),h=e.indexOf(t,l+1),u=l;if(l>=0&&h>0){if(s===t)return[l,h];for(i=[],r=e.length;u>=0&&!a;)u==l?(i.push(u),l=e.indexOf(s,u+1)):i.length==1?a=[i.pop(),h]:(n=i.pop(),n<r&&(r=n,o=h),h=e.indexOf(t,u+1)),u=l<h&&l>=0?l:h;i.length&&(a=[r,o])}return a}});var Yo=dr((Ad,ko)=>{var Wo=Do();ko.exports=yh;var zo="\0SLASH"+Math.random()+"\0",Bo="\0OPEN"+Math.random()+"\0",Pn="\0CLOSE"+Math.random()+"\0",Uo="\0COMMA"+Math.random()+"\0",Go="\0PERIOD"+Math.random()+"\0";function Nn(s){return parseInt(s,10)==s?parseInt(s,10):s.charCodeAt(0)}function wh(s){return s.split("\\\\").join(zo).split("\\{").join(Bo).split("\\}").join(Pn).split("\\,").join(Uo).split("\\.").join(Go)}function bh(s){return s.split(zo).join("\\").split(Bo).join("{").split(Pn).join("}").split(Uo).join(",").split(Go).join(".")}function Ho(s){if(!s)return[""];var t=[],e=Wo("{","}",s);if(!e)return s.split(",");var i=e.pre,n=e.body,r=e.post,o=i.split(",");o[o.length-1]+="{"+n+"}";var a=Ho(r);return r.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),t.push.apply(t,o),t}function yh(s){return s?(s.substr(0,2)==="{}"&&(s="\\{\\}"+s.substr(2)),_i(wh(s),!0).map(bh)):[]}function Sh(s){return"{"+s+"}"}function xh(s){return/^-?0\d/.test(s)}function Eh(s,t){return s<=t}function Ch(s,t){return s>=t}function _i(s,t){var e=[],i=Wo("{","}",s);if(!i)return[s];var n=i.pre,r=i.post.length?_i(i.post,!1):[""];if(/\$$/.test(i.pre))for(var o=0;o<r.length;o++){var a=n+"{"+i.body+"}"+r[o];e.push(a)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),h=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),u=l||h,c=i.body.indexOf(",")>=0;if(!u&&!c)return i.post.match(/,.*\}/)?(s=i.pre+"{"+i.body+Pn+i.post,_i(s)):[s];var d;if(u)d=i.body.split(/\.\./);else if(d=Ho(i.body),d.length===1&&(d=_i(d[0],!1).map(Sh),d.length===1))return r.map(function(G){return i.pre+d[0]+G});var p;if(u){var S=Nn(d[0]),w=Nn(d[1]),m=Math.max(d[0].length,d[1].length),E=d.length==3?Math.abs(Nn(d[2])):1,v=Eh,_=w<S;_&&(E*=-1,v=Ch);var O=d.some(xh);p=[];for(var T=S;v(T,w);T+=E){var H;if(h)H=String.fromCharCode(T),H==="\\"&&(H="");else if(H=String(T),O){var q=m-H.length;if(q>0){var at=new Array(q+1).join("0");T<0?H="-"+at+H.slice(1):H=at+H}}p.push(H)}}else{p=[];for(var J=0;J<d.length;J++)p.push.apply(p,_i(d[J],!1))}for(var J=0;J<p.length;J++)for(var o=0;o<r.length;o++){var a=n+p[J]+r[o];(!t||u||a)&&e.push(a)}}return e}});var is=require("assert");var Al={right:jl,center:Ml},_l=0,Ki=1,$l=2,Ji=3,Xs=class{constructor(t){var e;this.width=t.width,this.wrap=(e=t.wrap)!==null&&e!==void 0?e:!0,this.rows=[]}span(...t){let e=this.div(...t);e.span=!0}resetOutput(){this.rows=[]}div(...t){if(t.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...t)&&typeof t[0]=="string")return this.applyLayoutDSL(t[0]);let e=t.map(i=>typeof i=="string"?this.colFromString(i):i);return this.rows.push(e),e}shouldApplyLayoutDSL(...t){return t.length===1&&typeof t[0]=="string"&&/[\t\n]/.test(t[0])}applyLayoutDSL(t){let e=t.split(`
`).map(n=>n.split("	")),i=0;return e.forEach(n=>{n.length>1&&_t.stringWidth(n[0])>i&&(i=Math.min(Math.floor(this.width*.5),_t.stringWidth(n[0])))}),e.forEach(n=>{this.div(...n.map((r,o)=>({text:r.trim(),padding:this.measurePadding(r),width:o===0&&n.length>1?i:void 0})))}),this.rows[this.rows.length-1]}colFromString(t){return{text:t,padding:this.measurePadding(t)}}measurePadding(t){let e=_t.stripAnsi(t);return[0,e.match(/\s*$/)[0].length,0,e.match(/^\s*/)[0].length]}toString(){let t=[];return this.rows.forEach(e=>{this.rowToString(e,t)}),t.filter(e=>!e.hidden).map(e=>e.text).join(`
`)}rowToString(t,e){return this.rasterize(t).forEach((i,n)=>{let r="";i.forEach((o,a)=>{let{width:l}=t[a],h=this.negatePadding(t[a]),u=o;if(h>_t.stringWidth(o)&&(u+=" ".repeat(h-_t.stringWidth(o))),t[a].align&&t[a].align!=="left"&&this.wrap){let d=Al[t[a].align];u=d(u,h),_t.stringWidth(u)<h&&(u+=" ".repeat((l||0)-_t.stringWidth(u)-1))}let c=t[a].padding||[0,0,0,0];c[Ji]&&(r+=" ".repeat(c[Ji])),r+=pr(t[a],u,"| "),r+=u,r+=pr(t[a],u," |"),c[Ki]&&(r+=" ".repeat(c[Ki])),n===0&&e.length>0&&(r=this.renderInline(r,e[e.length-1]))}),e.push({text:r.replace(/ +$/,""),span:t.span})}),e}renderInline(t,e){let i=t.match(/^ */),n=i?i[0].length:0,r=e.text,o=_t.stringWidth(r.trimRight());return e.span?this.wrap?n<o?t:(e.hidden=!0,r.trimRight()+" ".repeat(n-o)+t.trimLeft()):(e.hidden=!0,r+t):t}rasterize(t){let e=[],i=this.columnWidths(t),n;return t.forEach((r,o)=>{r.width=i[o],this.wrap?n=_t.wrap(r.text,this.negatePadding(r),{hard:!0}).split(`
`):n=r.text.split(`
`),r.border&&(n.unshift("."+"-".repeat(this.negatePadding(r)+2)+"."),n.push("'"+"-".repeat(this.negatePadding(r)+2)+"'")),r.padding&&(n.unshift(...new Array(r.padding[_l]||0).fill("")),n.push(...new Array(r.padding[$l]||0).fill(""))),n.forEach((a,l)=>{e[l]||e.push([]);let h=e[l];for(let u=0;u<o;u++)h[u]===void 0&&h.push("");h.push(a)})}),e}negatePadding(t){let e=t.width||0;return t.padding&&(e-=(t.padding[Ji]||0)+(t.padding[Ki]||0)),t.border&&(e-=4),e}columnWidths(t){if(!this.wrap)return t.map(o=>o.width||_t.stringWidth(o.text));let e=t.length,i=this.width,n=t.map(o=>{if(o.width)return e--,i-=o.width,o.width}),r=e?Math.floor(i/e):0;return n.map((o,a)=>o===void 0?Math.max(r,Fl(t[a])):o)}};function pr(s,t,e){return s.border?/[.']-+[.']/.test(t)?"":t.trim().length!==0?e:"  ":""}function Fl(s){let t=s.padding||[],e=1+(t[Ji]||0)+(t[Ki]||0);return s.border?e+4:e}function Tl(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}function jl(s,t){s=s.trim();let e=_t.stringWidth(s);return e<t?" ".repeat(t-e)+s:s}function Ml(s,t){s=s.trim();let e=_t.stringWidth(s);return e>=t?s:" ".repeat(t-e>>1)+s}var _t;function mr(s,t){return _t=t,new Xs({width:(s==null?void 0:s.width)||Tl(),wrap:s==null?void 0:s.wrap})}var gr=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function tn(s){return s.replace(gr,"")}function wr(s,t){let[e,i]=s.match(gr)||["",""];s=tn(s);let n="";for(let r=0;r<s.length;r++)r!==0&&r%t===0&&(n+=`
`),n+=s.charAt(r);return e&&i&&(n=`${e}${n}${i}`),n}function en(s){return mr(s,{stringWidth:t=>[...t].length,stripAnsi:tn,wrap:wr})}var ke=require("path"),Zi=require("fs");function br(s,t){let e=(0,ke.resolve)(".",s),i;for((0,Zi.statSync)(e).isDirectory()||(e=(0,ke.dirname)(e));;){if(i=t(e,(0,Zi.readdirSync)(e)),i)return(0,ke.resolve)(e,i);if(e=(0,ke.dirname)(i=e),i===e)break}}var Ir=require("util"),Nr=require("fs"),Pr=require("url");var Cr=require("util"),es=require("path");function Fe(s){if(s!==s.toLowerCase()&&s!==s.toUpperCase()||(s=s.toLowerCase()),s.indexOf("-")===-1&&s.indexOf("_")===-1)return s;{let e="",i=!1,n=s.match(/^-+/);for(let r=n?n[0].length:0;r<s.length;r++){let o=s.charAt(r);i&&(i=!1,o=o.toUpperCase()),r!==0&&(o==="-"||o==="_")?i=!0:o!=="-"&&o!=="_"&&(e+=o)}return e}}function Qi(s,t){let e=s.toLowerCase();t=t||"-";let i="";for(let n=0;n<s.length;n++){let r=e.charAt(n),o=s.charAt(n);r!==o&&n>0?i+=`${t}${e.charAt(n)}`:i+=o}return i}function Xi(s){return s==null?!1:typeof s=="number"||/^0x[0-9a-f]+$/i.test(s)?!0:/^0[^.]/.test(s)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(s)}function yr(s){if(Array.isArray(s))return s.map(o=>typeof o!="string"?o+"":o);s=s.trim();let t=0,e=null,i=null,n=null,r=[];for(let o=0;o<s.length;o++){if(e=i,i=s.charAt(o),i===" "&&!n){e!==" "&&t++;continue}i===n?n=null:(i==="'"||i==='"')&&!n&&(n=i),r[t]||(r[t]=""),r[t]+=i}return r}var It;(function(s){s.BOOLEAN="boolean",s.STRING="string",s.NUMBER="number",s.ARRAY="array"})(It||(It={}));var le,ts=class{constructor(t){le=t}parse(t,e){let i=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},e),n=yr(t),r=typeof t=="string",o=Rl(Object.assign(Object.create(null),i.alias)),a=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},i.configuration),l=Object.assign(Object.create(null),i.default),h=i.configObjects||[],u=i.envPrefix,c=a["populate--"],d=c?"--":"_",p=Object.create(null),S=Object.create(null),w=i.__||le.format,m={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},E=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,v=new RegExp("^--"+a["negation-prefix"]+"(.+)");[].concat(i.array||[]).filter(Boolean).forEach(function(g){let y=typeof g=="object"?g.key:g,A=Object.keys(g).map(function(C){return{boolean:"bools",string:"strings",number:"numbers"}[C]}).filter(Boolean).pop();A&&(m[A][y]=!0),m.arrays[y]=!0,m.keys.push(y)}),[].concat(i.boolean||[]).filter(Boolean).forEach(function(g){m.bools[g]=!0,m.keys.push(g)}),[].concat(i.string||[]).filter(Boolean).forEach(function(g){m.strings[g]=!0,m.keys.push(g)}),[].concat(i.number||[]).filter(Boolean).forEach(function(g){m.numbers[g]=!0,m.keys.push(g)}),[].concat(i.count||[]).filter(Boolean).forEach(function(g){m.counts[g]=!0,m.keys.push(g)}),[].concat(i.normalize||[]).filter(Boolean).forEach(function(g){m.normalize[g]=!0,m.keys.push(g)}),typeof i.narg=="object"&&Object.entries(i.narg).forEach(([g,y])=>{typeof y=="number"&&(m.nargs[g]=y,m.keys.push(g))}),typeof i.coerce=="object"&&Object.entries(i.coerce).forEach(([g,y])=>{typeof y=="function"&&(m.coercions[g]=y,m.keys.push(g))}),typeof i.config<"u"&&(Array.isArray(i.config)||typeof i.config=="string"?[].concat(i.config).filter(Boolean).forEach(function(g){m.configs[g]=!0}):typeof i.config=="object"&&Object.entries(i.config).forEach(([g,y])=>{(typeof y=="boolean"||typeof y=="function")&&(m.configs[g]=y)})),$e(i.key,o,i.default,m.arrays),Object.keys(l).forEach(function(g){(m.aliases[g]||[]).forEach(function(y){l[y]=l[g]})});let _=null;Vi();let O=[],T=Object.assign(Object.create(null),{_:[]}),H={};for(let g=0;g<n.length;g++){let y=n[g],A=y.replace(/^-{3,}/,"---"),C,b,N,F,L,pt;if(y!=="--"&&/^-/.test(y)&&st(y))q(y);else if(A.match(/^---+(=|$)/)){q(y);continue}else if(y.match(/^--.+=/)||!a["short-option-groups"]&&y.match(/^-.+=/))F=y.match(/^--?([^=]+)=([\s\S]*)$/),F!==null&&Array.isArray(F)&&F.length>=3&&(W(F[1],m.arrays)?g=J(g,F[1],n,F[2]):W(F[1],m.nargs)!==!1?g=at(g,F[1],n,F[2]):G(F[1],F[2],!0));else if(y.match(v)&&a["boolean-negation"])F=y.match(v),F!==null&&Array.isArray(F)&&F.length>=2&&(b=F[1],G(b,W(b,m.arrays)?[!1]:!1));else if(y.match(/^--.+/)||!a["short-option-groups"]&&y.match(/^-[^-]+/))F=y.match(/^--?(.+)/),F!==null&&Array.isArray(F)&&F.length>=2&&(b=F[1],W(b,m.arrays)?g=J(g,b,n):W(b,m.nargs)!==!1?g=at(g,b,n):(L=n[g+1],L!==void 0&&(!L.match(/^-/)||L.match(E))&&!W(b,m.bools)&&!W(b,m.counts)||/^(true|false)$/.test(L)?(G(b,L),g++):G(b,nt(b))));else if(y.match(/^-.\..+=/))F=y.match(/^-([^=]+)=([\s\S]*)$/),F!==null&&Array.isArray(F)&&F.length>=3&&G(F[1],F[2]);else if(y.match(/^-.\..+/)&&!y.match(E))L=n[g+1],F=y.match(/^-(.\..+)/),F!==null&&Array.isArray(F)&&F.length>=2&&(b=F[1],L!==void 0&&!L.match(/^-/)&&!W(b,m.bools)&&!W(b,m.counts)?(G(b,L),g++):G(b,nt(b)));else if(y.match(/^-[^-]+/)&&!y.match(E)){N=y.slice(1,-1).split(""),C=!1;for(let Et=0;Et<N.length;Et++){if(L=y.slice(Et+2),N[Et+1]&&N[Et+1]==="="){pt=y.slice(Et+3),b=N[Et],W(b,m.arrays)?g=J(g,b,n,pt):W(b,m.nargs)!==!1?g=at(g,b,n,pt):G(b,pt),C=!0;break}if(L==="-"){G(N[Et],L);continue}if(/[A-Za-z]/.test(N[Et])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(L)&&W(L,m.bools)===!1){G(N[Et],L),C=!0;break}if(N[Et+1]&&N[Et+1].match(/\W/)){G(N[Et],L),C=!0;break}else G(N[Et],nt(N[Et]))}b=y.slice(-1)[0],!C&&b!=="-"&&(W(b,m.arrays)?g=J(g,b,n):W(b,m.nargs)!==!1?g=at(g,b,n):(L=n[g+1],L!==void 0&&(!/^(-|--)[^-]/.test(L)||L.match(E))&&!W(b,m.bools)&&!W(b,m.counts)||/^(true|false)$/.test(L)?(G(b,L),g++):G(b,nt(b))))}else if(y.match(/^-[0-9]$/)&&y.match(E)&&W(y.slice(1),m.bools))b=y.slice(1),G(b,nt(b));else if(y==="--"){O=n.slice(g+1);break}else if(a["halt-at-non-option"]){O=n.slice(g);break}else q(y)}V(T,!0),V(T,!1),B(T),ft(),it(T,m.aliases,l,!0),ut(T),a["set-placeholder-key"]&&_e(T),Object.keys(m.counts).forEach(function(g){oe(T,g.split("."))||G(g,0)}),c&&O.length&&(T[d]=[]),O.forEach(function(g){T[d].push(g)}),a["camel-case-expansion"]&&a["strip-dashed"]&&Object.keys(T).filter(g=>g!=="--"&&g.includes("-")).forEach(g=>{delete T[g]}),a["strip-aliased"]&&[].concat(...Object.keys(o).map(g=>o[g])).forEach(g=>{a["camel-case-expansion"]&&g.includes("-")&&delete T[g.split(".").map(y=>Fe(y)).join(".")],delete T[g]});function q(g){let y=j("_",g);(typeof y=="string"||typeof y=="number")&&T._.push(y)}function at(g,y,A,C){let b,N=W(y,m.nargs);if(N=typeof N!="number"||isNaN(N)?1:N,N===0)return kt(C)||(_=Error(w("Argument unexpected for: %s",y))),G(y,nt(y)),g;let F=kt(C)?0:1;if(a["nargs-eats-options"])A.length-(g+1)+F<N&&(_=Error(w("Not enough arguments following: %s",y))),F=N;else{for(b=g+1;b<A.length&&(!A[b].match(/^-[^0-9]/)||A[b].match(E)||st(A[b]));b++)F++;F<N&&(_=Error(w("Not enough arguments following: %s",y)))}let L=Math.min(F,N);for(!kt(C)&&L>0&&(G(y,C),L--),b=g+1;b<L+g+1;b++)G(y,A[b]);return g+L}function J(g,y,A,C){let b=[],N=C||A[g+1],F=W(y,m.nargs);if(W(y,m.bools)&&!/^(true|false)$/.test(N))b.push(!0);else if(kt(N)||kt(C)&&/^-/.test(N)&&!E.test(N)&&!st(N)){if(l[y]!==void 0){let L=l[y];b=Array.isArray(L)?L:[L]}}else{kt(C)||b.push($(y,C,!0));for(let L=g+1;L<A.length&&!(!a["greedy-arrays"]&&b.length>0||F&&typeof F=="number"&&b.length>=F||(N=A[L],/^-/.test(N)&&!E.test(N)&&!st(N)));L++)g=L,b.push($(y,N,r))}return typeof F=="number"&&(F&&b.length<F||isNaN(F)&&b.length===0)&&(_=Error(w("Not enough arguments following: %s",y))),G(y,b),g}function G(g,y,A=r){if(/-/.test(g)&&a["camel-case-expansion"]){let N=g.split(".").map(function(F){return Fe(F)}).join(".");I(g,N)}let C=$(g,y,A),b=g.split(".");ae(T,b,C),m.aliases[g]&&m.aliases[g].forEach(function(N){let F=N.split(".");ae(T,F,C)}),b.length>1&&a["dot-notation"]&&(m.aliases[b[0]]||[]).forEach(function(N){let F=N.split("."),L=[].concat(b);L.shift(),F=F.concat(L),(m.aliases[g]||[]).includes(F.join("."))||ae(T,F,C)}),W(g,m.normalize)&&!W(g,m.arrays)&&[g].concat(m.aliases[g]||[]).forEach(function(F){Object.defineProperty(H,F,{enumerable:!0,get(){return y},set(L){y=typeof L=="string"?le.normalize(L):L}})})}function I(g,y){m.aliases[g]&&m.aliases[g].length||(m.aliases[g]=[y],p[y]=!0),m.aliases[y]&&m.aliases[y].length||I(y,g)}function $(g,y,A){A&&(y=Il(y)),(W(g,m.bools)||W(g,m.counts))&&typeof y=="string"&&(y=y==="true");let C=Array.isArray(y)?y.map(function(b){return j(g,b)}):j(g,y);return W(g,m.counts)&&(kt(C)||typeof C=="boolean")&&(C=sn()),W(g,m.normalize)&&W(g,m.arrays)&&(Array.isArray(y)?C=y.map(b=>le.normalize(b)):C=le.normalize(y)),C}function j(g,y){return!a["parse-positional-numbers"]&&g==="_"||!W(g,m.strings)&&!W(g,m.bools)&&!Array.isArray(y)&&(Xi(y)&&a["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${y}`)))||!kt(y)&&W(g,m.numbers))&&(y=Number(y)),y}function B(g){let y=Object.create(null);it(y,m.aliases,l),Object.keys(m.configs).forEach(function(A){let C=g[A]||y[A];if(C)try{let b=null,N=le.resolve(le.cwd(),C),F=m.configs[A];if(typeof F=="function"){try{b=F(N)}catch(L){b=L}if(b instanceof Error){_=b;return}}else b=le.require(N);K(b)}catch(b){b.name==="PermissionDenied"?_=b:g[A]&&(_=Error(w("Invalid JSON config file: %s",C)))}})}function K(g,y){Object.keys(g).forEach(function(A){let C=g[A],b=y?y+"."+A:A;typeof C=="object"&&C!==null&&!Array.isArray(C)&&a["dot-notation"]?K(C,b):(!oe(T,b.split("."))||W(b,m.arrays)&&a["combine-arrays"])&&G(b,C)})}function ft(){typeof h<"u"&&h.forEach(function(g){K(g)})}function V(g,y){if(typeof u>"u")return;let A=typeof u=="string"?u:"",C=le.env();Object.keys(C).forEach(function(b){if(A===""||b.lastIndexOf(A,0)===0){let N=b.split("__").map(function(F,L){return L===0&&(F=F.substring(A.length)),Fe(F)});(y&&m.configs[N.join(".")]||!y)&&!oe(g,N)&&G(N.join("."),C[b])}})}function ut(g){let y,A=new Set;Object.keys(g).forEach(function(C){if(!A.has(C)&&(y=W(C,m.coercions),typeof y=="function"))try{let b=j(C,y(g[C]));[].concat(m.aliases[C]||[],C).forEach(N=>{A.add(N),g[N]=b})}catch(b){_=b}})}function _e(g){return m.keys.forEach(y=>{~y.indexOf(".")||typeof g[y]>"u"&&(g[y]=void 0)}),g}function it(g,y,A,C=!1){Object.keys(A).forEach(function(b){oe(g,b.split("."))||(ae(g,b.split("."),A[b]),C&&(S[b]=!0),(y[b]||[]).forEach(function(N){oe(g,N.split("."))||ae(g,N.split("."),A[b])}))})}function oe(g,y){let A=g;a["dot-notation"]||(y=[y.join(".")]),y.slice(0,-1).forEach(function(b){A=A[b]||{}});let C=y[y.length-1];return typeof A!="object"?!1:C in A}function ae(g,y,A){let C=g;a["dot-notation"]||(y=[y.join(".")]),y.slice(0,-1).forEach(function(pt){pt=Sr(pt),typeof C=="object"&&C[pt]===void 0&&(C[pt]={}),typeof C[pt]!="object"||Array.isArray(C[pt])?(Array.isArray(C[pt])?C[pt].push({}):C[pt]=[C[pt],{}],C=C[pt][C[pt].length-1]):C=C[pt]});let b=Sr(y[y.length-1]),N=W(y.join("."),m.arrays),F=Array.isArray(A),L=a["duplicate-arguments-array"];!L&&W(b,m.nargs)&&(L=!0,(!kt(C[b])&&m.nargs[b]===1||Array.isArray(C[b])&&C[b].length===m.nargs[b])&&(C[b]=void 0)),A===sn()?C[b]=sn(C[b]):Array.isArray(C[b])?L&&N&&F?C[b]=a["flatten-duplicate-arrays"]?C[b].concat(A):(Array.isArray(C[b][0])?C[b]:[C[b]]).concat([A]):!L&&!!N==!!F?C[b]=A:C[b]=C[b].concat([A]):C[b]===void 0&&N?C[b]=F?A:[A]:L&&!(C[b]===void 0||W(b,m.counts)||W(b,m.bools))?C[b]=[C[b],A]:C[b]=A}function $e(...g){g.forEach(function(y){Object.keys(y||{}).forEach(function(A){m.aliases[A]||(m.aliases[A]=[].concat(o[A]||[]),m.aliases[A].concat(A).forEach(function(C){if(/-/.test(C)&&a["camel-case-expansion"]){let b=Fe(C);b!==A&&m.aliases[A].indexOf(b)===-1&&(m.aliases[A].push(b),p[b]=!0)}}),m.aliases[A].concat(A).forEach(function(C){if(C.length>1&&/[A-Z]/.test(C)&&a["camel-case-expansion"]){let b=Qi(C,"-");b!==A&&m.aliases[A].indexOf(b)===-1&&(m.aliases[A].push(b),p[b]=!0)}}),m.aliases[A].forEach(function(C){m.aliases[C]=[A].concat(m.aliases[A].filter(function(b){return C!==b}))}))})})}function W(g,y){let A=[].concat(m.aliases[g]||[],g),C=Object.keys(y),b=A.find(N=>C.includes(N));return b?y[b]:!1}function Qs(g){let y=Object.keys(m);return[].concat(y.map(C=>m[C])).some(function(C){return Array.isArray(C)?C.includes(g):C[g]})}function D(g,...y){return[].concat(...y).some(function(C){let b=g.match(C);return b&&Qs(b[1])})}function tt(g){if(g.match(E)||!g.match(/^-[^-]+/))return!1;let y=!0,A,C=g.slice(1).split("");for(let b=0;b<C.length;b++){if(A=g.slice(b+2),!Qs(C[b])){y=!1;break}if(C[b+1]&&C[b+1]==="="||A==="-"||/[A-Za-z]/.test(C[b])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(A)||C[b+1]&&C[b+1].match(/\W/))break}return y}function st(g){return a["unknown-options-as-args"]&&Y(g)}function Y(g){return g=g.replace(/^-{3,}/,"--"),g.match(E)||tt(g)?!1:!D(g,/^-+([^=]+?)=[\s\S]*$/,v,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function nt(g){return!W(g,m.bools)&&!W(g,m.counts)&&`${g}`in l?l[g]:lt(Ht(g))}function lt(g){return{[It.BOOLEAN]:!0,[It.STRING]:"",[It.NUMBER]:void 0,[It.ARRAY]:[]}[g]}function Ht(g){let y=It.BOOLEAN;return W(g,m.strings)?y=It.STRING:W(g,m.numbers)?y=It.NUMBER:W(g,m.bools)?y=It.BOOLEAN:W(g,m.arrays)&&(y=It.ARRAY),y}function kt(g){return g===void 0}function Vi(){Object.keys(m.counts).find(g=>W(g,m.arrays)?(_=Error(w("Invalid configuration: %s, opts.count excludes opts.array.",g)),!0):W(g,m.nargs)?(_=Error(w("Invalid configuration: %s, opts.count excludes opts.narg.",g)),!0):!1)}return{aliases:Object.assign({},m.aliases),argv:Object.assign(H,T),configuration:a,defaulted:Object.assign({},S),error:_,newAliases:Object.assign({},p)}}};function Rl(s){let t=[],e=Object.create(null),i=!0;for(Object.keys(s).forEach(function(n){t.push([].concat(s[n],n))});i;){i=!1;for(let n=0;n<t.length;n++)for(let r=n+1;r<t.length;r++)if(t[n].filter(function(a){return t[r].indexOf(a)!==-1}).length){t[n]=t[n].concat(t[r]),t.splice(r,1),i=!0;break}}return t.forEach(function(n){n=n.filter(function(o,a,l){return l.indexOf(o)===a});let r=n.pop();r!==void 0&&typeof r=="string"&&(e[r]=n)}),e}function sn(s){return s!==void 0?s+1:1}function Sr(s){return s==="__proto__"?"___proto___":s}function Il(s){return typeof s=="string"&&(s[0]==="'"||s[0]==='"')&&s[s.length-1]===s[0]?s.substring(1,s.length-1):s}var Or=require("fs");var nn,rn,on,xr=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,Er=(rn=(nn=process==null?void 0:process.versions)===null||nn===void 0?void 0:nn.node)!==null&&rn!==void 0?rn:(on=process==null?void 0:process.version)===null||on===void 0?void 0:on.slice(1);if(Er&&Number(Er.match(/^([^.]+)/)[1])<xr)throw Error(`yargs parser supports a minimum Node.js version of ${xr}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var Nl=process?process.env:{},vr=new ts({cwd:process.cwd,env:()=>Nl,format:Cr.format,normalize:es.normalize,resolve:es.resolve,require:s=>{if(typeof require<"u")return require(s);if(s.match(/\.json$/))return JSON.parse((0,Or.readFileSync)(s,"utf8"));throw Error("only .json config files are supported in ESM")}}),bi=function(t,e){return vr.parse(t.slice(),e).argv};bi.detailed=function(s,t){return vr.parse(s.slice(),t)};bi.camelCase=Fe;bi.decamelize=Qi;bi.looksLikeNumber=Xi;var an=bi;var qt=require("path");function Ar(){return Pl()?0:1}function Pl(){return Ll()&&!process.defaultApp}function Ll(){return!!process.versions.electron}function ln(s){return s.slice(Ar()+1)}function _r(){return process.argv[Ar()]}var Q=class s extends Error{constructor(t){super(t||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,s)}};var Ye=require("fs"),$r=require("util"),Fr=require("path"),Tr={fs:{readFileSync:Ye.readFileSync,writeFile:Ye.writeFile},format:$r.format,resolve:Fr.resolve,exists:s=>{try{return(0,Ye.statSync)(s).isFile()}catch{return!1}}};var Yt,hn=class{constructor(t){t=t||{},this.directory=t.directory||"./locales",this.updateFiles=typeof t.updateFiles=="boolean"?t.updateFiles:!0,this.locale=t.locale||"en",this.fallbackToLanguage=typeof t.fallbackToLanguage=="boolean"?t.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...t){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let e=t.shift(),i=function(){};return typeof t[t.length-1]=="function"&&(i=t.pop()),i=i||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][e]&&this.updateFiles?(this.cache[this.locale][e]=e,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:i})):i(),Yt.format.apply(Yt.format,[this.cache[this.locale][e]||e].concat(t))}__n(){let t=Array.prototype.slice.call(arguments),e=t.shift(),i=t.shift(),n=t.shift(),r=function(){};typeof t[t.length-1]=="function"&&(r=t.pop()),this.cache[this.locale]||this._readLocaleFile();let o=n===1?e:i;this.cache[this.locale][e]&&(o=this.cache[this.locale][e][n===1?"one":"other"]),!this.cache[this.locale][e]&&this.updateFiles?(this.cache[this.locale][e]={one:e,other:i},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:r})):r();let a=[o];return~o.indexOf("%d")&&a.push(n),Yt.format.apply(Yt.format,a.concat(t))}setLocale(t){this.locale=t}getLocale(){return this.locale}updateLocale(t){this.cache[this.locale]||this._readLocaleFile();for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&(this.cache[this.locale][e]=t[e])}_taggedLiteral(t,...e){let i="";return t.forEach(function(n,r){let o=e[r+1];i+=n,typeof o<"u"&&(i+="%s")}),this.__.apply(this,[i].concat([].slice.call(e,1)))}_enqueueWrite(t){this.writeQueue.push(t),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let t=this,e=this.writeQueue[0],i=e.directory,n=e.locale,r=e.cb,o=this._resolveLocaleFile(i,n),a=JSON.stringify(this.cache[n],null,2);Yt.fs.writeFile(o,a,"utf-8",function(l){t.writeQueue.shift(),t.writeQueue.length>0&&t._processWriteQueue(),r(l)})}_readLocaleFile(){let t={},e=this._resolveLocaleFile(this.directory,this.locale);try{Yt.fs.readFileSync&&(t=JSON.parse(Yt.fs.readFileSync(e,"utf-8")))}catch(i){if(i instanceof SyntaxError&&(i.message="syntax error in "+e),i.code==="ENOENT")t={};else throw i}this.cache[this.locale]=t}_resolveLocaleFile(t,e){let i=Yt.resolve(t,"./",e+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(i)&&~e.lastIndexOf("_")){let n=Yt.resolve(t,"./",e.split("_")[0]+".json");this._fileExistsSync(n)&&(i=n)}return i}_fileExistsSync(t){return Yt.exists(t)}};function jr(s,t){Yt=t;let e=new hn(s);return{__:e.__.bind(e),__n:e.__n.bind(e),setLocale:e.setLocale.bind(e),getLocale:e.getLocale.bind(e),updateLocale:e.updateLocale.bind(e),locale:e.locale}}var Dl=s=>jr(s,Tr),Mr=Dl;var Bl={},Wl="require is not supported by ESM",Rr="loading a directory of commands is not supported yet for ESM",yi;try{yi=(0,Pr.fileURLToPath)(Bl.url)}catch{yi=process.cwd()}var zl=yi.substring(0,yi.lastIndexOf("node_modules")),cn={assert:{notStrictEqual:is.notStrictEqual,strictEqual:is.strictEqual},cliui:en,findUp:br,getEnv:s=>process.env[s],inspect:Ir.inspect,getCallerFile:()=>{throw new Q(Rr)},getProcessArgvBin:_r,mainFilename:zl||process.cwd(),Parser:an,path:{basename:qt.basename,dirname:qt.dirname,extname:qt.extname,relative:qt.relative,resolve:qt.resolve},process:{argv:()=>process.argv,cwd:process.cwd,emitWarning:(s,t)=>process.emitWarning(s,t),execPath:()=>process.execPath,exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:Nr.readFileSync,require:()=>{throw new Q(Wl)},requireDirectory:()=>{throw new Q(Rr)},stringWidth:s=>[...s].length,y18n:Mr({directory:(0,qt.resolve)(yi,"../../../locales"),updateFiles:!1})};function Ct(s,t,e,i){e.assert.notStrictEqual(s,t,i)}function fn(s,t){t.assert.strictEqual(typeof s,"string")}function qe(s){return Object.keys(s)}function X(s){return!!s&&!!s.then&&typeof s.then=="function"}function me(s){let e=s.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),i=/\.*[\][<>]/g,n=e.shift();if(!n)throw new Error(`No command found in: ${s}`);let r={cmd:n.replace(i,""),demanded:[],optional:[]};return e.forEach((o,a)=>{let l=!1;o=o.replace(/\s/g,""),/\.+[\]>]/.test(o)&&a===e.length-1&&(l=!0),/^\[/.test(o)?r.optional.push({cmd:o.replace(i,"").split("|"),variadic:l}):r.demanded.push({cmd:o.replace(i,"").split("|"),variadic:l})}),r}var Ul=["first","second","third","fourth","fifth","sixth"];function M(s,t,e){function i(){return typeof s=="object"?[{demanded:[],optional:[]},s,t]:[me(`cmd ${s}`),t,e]}try{let n=0,[r,o,a]=i(),l=[].slice.call(o);for(;l.length&&l[l.length-1]===void 0;)l.pop();let h=a||l.length;if(h<r.demanded.length)throw new Q(`Not enough arguments provided. Expected ${r.demanded.length} but received ${l.length}.`);let u=r.demanded.length+r.optional.length;if(h>u)throw new Q(`Too many arguments provided. Expected max ${u} but received ${h}.`);r.demanded.forEach(c=>{let d=l.shift(),p=Lr(d);c.cmd.filter(w=>w===p||w==="*").length===0&&Dr(p,c.cmd,n),n+=1}),r.optional.forEach(c=>{if(l.length===0)return;let d=l.shift(),p=Lr(d);c.cmd.filter(w=>w===p||w==="*").length===0&&Dr(p,c.cmd,n),n+=1})}catch(n){console.warn(n.stack)}}function Lr(s){return Array.isArray(s)?"array":s===null?"null":typeof s}function Dr(s,t,e){throw new Q(`Invalid ${Ul[e]||"manyith"} argument. Expected ${t.join(" or ")} but received ${s}.`)}var ss=class{constructor(t){this.globalMiddleware=[],this.frozens=[],this.yargs=t}addMiddleware(t,e,i=!0,n=!1){if(M("<array|function> [boolean] [boolean] [boolean]",[t,e,i],arguments.length),Array.isArray(t)){for(let r=0;r<t.length;r++){if(typeof t[r]!="function")throw Error("middleware must be a function");let o=t[r];o.applyBeforeValidation=e,o.global=i}Array.prototype.push.apply(this.globalMiddleware,t)}else if(typeof t=="function"){let r=t;r.applyBeforeValidation=e,r.global=i,r.mutates=n,this.globalMiddleware.push(t)}return this.yargs}addCoerceMiddleware(t,e){let i=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(n=>{let r=[...i[e]||[],e];return n.option?!r.includes(n.option):!0}),t.option=e,this.addMiddleware(t,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let t=this.frozens.pop();t!==void 0&&(this.globalMiddleware=t)}reset(){this.globalMiddleware=this.globalMiddleware.filter(t=>t.global)}};function Wr(s){return s?s.map(t=>(t.applyBeforeValidation=!1,t)):[]}function Te(s,t,e,i){return e.reduce((n,r)=>{if(r.applyBeforeValidation!==i)return n;if(r.mutates){if(r.applied)return n;r.applied=!0}if(X(n))return n.then(o=>Promise.all([o,r(o,t)])).then(([o,a])=>Object.assign(o,a));{let o=r(n,t);return X(o)?o.then(a=>Object.assign(n,a)):Object.assign(n,o)}},s)}function je(s,t,e=i=>{throw i}){try{let i=Gl(s)?s():s;return X(i)?i.then(n=>t(n)):t(i)}catch(i){return e(i)}}function Gl(s){return typeof s=="function"}function un(s){if(typeof require>"u")return null;for(let t=0,e=Object.keys(require.cache),i;t<e.length;t++)if(i=require.cache[e[t]],i.exports===s)return i;return null}var Ve=/(^\*)|(^\$0)/,dn=class{constructor(t,e,i,n){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=n,this.usage=t,this.globalMiddleware=i,this.validation=e}addDirectory(t,e,i,n){n=n||{},typeof n.recurse!="boolean"&&(n.recurse=!1),Array.isArray(n.extensions)||(n.extensions=["js"]);let r=typeof n.visit=="function"?n.visit:o=>o;n.visit=(o,a,l)=>{let h=r(o,a,l);if(h){if(this.requireCache.has(a))return h;this.requireCache.add(a),this.addHandler(h)}return h},this.shim.requireDirectory({require:e,filename:i},t,n)}addHandler(t,e,i,n,r,o){let a=[],l=Wr(r);if(n=n||(()=>{}),Array.isArray(t))if(Hl(t))[t,...a]=t;else for(let h of t)this.addHandler(h);else if(Yl(t)){let h=Array.isArray(t.command)||typeof t.command=="string"?t.command:this.moduleName(t);t.aliases&&(h=[].concat(h).concat(t.aliases)),this.addHandler(h,this.extractDesc(t),t.builder,t.handler,t.middlewares,t.deprecated);return}else if(zr(i)){this.addHandler([t].concat(a),e,i.builder,i.handler,i.middlewares,i.deprecated);return}if(typeof t=="string"){let h=me(t);a=a.map(d=>me(d).cmd);let u=!1,c=[h.cmd].concat(a).filter(d=>Ve.test(d)?(u=!0,!1):!0);c.length===0&&u&&c.push("$0"),u&&(h.cmd=c[0],a=c.slice(1),t=t.replace(Ve,h.cmd)),a.forEach(d=>{this.aliasMap[d]=h.cmd}),e!==!1&&this.usage.command(t,e,u,a,o),this.handlers[h.cmd]={original:t,description:e,handler:n,builder:i||{},middlewares:l,deprecated:o,demanded:h.demanded,optional:h.optional},u&&(this.defaultCommand=this.handlers[h.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(t,e,i,n,r,o){let a=this.handlers[t]||this.handlers[this.aliasMap[t]]||this.defaultCommand,l=e.getInternalMethods().getContext(),h=l.commands.slice(),u=!t;t&&(l.commands.push(t),l.fullCommands.push(a.original));let c=this.applyBuilderUpdateUsageAndParse(u,a,e,i.aliases,h,n,r,o);return X(c)?c.then(d=>this.applyMiddlewareAndGetResult(u,a,d.innerArgv,l,r,d.aliases,e)):this.applyMiddlewareAndGetResult(u,a,c.innerArgv,l,r,c.aliases,e)}applyBuilderUpdateUsageAndParse(t,e,i,n,r,o,a,l){let h=e.builder,u=i;if(ns(h)){i.getInternalMethods().getUsageInstance().freeze();let c=h(i.getInternalMethods().reset(n),l);if(X(c))return c.then(d=>(u=Ur(d)?d:i,this.parseAndUpdateUsage(t,e,u,r,o,a)))}else kl(h)&&(i.getInternalMethods().getUsageInstance().freeze(),u=i.getInternalMethods().reset(n),Object.keys(e.builder).forEach(c=>{u.option(c,h[c])}));return this.parseAndUpdateUsage(t,e,u,r,o,a)}parseAndUpdateUsage(t,e,i,n,r,o){t&&i.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(i)&&i.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(n,e),e.description);let a=i.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,r,o);return X(a)?a.then(l=>({aliases:i.parsed.aliases,innerArgv:l})):{aliases:i.parsed.aliases,innerArgv:a}}shouldUpdateUsage(t){return!t.getInternalMethods().getUsageInstance().getUsageDisabled()&&t.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(t,e){let i=Ve.test(e.original)?e.original.replace(Ve,"").trim():e.original,n=t.filter(r=>!Ve.test(r));return n.push(i),`$0 ${n.join(" ")}`}handleValidationAndGetResult(t,e,i,n,r,o,a,l){if(!o.getInternalMethods().getHasOutput()){let h=o.getInternalMethods().runValidation(r,l,o.parsed.error,t);i=je(i,u=>(h(u),u))}if(e.handler&&!o.getInternalMethods().getHasOutput()){o.getInternalMethods().setHasOutput();let h=!!o.getOptions().configuration["populate--"];o.getInternalMethods().postProcess(i,h,!1,!1),i=Te(i,o,a,!1),i=je(i,u=>{let c=e.handler(u);return X(c)?c.then(()=>u):u}),t||o.getInternalMethods().getUsageInstance().cacheHelpMessage(),X(i)&&!o.getInternalMethods().hasParseCallback()&&i.catch(u=>{try{o.getInternalMethods().getUsageInstance().fail(null,u)}catch{}})}return t||(n.commands.pop(),n.fullCommands.pop()),i}applyMiddlewareAndGetResult(t,e,i,n,r,o,a){let l={};if(r)return i;a.getInternalMethods().getHasOutput()||(l=this.populatePositionals(e,i,n,a));let h=this.globalMiddleware.getMiddleware().slice(0).concat(e.middlewares),u=Te(i,a,h,!0);return X(u)?u.then(c=>this.handleValidationAndGetResult(t,e,c,n,o,a,h,l)):this.handleValidationAndGetResult(t,e,u,n,o,a,h,l)}populatePositionals(t,e,i,n){e._=e._.slice(i.commands.length);let r=t.demanded.slice(0),o=t.optional.slice(0),a={};for(this.validation.positionalCount(r.length,e._.length);r.length;){let l=r.shift();this.populatePositional(l,e,a)}for(;o.length;){let l=o.shift();this.populatePositional(l,e,a)}return e._=i.commands.concat(e._.map(l=>""+l)),this.postProcessPositionals(e,a,this.cmdToParseOptions(t.original),n),a}populatePositional(t,e,i){let n=t.cmd[0];t.variadic?i[n]=e._.splice(0).map(String):e._.length&&(i[n]=[String(e._.shift())])}cmdToParseOptions(t){let e={array:[],default:{},alias:{},demand:{}},i=me(t);return i.demanded.forEach(n=>{let[r,...o]=n.cmd;n.variadic&&(e.array.push(r),e.default[r]=[]),e.alias[r]=o,e.demand[r]=!0}),i.optional.forEach(n=>{let[r,...o]=n.cmd;n.variadic&&(e.array.push(r),e.default[r]=[]),e.alias[r]=o}),e}postProcessPositionals(t,e,i,n){let r=Object.assign({},n.getOptions());r.default=Object.assign(i.default,r.default);for(let h of Object.keys(i.alias))r.alias[h]=(r.alias[h]||[]).concat(i.alias[h]);r.array=r.array.concat(i.array),r.config={};let o=[];if(Object.keys(e).forEach(h=>{e[h].map(u=>{r.configuration["unknown-options-as-args"]&&(r.key[h]=!0),o.push(`--${h}`),o.push(u)})}),!o.length)return;let a=Object.assign({},r.configuration,{"populate--":!1}),l=this.shim.Parser.detailed(o,Object.assign({},r,{configuration:a}));if(l.error)n.getInternalMethods().getUsageInstance().fail(l.error.message,l.error);else{let h=Object.keys(e);Object.keys(e).forEach(u=>{h.push(...l.aliases[u])}),Object.keys(l.argv).forEach(u=>{h.includes(u)&&(e[u]||(e[u]=l.argv[u]),!this.isInConfigs(n,u)&&!this.isDefaulted(n,u)&&Object.prototype.hasOwnProperty.call(t,u)&&Object.prototype.hasOwnProperty.call(l.argv,u)&&(Array.isArray(t[u])||Array.isArray(l.argv[u]))?t[u]=[].concat(t[u],l.argv[u]):t[u]=l.argv[u])})}}isDefaulted(t,e){let{default:i}=t.getOptions();return Object.prototype.hasOwnProperty.call(i,e)||Object.prototype.hasOwnProperty.call(i,this.shim.Parser.camelCase(e))}isInConfigs(t,e){let{configObjects:i}=t.getOptions();return i.some(n=>Object.prototype.hasOwnProperty.call(n,e))||i.some(n=>Object.prototype.hasOwnProperty.call(n,this.shim.Parser.camelCase(e)))}runDefaultBuilderOn(t){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(t)){let i=Ve.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");t.getInternalMethods().getUsageInstance().usage(i,this.defaultCommand.description)}let e=this.defaultCommand.builder;if(ns(e))return e(t,!0);zr(e)||Object.keys(e).forEach(i=>{t.option(i,e[i])})}moduleName(t){let e=un(t);if(!e)throw new Error(`No command name given for module: ${this.shim.inspect(t)}`);return this.commandFromFilename(e.filename)}commandFromFilename(t){return this.shim.path.basename(t,this.shim.path.extname(t))}extractDesc({describe:t,description:e,desc:i}){for(let n of[t,e,i]){if(typeof n=="string"||n===!1)return n;Ct(n,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let t=this.frozens.pop();Ct(t,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=t}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function Br(s,t,e,i){return new dn(s,t,e,i)}function zr(s){return typeof s=="object"&&!!s.builder&&typeof s.handler=="function"}function Hl(s){return s.every(t=>typeof t=="string")}function ns(s){return typeof s=="function"}function kl(s){return typeof s=="object"}function Yl(s){return typeof s=="object"&&!Array.isArray(s)}function ge(s={},t=()=>!0){let e={};return qe(s).forEach(i=>{t(i,s[i])&&(e[i]=s[i])}),e}function we(s){typeof process>"u"||[process.stdout,process.stderr].forEach(t=>{let e=t;e._handle&&e.isTTY&&typeof e._handle.setBlocking=="function"&&e._handle.setBlocking(s)})}function ql(s){return typeof s=="boolean"}function Hr(s,t){let e=t.y18n.__,i={},n=[];i.failFn=function($){n.push($)};let r=null,o=null,a=!0;i.showHelpOnFail=function($=!0,j){let[B,K]=typeof $=="string"?[!0,$]:[$,j];return s.getInternalMethods().isGlobalContext()&&(o=K),r=K,a=B,i};let l=!1;i.fail=function($,j){let B=s.getInternalMethods().getLoggerInstance();if(n.length)for(let K=n.length-1;K>=0;--K){let ft=n[K];if(ql(ft)){if(j)throw j;if($)throw Error($)}else ft($,j,i)}else{if(s.getExitProcess()&&we(!0),!l){l=!0,a&&(s.showHelp("error"),B.error()),($||j)&&B.error($||j);let K=r||o;K&&(($||j)&&B.error(""),B.error(K))}if(j=j||new Q($),s.getExitProcess())return s.exit(1);if(s.getInternalMethods().hasParseCallback())return s.exit(1,j);throw j}};let h=[],u=!1;i.usage=(I,$)=>I===null?(u=!0,h=[],i):(u=!1,h.push([I,$||""]),i),i.getUsage=()=>h,i.getUsageDisabled=()=>u,i.getPositionalGroupName=()=>e("Positionals:");let c=[];i.example=(I,$)=>{c.push([I,$||""])};let d=[];i.command=function($,j,B,K,ft=!1){B&&(d=d.map(V=>(V[2]=!1,V))),d.push([$,j||"",B,K,ft])},i.getCommands=()=>d;let p={};i.describe=function($,j){Array.isArray($)?$.forEach(B=>{i.describe(B,j)}):typeof $=="object"?Object.keys($).forEach(B=>{i.describe(B,$[B])}):p[$]=j},i.getDescriptions=()=>p;let S=[];i.epilog=I=>{S.push(I)};let w=!1,m;i.wrap=I=>{w=!0,m=I},i.getWrap=()=>t.getEnv("YARGS_DISABLE_WRAP")?null:(w||(m=at(),w=!0),m);let E="__yargsString__:";i.deferY18nLookup=I=>E+I,i.help=function(){if(O)return O;_();let $=s.customScriptName?s.$0:t.path.basename(s.$0),j=s.getDemandedOptions(),B=s.getDemandedCommands(),K=s.getDeprecatedOptions(),ft=s.getGroups(),V=s.getOptions(),ut=[];ut=ut.concat(Object.keys(p)),ut=ut.concat(Object.keys(j)),ut=ut.concat(Object.keys(B)),ut=ut.concat(Object.keys(V.default)),ut=ut.filter(H),ut=Object.keys(ut.reduce((D,tt)=>(tt!=="_"&&(D[tt]=!0),D),{}));let _e=i.getWrap(),it=t.cliui({width:_e,wrap:!!_e});if(!u){if(h.length)h.forEach(D=>{it.div({text:`${D[0].replace(/\$0/g,$)}`}),D[1]&&it.div({text:`${D[1]}`,padding:[1,0,0,0]})}),it.div();else if(d.length){let D=null;B._?D=`${$} <${e("command")}>
`:D=`${$} [${e("command")}]
`,it.div(`${D}`)}}if(d.length>1||d.length===1&&!d[0][2]){it.div(e("Commands:"));let D=s.getInternalMethods().getContext(),tt=D.commands.length?`${D.commands.join(" ")} `:"";s.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(d=d.sort((Y,nt)=>Y[0].localeCompare(nt[0])));let st=$?`${$} `:"";d.forEach(Y=>{let nt=`${st}${tt}${Y[0].replace(/^\$0 ?/,"")}`;it.span({text:nt,padding:[0,2,0,2],width:v(d,_e,`${$}${tt}`)+4},{text:Y[1]});let lt=[];Y[2]&&lt.push(`[${e("default")}]`),Y[3]&&Y[3].length&&lt.push(`[${e("aliases:")} ${Y[3].join(", ")}]`),Y[4]&&(typeof Y[4]=="string"?lt.push(`[${e("deprecated: %s",Y[4])}]`):lt.push(`[${e("deprecated")}]`)),lt.length?it.div({text:lt.join(" "),padding:[0,0,0,2],align:"right"}):it.div()}),it.div()}let oe=(Object.keys(V.alias)||[]).concat(Object.keys(s.parsed.newAliases)||[]);ut=ut.filter(D=>!s.parsed.newAliases[D]&&oe.every(tt=>(V.alias[tt]||[]).indexOf(D)===-1));let ae=e("Options:");ft[ae]||(ft[ae]=[]),T(ut,V.alias,ft,ae);let $e=D=>/^--/.test(rs(D)),W=Object.keys(ft).filter(D=>ft[D].length>0).map(D=>{let tt=ft[D].filter(H).map(st=>{if(oe.includes(st))return st;for(let Y=0,nt;(nt=oe[Y])!==void 0;Y++)if((V.alias[nt]||[]).includes(st))return nt;return st});return{groupName:D,normalizedKeys:tt}}).filter(({normalizedKeys:D})=>D.length>0).map(({groupName:D,normalizedKeys:tt})=>{let st=tt.reduce((Y,nt)=>(Y[nt]=[nt].concat(V.alias[nt]||[]).map(lt=>D===i.getPositionalGroupName()?lt:(/^[0-9]$/.test(lt)?V.boolean.includes(nt)?"-":"--":lt.length>1?"--":"-")+lt).sort((lt,Ht)=>$e(lt)===$e(Ht)?0:$e(lt)?1:-1).join(", "),Y),{});return{groupName:D,normalizedKeys:tt,switches:st}});if(W.filter(({groupName:D})=>D!==i.getPositionalGroupName()).some(({normalizedKeys:D,switches:tt})=>!D.every(st=>$e(tt[st])))&&W.filter(({groupName:D})=>D!==i.getPositionalGroupName()).forEach(({normalizedKeys:D,switches:tt})=>{D.forEach(st=>{$e(tt[st])&&(tt[st]=Vl(tt[st],4))})}),W.forEach(({groupName:D,normalizedKeys:tt,switches:st})=>{it.div(D),tt.forEach(Y=>{let nt=st[Y],lt=p[Y]||"",Ht=null;lt.includes(E)&&(lt=e(lt.substring(E.length))),V.boolean.includes(Y)&&(Ht=`[${e("boolean")}]`),V.count.includes(Y)&&(Ht=`[${e("count")}]`),V.string.includes(Y)&&(Ht=`[${e("string")}]`),V.normalize.includes(Y)&&(Ht=`[${e("string")}]`),V.array.includes(Y)&&(Ht=`[${e("array")}]`),V.number.includes(Y)&&(Ht=`[${e("number")}]`);let kt=y=>typeof y=="string"?`[${e("deprecated: %s",y)}]`:`[${e("deprecated")}]`,Vi=[Y in K?kt(K[Y]):null,Ht,Y in j?`[${e("required")}]`:null,V.choices&&V.choices[Y]?`[${e("choices:")} ${i.stringifiedValues(V.choices[Y])}]`:null,q(V.default[Y],V.defaultDescription[Y])].filter(Boolean).join(" ");it.span({text:rs(nt),padding:[0,2,0,2+Gr(nt)],width:v(st,_e)+4},lt);let g=s.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;Vi&&!g?it.div({text:Vi,padding:[0,0,0,2],align:"right"}):it.div()}),it.div()}),c.length&&(it.div(e("Examples:")),c.forEach(D=>{D[0]=D[0].replace(/\$0/g,$)}),c.forEach(D=>{D[1]===""?it.div({text:D[0],padding:[0,2,0,2]}):it.div({text:D[0],padding:[0,2,0,2],width:v(c,_e)+4},{text:D[1]})}),it.div()),S.length>0){let D=S.map(tt=>tt.replace(/\$0/g,$)).join(`
`);it.div(`${D}
`)}return it.toString().replace(/\s*$/,"")};function v(I,$,j){let B=0;return Array.isArray(I)||(I=Object.values(I).map(K=>[K])),I.forEach(K=>{B=Math.max(t.stringWidth(j?`${j} ${rs(K[0])}`:rs(K[0]))+Gr(K[0]),B)}),$&&(B=Math.min(B,parseInt(($*.5).toString(),10))),B}function _(){let I=s.getDemandedOptions(),$=s.getOptions();(Object.keys($.alias)||[]).forEach(j=>{$.alias[j].forEach(B=>{p[B]&&i.describe(j,p[B]),B in I&&s.demandOption(j,I[B]),$.boolean.includes(B)&&s.boolean(j),$.count.includes(B)&&s.count(j),$.string.includes(B)&&s.string(j),$.normalize.includes(B)&&s.normalize(j),$.array.includes(B)&&s.array(j),$.number.includes(B)&&s.number(j)})})}let O;i.cacheHelpMessage=function(){O=this.help()},i.clearCachedHelpMessage=function(){O=void 0},i.hasCachedHelpMessage=function(){return!!O};function T(I,$,j,B){let K=[],ft=null;return Object.keys(j).forEach(V=>{K=K.concat(j[V])}),I.forEach(V=>{ft=[V].concat($[V]),ft.some(ut=>K.indexOf(ut)!==-1)||j[B].push(V)}),K}function H(I){return s.getOptions().hiddenOptions.indexOf(I)<0||s.parsed.argv[s.getOptions().showHiddenOpt]}i.showHelp=I=>{let $=s.getInternalMethods().getLoggerInstance();I||(I="error"),(typeof I=="function"?I:$[I])(i.help())},i.functionDescription=I=>["(",I.name?t.Parser.decamelize(I.name,"-"):e("generated-value"),")"].join(""),i.stringifiedValues=function($,j){let B="",K=j||", ",ft=[].concat($);return!$||!ft.length||ft.forEach(V=>{B.length&&(B+=K),B+=JSON.stringify(V)}),B};function q(I,$){let j=`[${e("default:")} `;if(I===void 0&&!$)return null;if($)j+=$;else switch(typeof I){case"string":j+=`"${I}"`;break;case"object":j+=JSON.stringify(I);break;default:j+=I}return`${j}]`}function at(){return t.process.stdColumns?Math.min(80,t.process.stdColumns):80}let J=null;i.version=I=>{J=I},i.showVersion=I=>{let $=s.getInternalMethods().getLoggerInstance();I||(I="error"),(typeof I=="function"?I:$[I])(J)},i.reset=function($){return r=null,l=!1,h=[],u=!1,S=[],c=[],d=[],p=ge(p,j=>!$[j]),i};let G=[];return i.freeze=function(){G.push({failMessage:r,failureOutput:l,usages:h,usageDisabled:u,epilogs:S,examples:c,commands:d,descriptions:p})},i.unfreeze=function($=!1){let j=G.pop();j&&($?(p={...j.descriptions,...p},d=[...j.commands,...d],h=[...j.usages,...h],c=[...j.examples,...c],S=[...j.epilogs,...S]):{failMessage:r,failureOutput:l,usages:h,usageDisabled:u,epilogs:S,examples:c,commands:d,descriptions:p}=j)},i}function pn(s){return typeof s=="object"}function Vl(s,t){return pn(s)?{text:s.text,indentation:s.indentation+t}:{text:s,indentation:t}}function Gr(s){return pn(s)?s.indentation:0}function rs(s){return pn(s)?s.text:s}var kr=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,Yr=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var mn=class{constructor(t,e,i,n){var r,o,a;this.yargs=t,this.usage=e,this.command=i,this.shim=n,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(a=((r=this.shim.getEnv("SHELL"))===null||r===void 0?void 0:r.includes("zsh"))||((o=this.shim.getEnv("ZSH_NAME"))===null||o===void 0?void 0:o.includes("zsh")))!==null&&a!==void 0?a:!1}defaultCompletion(t,e,i,n){let r=this.command.getCommandHandlers();for(let a=0,l=t.length;a<l;++a)if(r[t[a]]&&r[t[a]].builder){let h=r[t[a]].builder;if(ns(h)){this.indexAfterLastReset=a+1;let u=this.yargs.getInternalMethods().reset();return h(u,!0),u.argv}}let o=[];this.commandCompletions(o,t,i),this.optionCompletions(o,t,e,i),this.choicesFromOptionsCompletions(o,t,e,i),this.choicesFromPositionalsCompletions(o,t,e,i),n(null,o)}commandCompletions(t,e,i){let n=this.yargs.getInternalMethods().getContext().commands;!i.match(/^-/)&&n[n.length-1]!==i&&!this.previousArgHasChoices(e)&&this.usage.getCommands().forEach(r=>{let o=me(r[0]).cmd;if(e.indexOf(o)===-1)if(!this.zshShell)t.push(o);else{let a=r[1]||"";t.push(o.replace(/:/g,"\\:")+":"+a)}})}optionCompletions(t,e,i,n){if((n.match(/^-/)||n===""&&t.length===0)&&!this.previousArgHasChoices(e)){let r=this.yargs.getOptions(),o=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(r.key).forEach(a=>{let l=!!r.configuration["boolean-negation"]&&r.boolean.includes(a);!o.includes(a)&&!r.hiddenOptions.includes(a)&&!this.argsContainKey(e,a,l)&&this.completeOptionKey(a,t,n,l&&!!r.default[a])})}}choicesFromOptionsCompletions(t,e,i,n){if(this.previousArgHasChoices(e)){let r=this.getPreviousArgChoices(e);r&&r.length>0&&t.push(...r.map(o=>o.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(t,e,i,n){if(n===""&&t.length>0&&this.previousArgHasChoices(e))return;let r=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],o=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),a=r[i._.length-o-1];if(!a)return;let l=this.yargs.getOptions().choices[a]||[];for(let h of l)h.startsWith(n)&&t.push(h.replace(/:/g,"\\:"))}getPreviousArgChoices(t){if(t.length<1)return;let e=t[t.length-1],i="";if(!e.startsWith("-")&&t.length>1&&(i=e,e=t[t.length-2]),!e.startsWith("-"))return;let n=e.replace(/^-+/,""),r=this.yargs.getOptions(),o=[n,...this.yargs.getAliases()[n]||[]],a;for(let l of o)if(Object.prototype.hasOwnProperty.call(r.key,l)&&Array.isArray(r.choices[l])){a=r.choices[l];break}if(a)return a.filter(l=>!i||l.startsWith(i))}previousArgHasChoices(t){let e=this.getPreviousArgChoices(t);return e!==void 0&&e.length>0}argsContainKey(t,e,i){let n=r=>t.indexOf((/^[^0-9]$/.test(r)?"-":"--")+r)!==-1;if(n(e)||i&&n(`no-${e}`))return!0;if(this.aliases){for(let r of this.aliases[e])if(n(r))return!0}return!1}completeOptionKey(t,e,i,n){var r,o,a,l;let h=t;if(this.zshShell){let p=this.usage.getDescriptions(),S=(o=(r=this===null||this===void 0?void 0:this.aliases)===null||r===void 0?void 0:r[t])===null||o===void 0?void 0:o.find(E=>{let v=p[E];return typeof v=="string"&&v.length>0}),w=S?p[S]:void 0,m=(l=(a=p[t])!==null&&a!==void 0?a:w)!==null&&l!==void 0?l:"";h=`${t.replace(/:/g,"\\:")}:${m.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let u=p=>/^--/.test(p),c=p=>/^[^0-9]$/.test(p),d=!u(i)&&c(t)?"-":"--";e.push(d+h),n&&e.push(d+"no-"+h)}customCompletion(t,e,i,n){if(Ct(this.customCompletionFunction,null,this.shim),Jl(this.customCompletionFunction)){let r=this.customCompletionFunction(i,e);return X(r)?r.then(o=>{this.shim.process.nextTick(()=>{n(null,o)})}).catch(o=>{this.shim.process.nextTick(()=>{n(o,void 0)})}):n(null,r)}else return Zl(this.customCompletionFunction)?this.customCompletionFunction(i,e,(r=n)=>this.defaultCompletion(t,e,i,r),r=>{n(null,r)}):this.customCompletionFunction(i,e,r=>{n(null,r)})}getCompletion(t,e){let i=t.length?t[t.length-1]:"",n=this.yargs.parse(t,!0),r=this.customCompletionFunction?o=>this.customCompletion(t,o,i,e):o=>this.defaultCompletion(t,o,i,e);return X(n)?n.then(r):r(n)}generateCompletionScript(t,e){let i=this.zshShell?Yr:kr,n=this.shim.path.basename(t);return t.match(/\.js$/)&&(t=`./${t}`),i=i.replace(/{{app_name}}/g,n),i=i.replace(/{{completion_command}}/g,e),i.replace(/{{app_path}}/g,t)}registerFunction(t){this.customCompletionFunction=t}setParsed(t){this.aliases=t.aliases}};function qr(s,t,e,i){return new mn(s,t,e,i)}function Jl(s){return s.length<3}function Zl(s){return s.length>3}function Vr(s,t){if(s.length===0)return t.length;if(t.length===0)return s.length;let e=[],i;for(i=0;i<=t.length;i++)e[i]=[i];let n;for(n=0;n<=s.length;n++)e[0][n]=n;for(i=1;i<=t.length;i++)for(n=1;n<=s.length;n++)t.charAt(i-1)===s.charAt(n-1)?e[i][n]=e[i-1][n-1]:i>1&&n>1&&t.charAt(i-2)===s.charAt(n-1)&&t.charAt(i-1)===s.charAt(n-2)?e[i][n]=e[i-2][n-2]+1:e[i][n]=Math.min(e[i-1][n-1]+1,Math.min(e[i][n-1]+1,e[i-1][n]+1));return e[t.length][s.length]}var Kr=["$0","--","_"];function Jr(s,t,e){let i=e.y18n.__,n=e.y18n.__n,r={};r.nonOptionCount=function(c){let d=s.getDemandedCommands(),S=c._.length+(c["--"]?c["--"].length:0)-s.getInternalMethods().getContext().commands.length;d._&&(S<d._.min||S>d._.max)&&(S<d._.min?d._.minMsg!==void 0?t.fail(d._.minMsg?d._.minMsg.replace(/\$0/g,S.toString()).replace(/\$1/,d._.min.toString()):null):t.fail(n("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",S,S.toString(),d._.min.toString())):S>d._.max&&(d._.maxMsg!==void 0?t.fail(d._.maxMsg?d._.maxMsg.replace(/\$0/g,S.toString()).replace(/\$1/,d._.max.toString()):null):t.fail(n("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",S,S.toString(),d._.max.toString()))))},r.positionalCount=function(c,d){d<c&&t.fail(n("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",d,d+"",c+""))},r.requiredArguments=function(c,d){let p=null;for(let S of Object.keys(d))(!Object.prototype.hasOwnProperty.call(c,S)||typeof c[S]>"u")&&(p=p||{},p[S]=d[S]);if(p){let S=[];for(let m of Object.keys(p)){let E=p[m];E&&S.indexOf(E)<0&&S.push(E)}let w=S.length?`
${S.join(`
`)}`:"";t.fail(n("Missing required argument: %s","Missing required arguments: %s",Object.keys(p).length,Object.keys(p).join(", ")+w))}},r.unknownArguments=function(c,d,p,S,w=!0){var m;let E=s.getInternalMethods().getCommandInstance().getCommands(),v=[],_=s.getInternalMethods().getContext();if(Object.keys(c).forEach(O=>{!Kr.includes(O)&&!Object.prototype.hasOwnProperty.call(p,O)&&!Object.prototype.hasOwnProperty.call(s.getInternalMethods().getParseContext(),O)&&!r.isValidAndSomeAliasIsNotNew(O,d)&&v.push(O)}),w&&(_.commands.length>0||E.length>0||S)&&c._.slice(_.commands.length).forEach(O=>{E.includes(""+O)||v.push(""+O)}),w){let T=((m=s.getDemandedCommands()._)===null||m===void 0?void 0:m.max)||0,H=_.commands.length+T;H<c._.length&&c._.slice(H).forEach(q=>{q=String(q),!_.commands.includes(q)&&!v.includes(q)&&v.push(q)})}v.length&&t.fail(n("Unknown argument: %s","Unknown arguments: %s",v.length,v.map(O=>O.trim()?O:`"${O}"`).join(", ")))},r.unknownCommands=function(c){let d=s.getInternalMethods().getCommandInstance().getCommands(),p=[],S=s.getInternalMethods().getContext();return(S.commands.length>0||d.length>0)&&c._.slice(S.commands.length).forEach(w=>{d.includes(""+w)||p.push(""+w)}),p.length>0?(t.fail(n("Unknown command: %s","Unknown commands: %s",p.length,p.join(", "))),!0):!1},r.isValidAndSomeAliasIsNotNew=function(c,d){if(!Object.prototype.hasOwnProperty.call(d,c))return!1;let p=s.parsed.newAliases;return[c,...d[c]].some(S=>!Object.prototype.hasOwnProperty.call(p,S)||!p[c])},r.limitedChoices=function(c){let d=s.getOptions(),p={};if(!Object.keys(d.choices).length)return;Object.keys(c).forEach(m=>{Kr.indexOf(m)===-1&&Object.prototype.hasOwnProperty.call(d.choices,m)&&[].concat(c[m]).forEach(E=>{d.choices[m].indexOf(E)===-1&&E!==void 0&&(p[m]=(p[m]||[]).concat(E))})});let S=Object.keys(p);if(!S.length)return;let w=i("Invalid values:");S.forEach(m=>{w+=`
  ${i("Argument: %s, Given: %s, Choices: %s",m,t.stringifiedValues(p[m]),t.stringifiedValues(d.choices[m]))}`}),t.fail(w)};let o={};r.implies=function(c,d){M("<string|object> [array|number|string]",[c,d],arguments.length),typeof c=="object"?Object.keys(c).forEach(p=>{r.implies(p,c[p])}):(s.global(c),o[c]||(o[c]=[]),Array.isArray(d)?d.forEach(p=>r.implies(c,p)):(Ct(d,void 0,e),o[c].push(d)))},r.getImplied=function(){return o};function a(u,c){let d=Number(c);return c=isNaN(d)?c:d,typeof c=="number"?c=u._.length>=c:c.match(/^--no-.+/)?(c=c.match(/^--no-(.+)/)[1],c=!Object.prototype.hasOwnProperty.call(u,c)):c=Object.prototype.hasOwnProperty.call(u,c),c}r.implications=function(c){let d=[];if(Object.keys(o).forEach(p=>{let S=p;(o[p]||[]).forEach(w=>{let m=S,E=w;m=a(c,m),w=a(c,w),m&&!w&&d.push(` ${S} -> ${E}`)})}),d.length){let p=`${i("Implications failed:")}
`;d.forEach(S=>{p+=S}),t.fail(p)}};let l={};r.conflicts=function(c,d){M("<string|object> [array|string]",[c,d],arguments.length),typeof c=="object"?Object.keys(c).forEach(p=>{r.conflicts(p,c[p])}):(s.global(c),l[c]||(l[c]=[]),Array.isArray(d)?d.forEach(p=>r.conflicts(c,p)):l[c].push(d))},r.getConflicting=()=>l,r.conflicting=function(c){Object.keys(c).forEach(d=>{l[d]&&l[d].forEach(p=>{p&&c[d]!==void 0&&c[p]!==void 0&&t.fail(i("Arguments %s and %s are mutually exclusive",d,p))})}),s.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(l).forEach(d=>{l[d].forEach(p=>{p&&c[e.Parser.camelCase(d)]!==void 0&&c[e.Parser.camelCase(p)]!==void 0&&t.fail(i("Arguments %s and %s are mutually exclusive",d,p))})})},r.recommendCommands=function(c,d){d=d.sort((m,E)=>E.length-m.length);let S=null,w=1/0;for(let m=0,E;(E=d[m])!==void 0;m++){let v=Vr(c,E);v<=3&&v<w&&(w=v,S=E)}S&&t.fail(i("Did you mean %s?",S))},r.reset=function(c){return o=ge(o,d=>!c[d]),l=ge(l,d=>!c[d]),r};let h=[];return r.freeze=function(){h.push({implied:o,conflicting:l})},r.unfreeze=function(){let c=h.pop();Ct(c,void 0,e),{implied:o,conflicting:l}=c},r}var gn=[],Si;function xi(s,t,e,i){Si=i;let n={};if(Object.prototype.hasOwnProperty.call(s,"extends")){if(typeof s.extends!="string")return n;let r=/\.json|\..*rc$/.test(s.extends),o=null;if(r)o=Xl(t,s.extends);else try{o=require.resolve(s.extends)}catch{return s}Ql(o),gn.push(o),n=r?JSON.parse(Si.readFileSync(o,"utf8")):require(s.extends),delete s.extends,n=xi(n,Si.path.dirname(o),e,Si)}return gn=[],e?Zr(n,s):Object.assign({},n,s)}function Ql(s){if(gn.indexOf(s)>-1)throw new Q(`Circular extended configurations: '${s}'.`)}function Xl(s,t){return Si.path.resolve(s,t)}function Zr(s,t){let e={};function i(n){return n&&typeof n=="object"&&!Array.isArray(n)}Object.assign(e,s);for(let n of Object.keys(t))i(t[n])&&i(e[n])?e[n]=Zr(s[n],t[n]):e[n]=t[n];return e}var R=function(s,t,e,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?s!==t||!n:!t.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(s,e):n?n.value=e:t.set(s,e),e},f=function(s,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?s!==t||!i:!t.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(s):i?i.value:t.get(s)},ht,Me,Ei,Nt,$t,os,be,Re,as,Pt,ls,Lt,Xt,Ft,Dt,hs,Ke,mt,P,cs,fs,Tt,Ie,Je,Ne,ye,us,z,Pe,Le,De,U,ds,te,rt;function bo(s){return(t=[],e=s.process.cwd(),i)=>{let n=new _n(t,e,i,s);return Object.defineProperty(n,"argv",{get:()=>n.parse(),enumerable:!0}),n.help(),n.version(),n}}var Qr=Symbol("copyDoubleDash"),Xr=Symbol("copyDoubleDash"),wn=Symbol("deleteFromParserHintObject"),to=Symbol("emitWarning"),eo=Symbol("freeze"),io=Symbol("getDollarZero"),We=Symbol("getParserConfiguration"),so=Symbol("getUsageConfiguration"),bn=Symbol("guessLocale"),no=Symbol("guessVersion"),ro=Symbol("parsePositionalNumbers"),yn=Symbol("pkgUp"),Se=Symbol("populateParserHintArray"),Ze=Symbol("populateParserHintSingleValueDictionary"),Sn=Symbol("populateParserHintArrayDictionary"),xn=Symbol("populateParserHintDictionary"),En=Symbol("sanitizeKey"),Cn=Symbol("setKey"),On=Symbol("unfreeze"),oo=Symbol("validateAsync"),ao=Symbol("getCommandInstance"),lo=Symbol("getContext"),ho=Symbol("getHasOutput"),co=Symbol("getLoggerInstance"),fo=Symbol("getParseContext"),uo=Symbol("getUsageInstance"),po=Symbol("getValidationInstance"),ps=Symbol("hasParseCallback"),mo=Symbol("isGlobalContext"),ze=Symbol("postProcess"),go=Symbol("rebase"),vn=Symbol("reset"),Ci=Symbol("runYargsParserAndExecuteCommands"),An=Symbol("runValidation"),wo=Symbol("setHasOutput"),Be=Symbol("kTrackManuallySetKeys"),_n=class{constructor(t=[],e,i,n){this.customScriptName=!1,this.parsed=!1,ht.set(this,void 0),Me.set(this,void 0),Ei.set(this,{commands:[],fullCommands:[]}),Nt.set(this,null),$t.set(this,null),os.set(this,"show-hidden"),be.set(this,null),Re.set(this,!0),as.set(this,{}),Pt.set(this,!0),ls.set(this,[]),Lt.set(this,void 0),Xt.set(this,{}),Ft.set(this,!1),Dt.set(this,null),hs.set(this,!0),Ke.set(this,void 0),mt.set(this,""),P.set(this,void 0),cs.set(this,void 0),fs.set(this,{}),Tt.set(this,null),Ie.set(this,null),Je.set(this,{}),Ne.set(this,{}),ye.set(this,void 0),us.set(this,!1),z.set(this,void 0),Pe.set(this,!1),Le.set(this,!1),De.set(this,!1),U.set(this,void 0),ds.set(this,{}),te.set(this,null),rt.set(this,void 0),R(this,z,n,"f"),R(this,ye,t,"f"),R(this,Me,e,"f"),R(this,cs,i,"f"),R(this,Lt,new ss(this),"f"),this.$0=this[io](),this[vn](),R(this,ht,f(this,ht,"f"),"f"),R(this,U,f(this,U,"f"),"f"),R(this,rt,f(this,rt,"f"),"f"),R(this,P,f(this,P,"f"),"f"),f(this,P,"f").showHiddenOpt=f(this,os,"f"),R(this,Ke,this[Xr](),"f")}addHelpOpt(t,e){let i="help";return M("[string|boolean] [string]",[t,e],arguments.length),f(this,Dt,"f")&&(this[wn](f(this,Dt,"f")),R(this,Dt,null,"f")),t===!1&&e===void 0?this:(R(this,Dt,typeof t=="string"?t:i,"f"),this.boolean(f(this,Dt,"f")),this.describe(f(this,Dt,"f"),e||f(this,U,"f").deferY18nLookup("Show help")),this)}help(t,e){return this.addHelpOpt(t,e)}addShowHiddenOpt(t,e){if(M("[string|boolean] [string]",[t,e],arguments.length),t===!1&&e===void 0)return this;let i=typeof t=="string"?t:f(this,os,"f");return this.boolean(i),this.describe(i,e||f(this,U,"f").deferY18nLookup("Show hidden options")),f(this,P,"f").showHiddenOpt=i,this}showHidden(t,e){return this.addShowHiddenOpt(t,e)}alias(t,e){return M("<object|string|array> [string|array]",[t,e],arguments.length),this[Sn](this.alias.bind(this),"alias",t,e),this}array(t){return M("<array|string>",[t],arguments.length),this[Se]("array",t),this[Be](t),this}boolean(t){return M("<array|string>",[t],arguments.length),this[Se]("boolean",t),this[Be](t),this}check(t,e){return M("<function> [boolean]",[t,e],arguments.length),this.middleware((i,n)=>je(()=>t(i,n.getOptions()),r=>(r?(typeof r=="string"||r instanceof Error)&&f(this,U,"f").fail(r.toString(),r):f(this,U,"f").fail(f(this,z,"f").y18n.__("Argument check failed: %s",t.toString())),i),r=>(f(this,U,"f").fail(r.message?r.message:r.toString(),r),i)),!1,e),this}choices(t,e){return M("<object|string|array> [string|array]",[t,e],arguments.length),this[Sn](this.choices.bind(this),"choices",t,e),this}coerce(t,e){if(M("<object|string|array> [function]",[t,e],arguments.length),Array.isArray(t)){if(!e)throw new Q("coerce callback must be provided");for(let i of t)this.coerce(i,e);return this}else if(typeof t=="object"){for(let i of Object.keys(t))this.coerce(i,t[i]);return this}if(!e)throw new Q("coerce callback must be provided");return f(this,P,"f").key[t]=!0,f(this,Lt,"f").addCoerceMiddleware((i,n)=>{let r;return Object.prototype.hasOwnProperty.call(i,t)?je(()=>(r=n.getAliases(),e(i[t])),a=>{i[t]=a;let l=n.getInternalMethods().getParserConfiguration()["strip-aliased"];if(r[t]&&l!==!0)for(let h of r[t])i[h]=a;return i},a=>{throw new Q(a.message)}):i},t),this}conflicts(t,e){return M("<string|object> [string|array]",[t,e],arguments.length),f(this,rt,"f").conflicts(t,e),this}config(t="config",e,i){return M("[object|string] [string|function] [function]",[t,e,i],arguments.length),typeof t=="object"&&!Array.isArray(t)?(t=xi(t,f(this,Me,"f"),this[We]()["deep-merge-config"]||!1,f(this,z,"f")),f(this,P,"f").configObjects=(f(this,P,"f").configObjects||[]).concat(t),this):(typeof e=="function"&&(i=e,e=void 0),this.describe(t,e||f(this,U,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(t)?t:[t]).forEach(n=>{f(this,P,"f").config[n]=i||!0}),this)}completion(t,e,i){return M("[string] [string|boolean|function] [function]",[t,e,i],arguments.length),typeof e=="function"&&(i=e,e=void 0),R(this,$t,t||f(this,$t,"f")||"completion","f"),!e&&e!==!1&&(e="generate completion script"),this.command(f(this,$t,"f"),e),i&&f(this,Nt,"f").registerFunction(i),this}command(t,e,i,n,r,o){return M("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[t,e,i,n,r,o],arguments.length),f(this,ht,"f").addHandler(t,e,i,n,r,o),this}commands(t,e,i,n,r,o){return this.command(t,e,i,n,r,o)}commandDir(t,e){M("<string> [object]",[t,e],arguments.length);let i=f(this,cs,"f")||f(this,z,"f").require;return f(this,ht,"f").addDirectory(t,i,f(this,z,"f").getCallerFile(),e),this}count(t){return M("<array|string>",[t],arguments.length),this[Se]("count",t),this[Be](t),this}default(t,e,i){return M("<object|string|array> [*] [string]",[t,e,i],arguments.length),i&&(fn(t,f(this,z,"f")),f(this,P,"f").defaultDescription[t]=i),typeof e=="function"&&(fn(t,f(this,z,"f")),f(this,P,"f").defaultDescription[t]||(f(this,P,"f").defaultDescription[t]=f(this,U,"f").functionDescription(e)),e=e.call()),this[Ze](this.default.bind(this),"default",t,e),this}defaults(t,e,i){return this.default(t,e,i)}demandCommand(t=1,e,i,n){return M("[number] [number|string] [string|null|undefined] [string|null|undefined]",[t,e,i,n],arguments.length),typeof e!="number"&&(i=e,e=1/0),this.global("_",!1),f(this,P,"f").demandedCommands._={min:t,max:e,minMsg:i,maxMsg:n},this}demand(t,e,i){return Array.isArray(e)?(e.forEach(n=>{Ct(i,!0,f(this,z,"f")),this.demandOption(n,i)}),e=1/0):typeof e!="number"&&(i=e,e=1/0),typeof t=="number"?(Ct(i,!0,f(this,z,"f")),this.demandCommand(t,e,i,i)):Array.isArray(t)?t.forEach(n=>{Ct(i,!0,f(this,z,"f")),this.demandOption(n,i)}):typeof i=="string"?this.demandOption(t,i):(i===!0||typeof i>"u")&&this.demandOption(t),this}demandOption(t,e){return M("<object|string|array> [string]",[t,e],arguments.length),this[Ze](this.demandOption.bind(this),"demandedOptions",t,e),this}deprecateOption(t,e){return M("<string> [string|boolean]",[t,e],arguments.length),f(this,P,"f").deprecatedOptions[t]=e,this}describe(t,e){return M("<object|string|array> [string]",[t,e],arguments.length),this[Cn](t,!0),f(this,U,"f").describe(t,e),this}detectLocale(t){return M("<boolean>",[t],arguments.length),R(this,Re,t,"f"),this}env(t){return M("[string|boolean]",[t],arguments.length),t===!1?delete f(this,P,"f").envPrefix:f(this,P,"f").envPrefix=t||"",this}epilogue(t){return M("<string>",[t],arguments.length),f(this,U,"f").epilog(t),this}epilog(t){return this.epilogue(t)}example(t,e){return M("<string|array> [string]",[t,e],arguments.length),Array.isArray(t)?t.forEach(i=>this.example(...i)):f(this,U,"f").example(t,e),this}exit(t,e){R(this,Ft,!0,"f"),R(this,be,e,"f"),f(this,Pt,"f")&&f(this,z,"f").process.exit(t)}exitProcess(t=!0){return M("[boolean]",[t],arguments.length),R(this,Pt,t,"f"),this}fail(t){if(M("<function|boolean>",[t],arguments.length),typeof t=="boolean"&&t!==!1)throw new Q("Invalid first argument. Expected function or boolean 'false'");return f(this,U,"f").failFn(t),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(t,e){return M("<array> [function]",[t,e],arguments.length),e?f(this,Nt,"f").getCompletion(t,e):new Promise((i,n)=>{f(this,Nt,"f").getCompletion(t,(r,o)=>{r?n(r):i(o)})})}getDemandedOptions(){return M([],0),f(this,P,"f").demandedOptions}getDemandedCommands(){return M([],0),f(this,P,"f").demandedCommands}getDeprecatedOptions(){return M([],0),f(this,P,"f").deprecatedOptions}getDetectLocale(){return f(this,Re,"f")}getExitProcess(){return f(this,Pt,"f")}getGroups(){return Object.assign({},f(this,Xt,"f"),f(this,Ne,"f"))}getHelp(){if(R(this,Ft,!0,"f"),!f(this,U,"f").hasCachedHelpMessage()){if(!this.parsed){let e=this[Ci](f(this,ye,"f"),void 0,void 0,0,!0);if(X(e))return e.then(()=>f(this,U,"f").help())}let t=f(this,ht,"f").runDefaultBuilderOn(this);if(X(t))return t.then(()=>f(this,U,"f").help())}return Promise.resolve(f(this,U,"f").help())}getOptions(){return f(this,P,"f")}getStrict(){return f(this,Pe,"f")}getStrictCommands(){return f(this,Le,"f")}getStrictOptions(){return f(this,De,"f")}global(t,e){return M("<string|array> [boolean]",[t,e],arguments.length),t=[].concat(t),e!==!1?f(this,P,"f").local=f(this,P,"f").local.filter(i=>t.indexOf(i)===-1):t.forEach(i=>{f(this,P,"f").local.includes(i)||f(this,P,"f").local.push(i)}),this}group(t,e){M("<string|array> <string>",[t,e],arguments.length);let i=f(this,Ne,"f")[e]||f(this,Xt,"f")[e];f(this,Ne,"f")[e]&&delete f(this,Ne,"f")[e];let n={};return f(this,Xt,"f")[e]=(i||[]).concat(t).filter(r=>n[r]?!1:n[r]=!0),this}hide(t){return M("<string>",[t],arguments.length),f(this,P,"f").hiddenOptions.push(t),this}implies(t,e){return M("<string|object> [number|string|array]",[t,e],arguments.length),f(this,rt,"f").implies(t,e),this}locale(t){return M("[string]",[t],arguments.length),t===void 0?(this[bn](),f(this,z,"f").y18n.getLocale()):(R(this,Re,!1,"f"),f(this,z,"f").y18n.setLocale(t),this)}middleware(t,e,i){return f(this,Lt,"f").addMiddleware(t,!!e,i)}nargs(t,e){return M("<string|object|array> [number]",[t,e],arguments.length),this[Ze](this.nargs.bind(this),"narg",t,e),this}normalize(t){return M("<array|string>",[t],arguments.length),this[Se]("normalize",t),this}number(t){return M("<array|string>",[t],arguments.length),this[Se]("number",t),this[Be](t),this}option(t,e){if(M("<string|object> [object]",[t,e],arguments.length),typeof t=="object")Object.keys(t).forEach(i=>{this.options(i,t[i])});else{typeof e!="object"&&(e={}),this[Be](t),f(this,te,"f")&&(t==="version"||(e==null?void 0:e.alias)==="version")&&this[to](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),f(this,P,"f").key[t]=!0,e.alias&&this.alias(t,e.alias);let i=e.deprecate||e.deprecated;i&&this.deprecateOption(t,i);let n=e.demand||e.required||e.require;n&&this.demand(t,n),e.demandOption&&this.demandOption(t,typeof e.demandOption=="string"?e.demandOption:void 0),e.conflicts&&this.conflicts(t,e.conflicts),"default"in e&&this.default(t,e.default),e.implies!==void 0&&this.implies(t,e.implies),e.nargs!==void 0&&this.nargs(t,e.nargs),e.config&&this.config(t,e.configParser),e.normalize&&this.normalize(t),e.choices&&this.choices(t,e.choices),e.coerce&&this.coerce(t,e.coerce),e.group&&this.group(t,e.group),(e.boolean||e.type==="boolean")&&(this.boolean(t),e.alias&&this.boolean(e.alias)),(e.array||e.type==="array")&&(this.array(t),e.alias&&this.array(e.alias)),(e.number||e.type==="number")&&(this.number(t),e.alias&&this.number(e.alias)),(e.string||e.type==="string")&&(this.string(t),e.alias&&this.string(e.alias)),(e.count||e.type==="count")&&this.count(t),typeof e.global=="boolean"&&this.global(t,e.global),e.defaultDescription&&(f(this,P,"f").defaultDescription[t]=e.defaultDescription),e.skipValidation&&this.skipValidation(t);let r=e.describe||e.description||e.desc,o=f(this,U,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(o,t)||typeof r=="string")&&this.describe(t,r),e.hidden&&this.hide(t),e.requiresArg&&this.requiresArg(t)}return this}options(t,e){return this.option(t,e)}parse(t,e,i){M("[string|array] [function|boolean|object] [function]",[t,e,i],arguments.length),this[eo](),typeof t>"u"&&(t=f(this,ye,"f")),typeof e=="object"&&(R(this,Ie,e,"f"),e=i),typeof e=="function"&&(R(this,Tt,e,"f"),e=!1),e||R(this,ye,t,"f"),f(this,Tt,"f")&&R(this,Pt,!1,"f");let n=this[Ci](t,!!e),r=this.parsed;return f(this,Nt,"f").setParsed(this.parsed),X(n)?n.then(o=>(f(this,Tt,"f")&&f(this,Tt,"f").call(this,f(this,be,"f"),o,f(this,mt,"f")),o)).catch(o=>{throw f(this,Tt,"f")&&f(this,Tt,"f")(o,this.parsed.argv,f(this,mt,"f")),o}).finally(()=>{this[On](),this.parsed=r}):(f(this,Tt,"f")&&f(this,Tt,"f").call(this,f(this,be,"f"),n,f(this,mt,"f")),this[On](),this.parsed=r,n)}parseAsync(t,e,i){let n=this.parse(t,e,i);return X(n)?n:Promise.resolve(n)}parseSync(t,e,i){let n=this.parse(t,e,i);if(X(n))throw new Q(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return n}parserConfiguration(t){return M("<object>",[t],arguments.length),R(this,fs,t,"f"),this}pkgConf(t,e){M("<string> [string]",[t,e],arguments.length);let i=null,n=this[yn](e||f(this,Me,"f"));return n[t]&&typeof n[t]=="object"&&(i=xi(n[t],e||f(this,Me,"f"),this[We]()["deep-merge-config"]||!1,f(this,z,"f")),f(this,P,"f").configObjects=(f(this,P,"f").configObjects||[]).concat(i)),this}positional(t,e){M("<string> <object>",[t,e],arguments.length);let i=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];e=ge(e,(o,a)=>o==="type"&&!["string","number","boolean"].includes(a)?!1:i.includes(o));let n=f(this,Ei,"f").fullCommands[f(this,Ei,"f").fullCommands.length-1],r=n?f(this,ht,"f").cmdToParseOptions(n):{array:[],alias:{},default:{},demand:{}};return qe(r).forEach(o=>{let a=r[o];Array.isArray(a)?a.indexOf(t)!==-1&&(e[o]=!0):a[t]&&!(o in e)&&(e[o]=a[t])}),this.group(t,f(this,U,"f").getPositionalGroupName()),this.option(t,e)}recommendCommands(t=!0){return M("[boolean]",[t],arguments.length),R(this,us,t,"f"),this}required(t,e,i){return this.demand(t,e,i)}require(t,e,i){return this.demand(t,e,i)}requiresArg(t){return M("<array|string|object> [number]",[t],arguments.length),typeof t=="string"&&f(this,P,"f").narg[t]?this:(this[Ze](this.requiresArg.bind(this),"narg",t,NaN),this)}showCompletionScript(t,e){return M("[string] [string]",[t,e],arguments.length),t=t||this.$0,f(this,Ke,"f").log(f(this,Nt,"f").generateCompletionScript(t,e||f(this,$t,"f")||"completion")),this}showHelp(t){if(M("[string|function]",[t],arguments.length),R(this,Ft,!0,"f"),!f(this,U,"f").hasCachedHelpMessage()){if(!this.parsed){let i=this[Ci](f(this,ye,"f"),void 0,void 0,0,!0);if(X(i))return i.then(()=>{f(this,U,"f").showHelp(t)}),this}let e=f(this,ht,"f").runDefaultBuilderOn(this);if(X(e))return e.then(()=>{f(this,U,"f").showHelp(t)}),this}return f(this,U,"f").showHelp(t),this}scriptName(t){return this.customScriptName=!0,this.$0=t,this}showHelpOnFail(t,e){return M("[boolean|string] [string]",[t,e],arguments.length),f(this,U,"f").showHelpOnFail(t,e),this}showVersion(t){return M("[string|function]",[t],arguments.length),f(this,U,"f").showVersion(t),this}skipValidation(t){return M("<array|string>",[t],arguments.length),this[Se]("skipValidation",t),this}strict(t){return M("[boolean]",[t],arguments.length),R(this,Pe,t!==!1,"f"),this}strictCommands(t){return M("[boolean]",[t],arguments.length),R(this,Le,t!==!1,"f"),this}strictOptions(t){return M("[boolean]",[t],arguments.length),R(this,De,t!==!1,"f"),this}string(t){return M("<array|string>",[t],arguments.length),this[Se]("string",t),this[Be](t),this}terminalWidth(){return M([],0),f(this,z,"f").process.stdColumns}updateLocale(t){return this.updateStrings(t)}updateStrings(t){return M("<object>",[t],arguments.length),R(this,Re,!1,"f"),f(this,z,"f").y18n.updateLocale(t),this}usage(t,e,i,n){if(M("<string|null|undefined> [string|boolean] [function|object] [function]",[t,e,i,n],arguments.length),e!==void 0){if(Ct(t,null,f(this,z,"f")),(t||"").match(/^\$0( |$)/))return this.command(t,e,i,n);throw new Q(".usage() description must start with $0 if being used as alias for .command()")}else return f(this,U,"f").usage(t),this}usageConfiguration(t){return M("<object>",[t],arguments.length),R(this,ds,t,"f"),this}version(t,e,i){let n="version";if(M("[boolean|string] [string] [string]",[t,e,i],arguments.length),f(this,te,"f")&&(this[wn](f(this,te,"f")),f(this,U,"f").version(void 0),R(this,te,null,"f")),arguments.length===0)i=this[no](),t=n;else if(arguments.length===1){if(t===!1)return this;i=t,t=n}else arguments.length===2&&(i=e,e=void 0);return R(this,te,typeof t=="string"?t:n,"f"),e=e||f(this,U,"f").deferY18nLookup("Show version number"),f(this,U,"f").version(i||void 0),this.boolean(f(this,te,"f")),this.describe(f(this,te,"f"),e),this}wrap(t){return M("<number|null|undefined>",[t],arguments.length),f(this,U,"f").wrap(t),this}[(ht=new WeakMap,Me=new WeakMap,Ei=new WeakMap,Nt=new WeakMap,$t=new WeakMap,os=new WeakMap,be=new WeakMap,Re=new WeakMap,as=new WeakMap,Pt=new WeakMap,ls=new WeakMap,Lt=new WeakMap,Xt=new WeakMap,Ft=new WeakMap,Dt=new WeakMap,hs=new WeakMap,Ke=new WeakMap,mt=new WeakMap,P=new WeakMap,cs=new WeakMap,fs=new WeakMap,Tt=new WeakMap,Ie=new WeakMap,Je=new WeakMap,Ne=new WeakMap,ye=new WeakMap,us=new WeakMap,z=new WeakMap,Pe=new WeakMap,Le=new WeakMap,De=new WeakMap,U=new WeakMap,ds=new WeakMap,te=new WeakMap,rt=new WeakMap,Qr)](t){if(!t._||!t["--"])return t;t._.push.apply(t._,t["--"]);try{delete t["--"]}catch{}return t}[Xr](){return{log:(...t)=>{this[ps]()||console.log(...t),R(this,Ft,!0,"f"),f(this,mt,"f").length&&R(this,mt,f(this,mt,"f")+`
`,"f"),R(this,mt,f(this,mt,"f")+t.join(" "),"f")},error:(...t)=>{this[ps]()||console.error(...t),R(this,Ft,!0,"f"),f(this,mt,"f").length&&R(this,mt,f(this,mt,"f")+`
`,"f"),R(this,mt,f(this,mt,"f")+t.join(" "),"f")}}}[wn](t){qe(f(this,P,"f")).forEach(e=>{if((n=>n==="configObjects")(e))return;let i=f(this,P,"f")[e];Array.isArray(i)?i.includes(t)&&i.splice(i.indexOf(t),1):typeof i=="object"&&delete i[t]}),delete f(this,U,"f").getDescriptions()[t]}[to](t,e,i){f(this,as,"f")[i]||(f(this,z,"f").process.emitWarning(t,e),f(this,as,"f")[i]=!0)}[eo](){f(this,ls,"f").push({options:f(this,P,"f"),configObjects:f(this,P,"f").configObjects.slice(0),exitProcess:f(this,Pt,"f"),groups:f(this,Xt,"f"),strict:f(this,Pe,"f"),strictCommands:f(this,Le,"f"),strictOptions:f(this,De,"f"),completionCommand:f(this,$t,"f"),output:f(this,mt,"f"),exitError:f(this,be,"f"),hasOutput:f(this,Ft,"f"),parsed:this.parsed,parseFn:f(this,Tt,"f"),parseContext:f(this,Ie,"f")}),f(this,U,"f").freeze(),f(this,rt,"f").freeze(),f(this,ht,"f").freeze(),f(this,Lt,"f").freeze()}[io](){let t="",e;return/\b(node|iojs|electron)(\.exe)?$/.test(f(this,z,"f").process.argv()[0])?e=f(this,z,"f").process.argv().slice(1,2):e=f(this,z,"f").process.argv().slice(0,1),t=e.map(i=>{let n=this[go](f(this,Me,"f"),i);return i.match(/^(\/|([a-zA-Z]:)?\\)/)&&n.length<i.length?n:i}).join(" ").trim(),f(this,z,"f").getEnv("_")&&f(this,z,"f").getProcessArgvBin()===f(this,z,"f").getEnv("_")&&(t=f(this,z,"f").getEnv("_").replace(`${f(this,z,"f").path.dirname(f(this,z,"f").process.execPath())}/`,"")),t}[We](){return f(this,fs,"f")}[so](){return f(this,ds,"f")}[bn](){if(!f(this,Re,"f"))return;let t=f(this,z,"f").getEnv("LC_ALL")||f(this,z,"f").getEnv("LC_MESSAGES")||f(this,z,"f").getEnv("LANG")||f(this,z,"f").getEnv("LANGUAGE")||"en_US";this.locale(t.replace(/[.:].*/,""))}[no](){return this[yn]().version||"unknown"}[ro](t){let e=t["--"]?t["--"]:t._;for(let i=0,n;(n=e[i])!==void 0;i++)f(this,z,"f").Parser.looksLikeNumber(n)&&Number.isSafeInteger(Math.floor(parseFloat(`${n}`)))&&(e[i]=Number(n));return t}[yn](t){let e=t||"*";if(f(this,Je,"f")[e])return f(this,Je,"f")[e];let i={};try{let n=t||f(this,z,"f").mainFilename;!t&&f(this,z,"f").path.extname(n)&&(n=f(this,z,"f").path.dirname(n));let r=f(this,z,"f").findUp(n,(o,a)=>{if(a.includes("package.json"))return"package.json"});Ct(r,void 0,f(this,z,"f")),i=JSON.parse(f(this,z,"f").readFileSync(r,"utf8"))}catch{}return f(this,Je,"f")[e]=i||{},f(this,Je,"f")[e]}[Se](t,e){e=[].concat(e),e.forEach(i=>{i=this[En](i),f(this,P,"f")[t].push(i)})}[Ze](t,e,i,n){this[xn](t,e,i,n,(r,o,a)=>{f(this,P,"f")[r][o]=a})}[Sn](t,e,i,n){this[xn](t,e,i,n,(r,o,a)=>{f(this,P,"f")[r][o]=(f(this,P,"f")[r][o]||[]).concat(a)})}[xn](t,e,i,n,r){if(Array.isArray(i))i.forEach(o=>{t(o,n)});else if((o=>typeof o=="object")(i))for(let o of qe(i))t(o,i[o]);else r(e,this[En](i),n)}[En](t){return t==="__proto__"?"___proto___":t}[Cn](t,e){return this[Ze](this[Cn].bind(this),"key",t,e),this}[On](){var t,e,i,n,r,o,a,l,h,u,c,d;let p=f(this,ls,"f").pop();Ct(p,void 0,f(this,z,"f"));let S;t=this,e=this,i=this,n=this,r=this,o=this,a=this,l=this,h=this,u=this,c=this,d=this,{options:{set value(w){R(t,P,w,"f")}}.value,configObjects:S,exitProcess:{set value(w){R(e,Pt,w,"f")}}.value,groups:{set value(w){R(i,Xt,w,"f")}}.value,output:{set value(w){R(n,mt,w,"f")}}.value,exitError:{set value(w){R(r,be,w,"f")}}.value,hasOutput:{set value(w){R(o,Ft,w,"f")}}.value,parsed:this.parsed,strict:{set value(w){R(a,Pe,w,"f")}}.value,strictCommands:{set value(w){R(l,Le,w,"f")}}.value,strictOptions:{set value(w){R(h,De,w,"f")}}.value,completionCommand:{set value(w){R(u,$t,w,"f")}}.value,parseFn:{set value(w){R(c,Tt,w,"f")}}.value,parseContext:{set value(w){R(d,Ie,w,"f")}}.value}=p,f(this,P,"f").configObjects=S,f(this,U,"f").unfreeze(),f(this,rt,"f").unfreeze(),f(this,ht,"f").unfreeze(),f(this,Lt,"f").unfreeze()}[oo](t,e){return je(e,i=>(t(i),i))}getInternalMethods(){return{getCommandInstance:this[ao].bind(this),getContext:this[lo].bind(this),getHasOutput:this[ho].bind(this),getLoggerInstance:this[co].bind(this),getParseContext:this[fo].bind(this),getParserConfiguration:this[We].bind(this),getUsageConfiguration:this[so].bind(this),getUsageInstance:this[uo].bind(this),getValidationInstance:this[po].bind(this),hasParseCallback:this[ps].bind(this),isGlobalContext:this[mo].bind(this),postProcess:this[ze].bind(this),reset:this[vn].bind(this),runValidation:this[An].bind(this),runYargsParserAndExecuteCommands:this[Ci].bind(this),setHasOutput:this[wo].bind(this)}}[ao](){return f(this,ht,"f")}[lo](){return f(this,Ei,"f")}[ho](){return f(this,Ft,"f")}[co](){return f(this,Ke,"f")}[fo](){return f(this,Ie,"f")||{}}[uo](){return f(this,U,"f")}[po](){return f(this,rt,"f")}[ps](){return!!f(this,Tt,"f")}[mo](){return f(this,hs,"f")}[ze](t,e,i,n){return i||X(t)||(e||(t=this[Qr](t)),(this[We]()["parse-positional-numbers"]||this[We]()["parse-positional-numbers"]===void 0)&&(t=this[ro](t)),n&&(t=Te(t,this,f(this,Lt,"f").getMiddleware(),!1))),t}[vn](t={}){R(this,P,f(this,P,"f")||{},"f");let e={};e.local=f(this,P,"f").local||[],e.configObjects=f(this,P,"f").configObjects||[];let i={};e.local.forEach(o=>{i[o]=!0,(t[o]||[]).forEach(a=>{i[a]=!0})}),Object.assign(f(this,Ne,"f"),Object.keys(f(this,Xt,"f")).reduce((o,a)=>{let l=f(this,Xt,"f")[a].filter(h=>!(h in i));return l.length>0&&(o[a]=l),o},{})),R(this,Xt,{},"f");let n=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],r=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return n.forEach(o=>{e[o]=(f(this,P,"f")[o]||[]).filter(a=>!i[a])}),r.forEach(o=>{e[o]=ge(f(this,P,"f")[o],a=>!i[a])}),e.envPrefix=f(this,P,"f").envPrefix,R(this,P,e,"f"),R(this,U,f(this,U,"f")?f(this,U,"f").reset(i):Hr(this,f(this,z,"f")),"f"),R(this,rt,f(this,rt,"f")?f(this,rt,"f").reset(i):Jr(this,f(this,U,"f"),f(this,z,"f")),"f"),R(this,ht,f(this,ht,"f")?f(this,ht,"f").reset():Br(f(this,U,"f"),f(this,rt,"f"),f(this,Lt,"f"),f(this,z,"f")),"f"),f(this,Nt,"f")||R(this,Nt,qr(this,f(this,U,"f"),f(this,ht,"f"),f(this,z,"f")),"f"),f(this,Lt,"f").reset(),R(this,$t,null,"f"),R(this,mt,"","f"),R(this,be,null,"f"),R(this,Ft,!1,"f"),this.parsed=!1,this}[go](t,e){return f(this,z,"f").path.relative(t,e)}[Ci](t,e,i,n=0,r=!1){let o=!!i||r;t=t||f(this,ye,"f"),f(this,P,"f").__=f(this,z,"f").y18n.__,f(this,P,"f").configuration=this[We]();let a=!!f(this,P,"f").configuration["populate--"],l=Object.assign({},f(this,P,"f").configuration,{"populate--":!0}),h=f(this,z,"f").Parser.detailed(t,Object.assign({},f(this,P,"f"),{configuration:{"parse-positional-numbers":!1,...l}})),u=Object.assign(h.argv,f(this,Ie,"f")),c,d=h.aliases,p=!1,S=!1;Object.keys(u).forEach(w=>{w===f(this,Dt,"f")&&u[w]?p=!0:w===f(this,te,"f")&&u[w]&&(S=!0)}),u.$0=this.$0,this.parsed=h,n===0&&f(this,U,"f").clearCachedHelpMessage();try{if(this[bn](),e)return this[ze](u,a,!!i,!1);f(this,Dt,"f")&&[f(this,Dt,"f")].concat(d[f(this,Dt,"f")]||[]).filter(_=>_.length>1).includes(""+u._[u._.length-1])&&(u._.pop(),p=!0),R(this,hs,!1,"f");let w=f(this,ht,"f").getCommands(),m=f(this,Nt,"f").completionKey in u,E=p||m||r;if(u._.length){if(w.length){let v;for(let _=n||0,O;u._[_]!==void 0;_++)if(O=String(u._[_]),w.includes(O)&&O!==f(this,$t,"f")){let T=f(this,ht,"f").runCommand(O,this,h,_+1,r,p||S||r);return this[ze](T,a,!!i,!1)}else if(!v&&O!==f(this,$t,"f")){v=O;break}!f(this,ht,"f").hasDefaultCommand()&&f(this,us,"f")&&v&&!E&&f(this,rt,"f").recommendCommands(v,w)}f(this,$t,"f")&&u._.includes(f(this,$t,"f"))&&!m&&(f(this,Pt,"f")&&we(!0),this.showCompletionScript(),this.exit(0))}if(f(this,ht,"f").hasDefaultCommand()&&!E){let v=f(this,ht,"f").runCommand(null,this,h,0,r,p||S||r);return this[ze](v,a,!!i,!1)}if(m){f(this,Pt,"f")&&we(!0),t=[].concat(t);let v=t.slice(t.indexOf(`--${f(this,Nt,"f").completionKey}`)+1);return f(this,Nt,"f").getCompletion(v,(_,O)=>{if(_)throw new Q(_.message);(O||[]).forEach(T=>{f(this,Ke,"f").log(T)}),this.exit(0)}),this[ze](u,!a,!!i,!1)}if(f(this,Ft,"f")||(p?(f(this,Pt,"f")&&we(!0),o=!0,this.showHelp("log"),this.exit(0)):S&&(f(this,Pt,"f")&&we(!0),o=!0,f(this,U,"f").showVersion("log"),this.exit(0))),!o&&f(this,P,"f").skipValidation.length>0&&(o=Object.keys(u).some(v=>f(this,P,"f").skipValidation.indexOf(v)>=0&&u[v]===!0)),!o){if(h.error)throw new Q(h.error.message);if(!m){let v=this[An](d,{},h.error);i||(c=Te(u,this,f(this,Lt,"f").getMiddleware(),!0)),c=this[oo](v,c??u),X(c)&&!i&&(c=c.then(()=>Te(u,this,f(this,Lt,"f").getMiddleware(),!1)))}}}catch(w){if(w instanceof Q)f(this,U,"f").fail(w.message,w);else throw w}return this[ze](c??u,a,!!i,!0)}[An](t,e,i,n){let r={...this.getDemandedOptions()};return o=>{if(i)throw new Q(i.message);f(this,rt,"f").nonOptionCount(o),f(this,rt,"f").requiredArguments(o,r);let a=!1;f(this,Le,"f")&&(a=f(this,rt,"f").unknownCommands(o)),f(this,Pe,"f")&&!a?f(this,rt,"f").unknownArguments(o,t,e,!!n):f(this,De,"f")&&f(this,rt,"f").unknownArguments(o,t,{},!1,!1),f(this,rt,"f").limitedChoices(o),f(this,rt,"f").implications(o),f(this,rt,"f").conflicting(o)}}[wo](){R(this,Ft,!0,"f")}[Be](t){if(typeof t=="string")f(this,P,"f").key[t]=!0;else for(let e of t)f(this,P,"f").key[e]=!0}};function Ur(s){return!!s&&typeof s.getInternalMethods=="function"}var th=bo(cn),yo=th;var Mn=k(require("fs"),1),jo=k(require("path"),1);var So=(s=0)=>t=>`\x1B[${t+s}m`,xo=(s=0)=>t=>`\x1B[${38+s};5;${t}m`,Eo=(s=0)=>(t,e,i)=>`\x1B[${38+s};2;${t};${e};${i}m`,et={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},Hu=Object.keys(et.modifier),eh=Object.keys(et.color),ih=Object.keys(et.bgColor),ku=[...eh,...ih];function sh(){let s=new Map;for(let[t,e]of Object.entries(et)){for(let[i,n]of Object.entries(e))et[i]={open:`\x1B[${n[0]}m`,close:`\x1B[${n[1]}m`},e[i]=et[i],s.set(n[0],n[1]);Object.defineProperty(et,t,{value:e,enumerable:!1})}return Object.defineProperty(et,"codes",{value:s,enumerable:!1}),et.color.close="\x1B[39m",et.bgColor.close="\x1B[49m",et.color.ansi=So(),et.color.ansi256=xo(),et.color.ansi16m=Eo(),et.bgColor.ansi=So(10),et.bgColor.ansi256=xo(10),et.bgColor.ansi16m=Eo(10),Object.defineProperties(et,{rgbToAnsi256:{value(t,e,i){return t===e&&e===i?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(e/255*5)+Math.round(i/255*5)},enumerable:!1},hexToRgb:{value(t){let e=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!e)return[0,0,0];let[i]=e;i.length===3&&(i=[...i].map(r=>r+r).join(""));let n=Number.parseInt(i,16);return[n>>16&255,n>>8&255,n&255]},enumerable:!1},hexToAnsi256:{value:t=>et.rgbToAnsi256(...et.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value(t){if(t<8)return 30+t;if(t<16)return 90+(t-8);let e,i,n;if(t>=232)e=((t-232)*10+8)/255,i=e,n=e;else{t-=16;let a=t%36;e=Math.floor(t/36)/5,i=Math.floor(a/6)/5,n=a%6/5}let r=Math.max(e,i,n)*2;if(r===0)return 30;let o=30+(Math.round(n)<<2|Math.round(i)<<1|Math.round(e));return r===2&&(o+=60),o},enumerable:!1},rgbToAnsi:{value:(t,e,i)=>et.ansi256ToAnsi(et.rgbToAnsi256(t,e,i)),enumerable:!1},hexToAnsi:{value:t=>et.ansi256ToAnsi(et.hexToAnsi256(t)),enumerable:!1}}),et}var nh=sh(),Vt=nh;var gs=k(require("node:process"),1),Oo=k(require("node:os"),1),$n=k(require("node:tty"),1);function Wt(s,t=globalThis.Deno?globalThis.Deno.args:gs.default.argv){let e=s.startsWith("-")?"":s.length===1?"-":"--",i=t.indexOf(e+s),n=t.indexOf("--");return i!==-1&&(n===-1||i<n)}var{env:ot}=gs.default,ms;Wt("no-color")||Wt("no-colors")||Wt("color=false")||Wt("color=never")?ms=0:(Wt("color")||Wt("colors")||Wt("color=true")||Wt("color=always"))&&(ms=1);function rh(){if("FORCE_COLOR"in ot)return ot.FORCE_COLOR==="true"?1:ot.FORCE_COLOR==="false"?0:ot.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(ot.FORCE_COLOR,10),3)}function oh(s){return s===0?!1:{level:s,hasBasic:!0,has256:s>=2,has16m:s>=3}}function ah(s,{streamIsTTY:t,sniffFlags:e=!0}={}){let i=rh();i!==void 0&&(ms=i);let n=e?ms:i;if(n===0)return 0;if(e){if(Wt("color=16m")||Wt("color=full")||Wt("color=truecolor"))return 3;if(Wt("color=256"))return 2}if("TF_BUILD"in ot&&"AGENT_NAME"in ot)return 1;if(s&&!t&&n===void 0)return 0;let r=n||0;if(ot.TERM==="dumb")return r;if(gs.default.platform==="win32"){let o=Oo.default.release().split(".");return Number(o[0])>=10&&Number(o[2])>=10586?Number(o[2])>=14931?3:2:1}if("CI"in ot)return["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some(o=>o in ot)?3:["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(o=>o in ot)||ot.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in ot)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ot.TEAMCITY_VERSION)?1:0;if(ot.COLORTERM==="truecolor"||ot.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in ot){let o=Number.parseInt((ot.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ot.TERM_PROGRAM){case"iTerm.app":return o>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ot.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ot.TERM)||"COLORTERM"in ot?1:r}function Co(s,t={}){let e=ah(s,{streamIsTTY:s&&s.isTTY,...t});return oh(e)}var lh={stdout:Co({isTTY:$n.default.isatty(1)}),stderr:Co({isTTY:$n.default.isatty(2)})},vo=lh;function Ao(s,t,e){let i=s.indexOf(t);if(i===-1)return s;let n=t.length,r=0,o="";do o+=s.slice(r,i)+t+e,r=i+n,i=s.indexOf(t,r);while(i!==-1);return o+=s.slice(r),o}function _o(s,t,e,i){let n=0,r="";do{let o=s[i-1]==="\r";r+=s.slice(n,o?i-1:i)+t+(o?`\r
`:`
`)+e,n=i+1,i=s.indexOf(`
`,n)}while(i!==-1);return r+=s.slice(n),r}var{stdout:$o,stderr:Fo}=vo,Fn=Symbol("GENERATOR"),Qe=Symbol("STYLER"),Oi=Symbol("IS_EMPTY"),To=["ansi","ansi","ansi256","ansi16m"],Xe=Object.create(null),hh=(s,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let e=$o?$o.level:0;s.level=t.level===void 0?e:t.level};var ch=s=>{let t=(...e)=>e.join(" ");return hh(t,s),Object.setPrototypeOf(t,vi.prototype),t};function vi(s){return ch(s)}Object.setPrototypeOf(vi.prototype,Function.prototype);for(let[s,t]of Object.entries(Vt))Xe[s]={get(){let e=ws(this,jn(t.open,t.close,this[Qe]),this[Oi]);return Object.defineProperty(this,s,{value:e}),e}};Xe.visible={get(){let s=ws(this,this[Qe],!0);return Object.defineProperty(this,"visible",{value:s}),s}};var Tn=(s,t,e,...i)=>s==="rgb"?t==="ansi16m"?Vt[e].ansi16m(...i):t==="ansi256"?Vt[e].ansi256(Vt.rgbToAnsi256(...i)):Vt[e].ansi(Vt.rgbToAnsi(...i)):s==="hex"?Tn("rgb",t,e,...Vt.hexToRgb(...i)):Vt[e][s](...i),fh=["rgb","hex","ansi256"];for(let s of fh){Xe[s]={get(){let{level:e}=this;return function(...i){let n=jn(Tn(s,To[e],"color",...i),Vt.color.close,this[Qe]);return ws(this,n,this[Oi])}}};let t="bg"+s[0].toUpperCase()+s.slice(1);Xe[t]={get(){let{level:e}=this;return function(...i){let n=jn(Tn(s,To[e],"bgColor",...i),Vt.bgColor.close,this[Qe]);return ws(this,n,this[Oi])}}}}var uh=Object.defineProperties(()=>{},{...Xe,level:{enumerable:!0,get(){return this[Fn].level},set(s){this[Fn].level=s}}}),jn=(s,t,e)=>{let i,n;return e===void 0?(i=s,n=t):(i=e.openAll+s,n=t+e.closeAll),{open:s,close:t,openAll:i,closeAll:n,parent:e}},ws=(s,t,e)=>{let i=(...n)=>dh(i,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(i,uh),i[Fn]=s,i[Qe]=t,i[Oi]=e,i},dh=(s,t)=>{if(s.level<=0||!t)return s[Oi]?"":t;let e=s[Qe];if(e===void 0)return t;let{openAll:i,closeAll:n}=e;if(t.includes("\x1B"))for(;e!==void 0;)t=Ao(t,e.close,e.open),e=e.parent;let r=t.indexOf(`
`);return r!==-1&&(t=_o(t,n,i,r)),i+t+n};Object.defineProperties(vi.prototype,Xe);var ph=vi(),Qu=vi({level:Fo?Fo.level:0});var Z=ph;var x={info:s=>console.log(Z.blue(s)),success:s=>console.log(Z.green(s)),error:s=>console.error(Z.red(s)),debug:s=>console.log(Z.gray(s)),warn:s=>console.log(Z.yellow(s))};function Mo(){try{let s=jo.default.resolve(process.cwd(),".env");if(!Mn.default.existsSync(s))return;let t=Mn.default.readFileSync(s,"utf-8"),e={};return t.split(`
`).forEach(i=>{if(i=i.trim(),!i||i.startsWith("#"))return;let[n,...r]=i.split("="),o=r.join("=").trim();if(!n||!o)return;let a=o.replace(/^["']|["']$/g,"");process.env[n.trim()]=a,e[n.trim()]=a}),e}catch(s){x.debug(`Error loading .env file: ${s.message}`)}}function zt(){if(x.debug("Checking for GITHUB_TOKEN..."),!process.env.GITHUB_TOKEN)throw new Error("GITHUB_TOKEN is not set in .env file");if(process.env.GITHUB_TOKEN==="your_github_token_here")throw new Error("GITHUB_TOKEN is still set to the default value. Please update it in .env file");x.debug("GITHUB_TOKEN validation passed")}async function ee(s,t={}){let e=`${he}${s}`,i=await fetch(e,{headers:{Authorization:`token ${process.env.GITHUB_TOKEN}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},...t});if(!i.ok){let n=await i.text();throw x.error(`GitHub API Error: ${i.status} ${i.statusText}`),x.debug(`Response: ${n}`),i.status===404?new Error("Repository or path not found"):i.status===401?new Error("Invalid GitHub token or missing permissions"):i.status===403?new Error("API rate limit exceeded or insufficient permissions"):new Error(`GitHub API error: ${i.status} ${i.statusText}`)}return i.json()}async function Rn(s,t,e,i){x.debug(`Creating commit in ${s}/${t}...`);try{let r=(await ee(`/repos/${s}/${t}`)).default_branch;x.debug(`Default branch: ${r}`);let o=await ee(`/repos/${s}/${t}/git/ref/heads/${r}`);x.debug(`Current ref: ${o.object.sha}`);let a=await ee(`/repos/${s}/${t}/git/commits/${o.object.sha}`);x.debug(`Parent commit: ${a.sha}`);let l=await ee(`/repos/${s}/${t}/git/trees`,{method:"POST",body:JSON.stringify({base_tree:a.tree.sha,tree:i})});x.debug(`Created tree: ${l.sha}`);let h=await ee(`/repos/${s}/${t}/git/commits`,{method:"POST",body:JSON.stringify({message:e,tree:l.sha,parents:[a.sha]})});return x.debug(`Created commit: ${h.sha}`),await ee(`/repos/${s}/${t}/git/refs/heads/${r}`,{method:"PATCH",body:JSON.stringify({sha:h.sha})}),x.debug("Updated ref to new commit"),h}catch(n){throw x.error(`Failed to create commit: ${n.message}`),n}}var mh=3,gh=1e3;async function Ue(s,t={},e=mh){try{let i=await fetch(s,{...t,headers:{Authorization:`token ${process.env.GITHUB_TOKEN}`,Accept:"application/vnd.github.v3+json","User-Agent":"GitHub-CLI",...t.headers}});if(!i.ok){let n=await i.text();throw new Error(`HTTP ${i.status}: ${n}`)}return i.json()}catch(i){if(e>0&&(i.message.includes("ECONNRESET")||i.message.includes("timeout")))return x.debug(`Retrying request to ${s}, ${e} attempts remaining`),await new Promise(n=>setTimeout(n,gh)),Ue(s,t,e-1);throw i}}async function In(s,t,e=""){x.debug(`Downloading contents for ${s}/${t}/${e}...`);try{let i=await Ue(`${he}/repos/${s}/${t}/contents/${e}`);if(!Array.isArray(i))return i.content&&(i.content=Buffer.from(i.content,"base64").toString("utf-8")),[i];let n=i.map(async r=>{if(r.type==="file"&&r.download_url){let o=await Ue(r.url);o.content&&(r.content=Buffer.from(o.content,"base64").toString("utf-8"))}return r});return Promise.all(n)}catch(i){throw x.error(`Failed to download contents: ${i.message}`),i}}var he="https://api.github.com";async function ti(s,t){return x.debug(`Fetching repository info for ${s}/${t}...`),ee(`/repos/${s}/${t}`)}async function Ai(s,t,e="",i=""){x.debug(`Fetching contents for ${s}/${t}/${e}...`);let n=i?`?ref=${i}`:"";return ee(`/repos/${s}/${t}/contents/${e}${n}`)}var ei=k(require("fs"),1),Ro=k(require("path"),1);function xe(s){ei.default.existsSync(s)||(ei.default.mkdirSync(s,{recursive:!0}),x.debug(`Created directory: ${s}`))}function ce(s,t){xe(Ro.default.dirname(s)),ei.default.writeFileSync(s,t),x.debug(`Created file: ${s}`)}function bs(s){ei.default.existsSync(s)||(ei.default.mkdirSync(s,{recursive:!0}),x.debug(`Created directory: ${s}`))}var Yi=k(require("fs"),1),er=k(require("path"),1);var ta=k(Yo(),1);var $i=s=>{if(typeof s!="string")throw new TypeError("invalid pattern");if(s.length>65536)throw new TypeError("pattern is too long")};var Oh={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Fi=s=>s.replace(/[[\]\\-]/g,"\\$&"),vh=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),qo=s=>s.join(""),Vo=(s,t)=>{let e=t;if(s.charAt(e)!=="[")throw new Error("not in a brace expression");let i=[],n=[],r=e+1,o=!1,a=!1,l=!1,h=!1,u=e,c="";t:for(;r<s.length;){let w=s.charAt(r);if((w==="!"||w==="^")&&r===e+1){h=!0,r++;continue}if(w==="]"&&o&&!l){u=r+1;break}if(o=!0,w==="\\"&&!l){l=!0,r++;continue}if(w==="["&&!l){for(let[m,[E,v,_]]of Object.entries(Oh))if(s.startsWith(m,r)){if(c)return["$.",!1,s.length-e,!0];r+=m.length,_?n.push(E):i.push(E),a=a||v;continue t}}if(l=!1,c){w>c?i.push(Fi(c)+"-"+Fi(w)):w===c&&i.push(Fi(w)),c="",r++;continue}if(s.startsWith("-]",r+1)){i.push(Fi(w+"-")),r+=2;continue}if(s.startsWith("-",r+1)){c=w,r+=2;continue}i.push(Fi(w)),r++}if(u<r)return["",!1,0,!1];if(!i.length&&!n.length)return["$.",!1,s.length-e,!0];if(n.length===0&&i.length===1&&/^\\?.$/.test(i[0])&&!h){let w=i[0].length===2?i[0].slice(-1):i[0];return[vh(w),!1,u-e,!1]}let d="["+(h?"^":"")+qo(i)+"]",p="["+(h?"":"^")+qo(n)+"]";return[i.length&&n.length?"("+d+"|"+p+")":i.length?d:p,a,u-e,!0]};var Kt=(s,{windowsPathsNoEscape:t=!1}={})=>t?s.replace(/\[([^\/\\])\]/g,"$1"):s.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var Ah=new Set(["!","?","+","*","@"]),Ko=s=>Ah.has(s),_h="(?!(?:^|/)\\.\\.?(?:$|/))",ys="(?!\\.)",$h=new Set(["[","."]),Fh=new Set(["..","."]),Th=new Set("().*{}+?[]^$\\!"),jh=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Ln="[^/]",Jo=Ln+"*?",Zo=Ln+"+?",ii=class s{type;#t;#e;#r=!1;#s=[];#o;#S;#h;#f=!1;#a;#l;#n=!1;constructor(t,e,i={}){this.type=t,t&&(this.#e=!0),this.#o=e,this.#t=this.#o?this.#o.#t:this,this.#a=this.#t===this?i:this.#t.#a,this.#h=this.#t===this?[]:this.#t.#h,t==="!"&&!this.#t.#f&&this.#h.push(this),this.#S=this.#o?this.#o.#s.length:0}get hasMagic(){if(this.#e!==void 0)return this.#e;for(let t of this.#s)if(typeof t!="string"&&(t.type||t.hasMagic))return this.#e=!0;return this.#e}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#s.map(t=>String(t)).join("|")+")":this.#l=this.#s.map(t=>String(t)).join("")}#g(){if(this!==this.#t)throw new Error("should only call on root");if(this.#f)return this;this.toString(),this.#f=!0;let t;for(;t=this.#h.pop();){if(t.type!=="!")continue;let e=t,i=e.#o;for(;i;){for(let n=e.#S+1;!i.type&&n<i.#s.length;n++)for(let r of t.#s){if(typeof r=="string")throw new Error("string part in extglob AST??");r.copyIn(i.#s[n])}e=i,i=e.#o}}return this}push(...t){for(let e of t)if(e!==""){if(typeof e!="string"&&!(e instanceof s&&e.#o===this))throw new Error("invalid part: "+e);this.#s.push(e)}}toJSON(){var e;let t=this.type===null?this.#s.slice().map(i=>typeof i=="string"?i:i.toJSON()):[this.type,...this.#s.map(i=>i.toJSON())];return this.isStart()&&!this.type&&t.unshift([]),this.isEnd()&&(this===this.#t||this.#t.#f&&((e=this.#o)==null?void 0:e.type)==="!")&&t.push({}),t}isStart(){var e;if(this.#t===this)return!0;if(!((e=this.#o)!=null&&e.isStart()))return!1;if(this.#S===0)return!0;let t=this.#o;for(let i=0;i<this.#S;i++){let n=t.#s[i];if(!(n instanceof s&&n.type==="!"))return!1}return!0}isEnd(){var e,i,n;if(this.#t===this||((e=this.#o)==null?void 0:e.type)==="!")return!0;if(!((i=this.#o)!=null&&i.isEnd()))return!1;if(!this.type)return(n=this.#o)==null?void 0:n.isEnd();let t=this.#o?this.#o.#s.length:0;return this.#S===t-1}copyIn(t){typeof t=="string"?this.push(t):this.push(t.clone(this))}clone(t){let e=new s(this.type,t);for(let i of this.#s)e.copyIn(i);return e}static#w(t,e,i,n){let r=!1,o=!1,a=-1,l=!1;if(e.type===null){let p=i,S="";for(;p<t.length;){let w=t.charAt(p++);if(r||w==="\\"){r=!r,S+=w;continue}if(o){p===a+1?(w==="^"||w==="!")&&(l=!0):w==="]"&&!(p===a+2&&l)&&(o=!1),S+=w;continue}else if(w==="["){o=!0,a=p,l=!1,S+=w;continue}if(!n.noext&&Ko(w)&&t.charAt(p)==="("){e.push(S),S="";let m=new s(w,e);p=s.#w(t,m,p,n),e.push(m);continue}S+=w}return e.push(S),p}let h=i+1,u=new s(null,e),c=[],d="";for(;h<t.length;){let p=t.charAt(h++);if(r||p==="\\"){r=!r,d+=p;continue}if(o){h===a+1?(p==="^"||p==="!")&&(l=!0):p==="]"&&!(h===a+2&&l)&&(o=!1),d+=p;continue}else if(p==="["){o=!0,a=h,l=!1,d+=p;continue}if(Ko(p)&&t.charAt(h)==="("){u.push(d),d="";let S=new s(p,u);u.push(S),h=s.#w(t,S,h,n);continue}if(p==="|"){u.push(d),d="",c.push(u),u=new s(null,e);continue}if(p===")")return d===""&&e.#s.length===0&&(e.#n=!0),u.push(d),d="",e.push(...c,u),h;d+=p}return e.type=null,e.#e=void 0,e.#s=[t.substring(i-1)],h}static fromGlob(t,e={}){let i=new s(null,void 0,e);return s.#w(t,i,0,e),i}toMMPattern(){if(this!==this.#t)return this.#t.toMMPattern();let t=this.toString(),[e,i,n,r]=this.toRegExpSource();if(!(n||this.#e||this.#a.nocase&&!this.#a.nocaseMagicOnly&&t.toUpperCase()!==t.toLowerCase()))return i;let a=(this.#a.nocase?"i":"")+(r?"u":"");return Object.assign(new RegExp(`^${e}$`,a),{_src:e,_glob:t})}get options(){return this.#a}toRegExpSource(t){var l;let e=t??!!this.#a.dot;if(this.#t===this&&this.#g(),!this.type){let h=this.isStart()&&this.isEnd(),u=this.#s.map(S=>{let[w,m,E,v]=typeof S=="string"?s.#u(S,this.#e,h):S.toRegExpSource(t);return this.#e=this.#e||E,this.#r=this.#r||v,w}).join(""),c="";if(this.isStart()&&typeof this.#s[0]=="string"&&!(this.#s.length===1&&Fh.has(this.#s[0]))){let w=$h,m=e&&w.has(u.charAt(0))||u.startsWith("\\.")&&w.has(u.charAt(2))||u.startsWith("\\.\\.")&&w.has(u.charAt(4)),E=!e&&!t&&w.has(u.charAt(0));c=m?_h:E?ys:""}let d="";return this.isEnd()&&this.#t.#f&&((l=this.#o)==null?void 0:l.type)==="!"&&(d="(?:$|\\/)"),[c+u+d,Kt(u),this.#e=!!this.#e,this.#r]}let i=this.type==="*"||this.type==="+",n=this.type==="!"?"(?:(?!(?:":"(?:",r=this.#d(e);if(this.isStart()&&this.isEnd()&&!r&&this.type!=="!"){let h=this.toString();return this.#s=[h],this.type=null,this.#e=void 0,[h,Kt(this.toString()),!1,!1]}let o=!i||t||e||!ys?"":this.#d(!0);o===r&&(o=""),o&&(r=`(?:${r})(?:${o})*?`);let a="";if(this.type==="!"&&this.#n)a=(this.isStart()&&!e?ys:"")+Zo;else{let h=this.type==="!"?"))"+(this.isStart()&&!e&&!t?ys:"")+Jo+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=n+r+h}return[a,Kt(r),this.#e=!!this.#e,this.#r]}#d(t){return this.#s.map(e=>{if(typeof e=="string")throw new Error("string type in extglob ast??");let[i,n,r,o]=e.toRegExpSource(t);return this.#r=this.#r||o,i}).filter(e=>!(this.isStart()&&this.isEnd())||!!e).join("|")}static#u(t,e,i=!1){let n=!1,r="",o=!1;for(let a=0;a<t.length;a++){let l=t.charAt(a);if(n){n=!1,r+=(Th.has(l)?"\\":"")+l;continue}if(l==="\\"){a===t.length-1?r+="\\\\":n=!0;continue}if(l==="["){let[h,u,c,d]=Vo(t,a);if(c){r+=h,o=o||u,a+=c-1,e=e||d;continue}}if(l==="*"){i&&t==="*"?r+=Zo:r+=Jo,e=!0;continue}if(l==="?"){r+=Ln,e=!0;continue}r+=jh(l)}return[r,Kt(t),!!e,o]}};var si=(s,{windowsPathsNoEscape:t=!1}={})=>t?s.replace(/[?*()[\]]/g,"[$&]"):s.replace(/[?*()[\]\\]/g,"\\$&");var dt=(s,t,e={})=>($i(t),!e.nocomment&&t.charAt(0)==="#"?!1:new jt(t,e).match(s)),Mh=/^\*+([^+@!?\*\[\(]*)$/,Rh=s=>t=>!t.startsWith(".")&&t.endsWith(s),Ih=s=>t=>t.endsWith(s),Nh=s=>(s=s.toLowerCase(),t=>!t.startsWith(".")&&t.toLowerCase().endsWith(s)),Ph=s=>(s=s.toLowerCase(),t=>t.toLowerCase().endsWith(s)),Lh=/^\*+\.\*+$/,Dh=s=>!s.startsWith(".")&&s.includes("."),Wh=s=>s!=="."&&s!==".."&&s.includes("."),zh=/^\.\*+$/,Bh=s=>s!=="."&&s!==".."&&s.startsWith("."),Uh=/^\*+$/,Gh=s=>s.length!==0&&!s.startsWith("."),Hh=s=>s.length!==0&&s!=="."&&s!=="..",kh=/^\?+([^+@!?\*\[\(]*)?$/,Yh=([s,t=""])=>{let e=ea([s]);return t?(t=t.toLowerCase(),i=>e(i)&&i.toLowerCase().endsWith(t)):e},qh=([s,t=""])=>{let e=ia([s]);return t?(t=t.toLowerCase(),i=>e(i)&&i.toLowerCase().endsWith(t)):e},Vh=([s,t=""])=>{let e=ia([s]);return t?i=>e(i)&&i.endsWith(t):e},Kh=([s,t=""])=>{let e=ea([s]);return t?i=>e(i)&&i.endsWith(t):e},ea=([s])=>{let t=s.length;return e=>e.length===t&&!e.startsWith(".")},ia=([s])=>{let t=s.length;return e=>e.length===t&&e!=="."&&e!==".."},sa=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",Qo={win32:{sep:"\\"},posix:{sep:"/"}},Jh=sa==="win32"?Qo.win32.sep:Qo.posix.sep;dt.sep=Jh;var yt=Symbol("globstar **");dt.GLOBSTAR=yt;var Zh="[^/]",Qh=Zh+"*?",Xh="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",tc="(?:(?!(?:\\/|^)\\.).)*?",ec=(s,t={})=>e=>dt(e,s,t);dt.filter=ec;var Bt=(s,t={})=>Object.assign({},s,t),ic=s=>{if(!s||typeof s!="object"||!Object.keys(s).length)return dt;let t=dt;return Object.assign((i,n,r={})=>t(i,n,Bt(s,r)),{Minimatch:class extends t.Minimatch{constructor(n,r={}){super(n,Bt(s,r))}static defaults(n){return t.defaults(Bt(s,n)).Minimatch}},AST:class extends t.AST{constructor(n,r,o={}){super(n,r,Bt(s,o))}static fromGlob(n,r={}){return t.AST.fromGlob(n,Bt(s,r))}},unescape:(i,n={})=>t.unescape(i,Bt(s,n)),escape:(i,n={})=>t.escape(i,Bt(s,n)),filter:(i,n={})=>t.filter(i,Bt(s,n)),defaults:i=>t.defaults(Bt(s,i)),makeRe:(i,n={})=>t.makeRe(i,Bt(s,n)),braceExpand:(i,n={})=>t.braceExpand(i,Bt(s,n)),match:(i,n,r={})=>t.match(i,n,Bt(s,r)),sep:t.sep,GLOBSTAR:yt})};dt.defaults=ic;var na=(s,t={})=>($i(s),t.nobrace||!/\{(?:(?!\{).)*\}/.test(s)?[s]:(0,ta.default)(s));dt.braceExpand=na;var sc=(s,t={})=>new jt(s,t).makeRe();dt.makeRe=sc;var nc=(s,t,e={})=>{let i=new jt(t,e);return s=s.filter(n=>i.match(n)),i.options.nonull&&!s.length&&s.push(t),s};dt.match=nc;var Xo=/[?*]|[+@!]\(.*?\)|\[|\]/,rc=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),jt=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(t,e={}){$i(t),e=e||{},this.options=e,this.pattern=t,this.platform=e.platform||sa,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!e.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!e.nonegate,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=e.windowsNoMagicRoot!==void 0?e.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let t of this.set)for(let e of t)if(typeof e!="string")return!0;return!1}debug(...t){}make(){let t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],e.debug&&(this.debug=(...r)=>console.error(...r)),this.debug(this.pattern,this.globSet);let i=this.globSet.map(r=>this.slashSplit(r));this.globParts=this.preprocess(i),this.debug(this.pattern,this.globParts);let n=this.globParts.map((r,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=r[0]===""&&r[1]===""&&(r[2]==="?"||!Xo.test(r[2]))&&!Xo.test(r[3]),h=/^[a-z]:/i.test(r[0]);if(l)return[...r.slice(0,4),...r.slice(4).map(u=>this.parse(u))];if(h)return[r[0],...r.slice(1).map(u=>this.parse(u))]}return r.map(l=>this.parse(l))});if(this.debug(this.pattern,n),this.set=n.filter(r=>r.indexOf(!1)===-1),this.isWindows)for(let r=0;r<this.set.length;r++){let o=this.set[r];o[0]===""&&o[1]===""&&this.globParts[r][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let i=0;i<t.length;i++)for(let n=0;n<t[i].length;n++)t[i][n]==="**"&&(t[i][n]="*");let{optimizationLevel:e=1}=this.options;return e>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):e>=1?t=this.levelOneOptimize(t):t=this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map(e=>{let i=-1;for(;(i=e.indexOf("**",i+1))!==-1;){let n=i;for(;e[n+1]==="**";)n++;n!==i&&e.splice(i,n-i)}return e})}levelOneOptimize(t){return t.map(e=>(e=e.reduce((i,n)=>{let r=i[i.length-1];return n==="**"&&r==="**"?i:n===".."&&r&&r!==".."&&r!=="."&&r!=="**"?(i.pop(),i):(i.push(n),i)},[]),e.length===0?[""]:e))}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let e=!1;do{if(e=!1,!this.preserveMultipleSlashes){for(let n=1;n<t.length-1;n++){let r=t[n];n===1&&r===""&&t[0]===""||(r==="."||r==="")&&(e=!0,t.splice(n,1),n--)}t[0]==="."&&t.length===2&&(t[1]==="."||t[1]==="")&&(e=!0,t.pop())}let i=0;for(;(i=t.indexOf("..",i+1))!==-1;){let n=t[i-1];n&&n!=="."&&n!==".."&&n!=="**"&&(e=!0,t.splice(i-1,2),i-=2)}}while(e);return t.length===0?[""]:t}firstPhasePreProcess(t){let e=!1;do{e=!1;for(let i of t){let n=-1;for(;(n=i.indexOf("**",n+1))!==-1;){let o=n;for(;i[o+1]==="**";)o++;o>n&&i.splice(n+1,o-n);let a=i[n+1],l=i[n+2],h=i[n+3];if(a!==".."||!l||l==="."||l===".."||!h||h==="."||h==="..")continue;e=!0,i.splice(n,1);let u=i.slice(0);u[n]="**",t.push(u),n--}if(!this.preserveMultipleSlashes){for(let o=1;o<i.length-1;o++){let a=i[o];o===1&&a===""&&i[0]===""||(a==="."||a==="")&&(e=!0,i.splice(o,1),o--)}i[0]==="."&&i.length===2&&(i[1]==="."||i[1]==="")&&(e=!0,i.pop())}let r=0;for(;(r=i.indexOf("..",r+1))!==-1;){let o=i[r-1];if(o&&o!=="."&&o!==".."&&o!=="**"){e=!0;let l=r===1&&i[r+1]==="**"?["."]:[];i.splice(r-1,2,...l),i.length===0&&i.push(""),r-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++)for(let i=e+1;i<t.length;i++){let n=this.partsMatch(t[e],t[i],!this.preserveMultipleSlashes);if(n){t[e]=[],t[i]=n;break}}return t.filter(e=>e.length)}partsMatch(t,e,i=!1){let n=0,r=0,o=[],a="";for(;n<t.length&&r<e.length;)if(t[n]===e[r])o.push(a==="b"?e[r]:t[n]),n++,r++;else if(i&&t[n]==="**"&&e[r]===t[n+1])o.push(t[n]),n++;else if(i&&e[r]==="**"&&t[n]===e[r+1])o.push(e[r]),r++;else if(t[n]==="*"&&e[r]&&(this.options.dot||!e[r].startsWith("."))&&e[r]!=="**"){if(a==="b")return!1;a="a",o.push(t[n]),n++,r++}else if(e[r]==="*"&&t[n]&&(this.options.dot||!t[n].startsWith("."))&&t[n]!=="**"){if(a==="a")return!1;a="b",o.push(e[r]),n++,r++}else return!1;return t.length===e.length&&o}parseNegate(){if(this.nonegate)return;let t=this.pattern,e=!1,i=0;for(let n=0;n<t.length&&t.charAt(n)==="!";n++)e=!e,i++;i&&(this.pattern=t.slice(i)),this.negate=e}matchOne(t,e,i=!1){let n=this.options;if(this.isWindows){let w=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),m=!w&&t[0]===""&&t[1]===""&&t[2]==="?"&&/^[a-z]:$/i.test(t[3]),E=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),v=!E&&e[0]===""&&e[1]===""&&e[2]==="?"&&typeof e[3]=="string"&&/^[a-z]:$/i.test(e[3]),_=m?3:w?0:void 0,O=v?3:E?0:void 0;if(typeof _=="number"&&typeof O=="number"){let[T,H]=[t[_],e[O]];T.toLowerCase()===H.toLowerCase()&&(e[O]=T,O>_?e=e.slice(O):_>O&&(t=t.slice(_)))}}let{optimizationLevel:r=1}=this.options;r>=2&&(t=this.levelTwoFileOptimize(t)),this.debug("matchOne",this,{file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var o=0,a=0,l=t.length,h=e.length;o<l&&a<h;o++,a++){this.debug("matchOne loop");var u=e[a],c=t[o];if(this.debug(e,u,c),u===!1)return!1;if(u===yt){this.debug("GLOBSTAR",[e,u,c]);var d=o,p=a+1;if(p===h){for(this.debug("** at the end");o<l;o++)if(t[o]==="."||t[o]===".."||!n.dot&&t[o].charAt(0)===".")return!1;return!0}for(;d<l;){var S=t[d];if(this.debug(`
globstar while`,t,d,e,p,S),this.matchOne(t.slice(d),e.slice(p),i))return this.debug("globstar found match!",d,l,S),!0;if(S==="."||S===".."||!n.dot&&S.charAt(0)==="."){this.debug("dot detected!",t,d,e,p);break}this.debug("globstar swallow a segment, and continue"),d++}return!!(i&&(this.debug(`
>>> no match, partial?`,t,d,e,p),d===l))}let w;if(typeof u=="string"?(w=c===u,this.debug("string match",u,c,w)):(w=u.test(c),this.debug("pattern match",u,c,w)),!w)return!1}if(o===l&&a===h)return!0;if(o===l)return i;if(a===h)return o===l-1&&t[o]==="";throw new Error("wtf?")}braceExpand(){return na(this.pattern,this.options)}parse(t){$i(t);let e=this.options;if(t==="**")return yt;if(t==="")return"";let i,n=null;(i=t.match(Uh))?n=e.dot?Hh:Gh:(i=t.match(Mh))?n=(e.nocase?e.dot?Ph:Nh:e.dot?Ih:Rh)(i[1]):(i=t.match(kh))?n=(e.nocase?e.dot?qh:Yh:e.dot?Vh:Kh)(i):(i=t.match(Lh))?n=e.dot?Wh:Dh:(i=t.match(zh))&&(n=Bh);let r=ii.fromGlob(t,this.options).toMMPattern();return n&&typeof r=="object"&&Reflect.defineProperty(r,"test",{value:n}),r}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let t=this.set;if(!t.length)return this.regexp=!1,this.regexp;let e=this.options,i=e.noglobstar?Qh:e.dot?Xh:tc,n=new Set(e.nocase?["i"]:[]),r=t.map(l=>{let h=l.map(u=>{if(u instanceof RegExp)for(let c of u.flags.split(""))n.add(c);return typeof u=="string"?rc(u):u===yt?yt:u._src});return h.forEach((u,c)=>{let d=h[c+1],p=h[c-1];u!==yt||p===yt||(p===void 0?d!==void 0&&d!==yt?h[c+1]="(?:\\/|"+i+"\\/)?"+d:h[c]=i:d===void 0?h[c-1]=p+"(?:\\/|"+i+")?":d!==yt&&(h[c-1]=p+"(?:\\/|\\/"+i+"\\/)"+d,h[c+1]=yt))}),h.filter(u=>u!==yt).join("/")}).join("|"),[o,a]=t.length>1?["(?:",")"]:["",""];r="^"+o+r+a+"$",this.negate&&(r="^(?!"+r+").+$");try{this.regexp=new RegExp(r,[...n].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(t)?["",...t.split(/\/+/)]:t.split(/\/+/)}match(t,e=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&e)return!0;let i=this.options;this.isWindows&&(t=t.split("\\").join("/"));let n=this.slashSplit(t);this.debug(this.pattern,"split",n);let r=this.set;this.debug(this.pattern,"set",r);let o=n[n.length-1];if(!o)for(let a=n.length-2;!o&&a>=0;a--)o=n[a];for(let a=0;a<r.length;a++){let l=r[a],h=n;if(i.matchBase&&l.length===1&&(h=[o]),this.matchOne(h,l,e))return i.flipNegate?!0:!this.negate}return i.flipNegate?!1:this.negate}static defaults(t){return dt.defaults(t).Minimatch}};dt.AST=ii;dt.Minimatch=jt;dt.escape=si;dt.unescape=Kt;var Fa=require("node:url");var ni=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,aa=new Set,Dn=typeof process=="object"&&process?process:{},la=(s,t,e,i)=>{typeof Dn.emitWarning=="function"?Dn.emitWarning(s,t,e,i):console.error(`[${e}] ${t}: ${s}`)},Ss=globalThis.AbortController,ra=globalThis.AbortSignal,oa;if(typeof Ss>"u"){ra=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(i,n){this._onabort.push(n)}},Ss=class{constructor(){t()}signal=new ra;abort(i){var n,r;if(!this.signal.aborted){this.signal.reason=i,this.signal.aborted=!0;for(let o of this.signal._onabort)o(i);(r=(n=this.signal).onabort)==null||r.call(n,i)}}};let s=((oa=Dn.env)==null?void 0:oa.LRU_CACHE_IGNORE_AC_WARNING)!=="1",t=()=>{s&&(s=!1,la("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}var oc=s=>!aa.has(s),Yd=Symbol("type"),Ee=s=>s&&s===Math.floor(s)&&s>0&&isFinite(s),ha=s=>Ee(s)?s<=Math.pow(2,8)?Uint8Array:s<=Math.pow(2,16)?Uint16Array:s<=Math.pow(2,32)?Uint32Array:s<=Number.MAX_SAFE_INTEGER?ri:null:null,ri=class extends Array{constructor(t){super(t),this.fill(0)}},Wn=class s{heap;length;static#t=!1;static create(t){let e=ha(t);if(!e)return[];s.#t=!0;let i=new s(t,e);return s.#t=!1,i}constructor(t,e){if(!s.#t)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},Ti=class s{#t;#e;#r;#s;#o;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#h;#f;#a;#l;#n;#g;#w;#d;#u;#C;#m;#O;#v;#y;#x;#E;#p;static unsafeExposeInternals(t){return{starts:t.#v,ttls:t.#y,sizes:t.#O,keyMap:t.#a,keyList:t.#l,valList:t.#n,next:t.#g,prev:t.#w,get head(){return t.#d},get tail(){return t.#u},free:t.#C,isBackgroundFetch:e=>t.#c(e),backgroundFetch:(e,i,n,r)=>t.#D(e,i,n,r),moveToTail:e=>t.#z(e),indexes:e=>t.#_(e),rindexes:e=>t.#$(e),isStale:e=>t.#b(e)}}get max(){return this.#t}get maxSize(){return this.#e}get calculatedSize(){return this.#f}get size(){return this.#h}get fetchMethod(){return this.#o}get memoMethod(){return this.#S}get dispose(){return this.#r}get disposeAfter(){return this.#s}constructor(t){let{max:e=0,ttl:i,ttlResolution:n=1,ttlAutopurge:r,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:l,dispose:h,disposeAfter:u,noDisposeOnSet:c,noUpdateTTL:d,maxSize:p=0,maxEntrySize:S=0,sizeCalculation:w,fetchMethod:m,memoMethod:E,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:_,allowStaleOnFetchRejection:O,allowStaleOnFetchAbort:T,ignoreFetchAbort:H}=t;if(e!==0&&!Ee(e))throw new TypeError("max option must be a nonnegative integer");let q=e?ha(e):Array;if(!q)throw new Error("invalid max value: "+e);if(this.#t=e,this.#e=p,this.maxEntrySize=S||this.#e,this.sizeCalculation=w,this.sizeCalculation){if(!this.#e&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(E!==void 0&&typeof E!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=E,m!==void 0&&typeof m!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#o=m,this.#E=!!m,this.#a=new Map,this.#l=new Array(e).fill(void 0),this.#n=new Array(e).fill(void 0),this.#g=new q(e),this.#w=new q(e),this.#d=0,this.#u=0,this.#C=Wn.create(e),this.#h=0,this.#f=0,typeof h=="function"&&(this.#r=h),typeof u=="function"?(this.#s=u,this.#m=[]):(this.#s=void 0,this.#m=void 0),this.#x=!!this.#r,this.#p=!!this.#s,this.noDisposeOnSet=!!c,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!v,this.allowStaleOnFetchRejection=!!O,this.allowStaleOnFetchAbort=!!T,this.ignoreFetchAbort=!!H,this.maxEntrySize!==0){if(this.#e!==0&&!Ee(this.#e))throw new TypeError("maxSize must be a positive integer if specified");if(!Ee(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#T()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!_,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Ee(n)||n===0?n:1,this.ttlAutopurge=!!r,this.ttl=i||0,this.ttl){if(!Ee(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#F()}if(this.#t===0&&this.ttl===0&&this.#e===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#e){let at="LRU_CACHE_UNBOUNDED";oc(at)&&(aa.add(at),la("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",at,s))}}getRemainingTTL(t){return this.#a.has(t)?1/0:0}#F(){let t=new ri(this.#t),e=new ri(this.#t);this.#y=t,this.#v=e,this.#M=(r,o,a=ni.now())=>{if(e[r]=o!==0?a:0,t[r]=o,o!==0&&this.ttlAutopurge){let l=setTimeout(()=>{this.#b(r)&&this.#j(this.#l[r],"expire")},o+1);l.unref&&l.unref()}},this.#A=r=>{e[r]=t[r]!==0?ni.now():0},this.#i=(r,o)=>{if(t[o]){let a=t[o],l=e[o];if(!a||!l)return;r.ttl=a,r.start=l,r.now=i||n();let h=r.now-l;r.remainingTTL=a-h}};let i=0,n=()=>{let r=ni.now();if(this.ttlResolution>0){i=r;let o=setTimeout(()=>i=0,this.ttlResolution);o.unref&&o.unref()}return r};this.getRemainingTTL=r=>{let o=this.#a.get(r);if(o===void 0)return 0;let a=t[o],l=e[o];if(!a||!l)return 1/0;let h=(i||n())-l;return a-h},this.#b=r=>{let o=e[r],a=t[r];return!!a&&!!o&&(i||n())-o>a}}#A=()=>{};#i=()=>{};#M=()=>{};#b=()=>!1;#T(){let t=new ri(this.#t);this.#f=0,this.#O=t,this.#R=e=>{this.#f-=t[e],t[e]=0},this.#N=(e,i,n,r)=>{if(this.#c(i))return 0;if(!Ee(n))if(r){if(typeof r!="function")throw new TypeError("sizeCalculation must be a function");if(n=r(i,e),!Ee(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return n},this.#I=(e,i,n)=>{if(t[e]=i,this.#e){let r=this.#e-t[e];for(;this.#f>r;)this.#L(!0)}this.#f+=t[e],n&&(n.entrySize=i,n.totalCalculatedSize=this.#f)}}#R=t=>{};#I=(t,e,i)=>{};#N=(t,e,i,n)=>{if(i||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#_({allowStale:t=this.allowStale}={}){if(this.#h)for(let e=this.#u;!(!this.#P(e)||((t||!this.#b(e))&&(yield e),e===this.#d));)e=this.#w[e]}*#$({allowStale:t=this.allowStale}={}){if(this.#h)for(let e=this.#d;!(!this.#P(e)||((t||!this.#b(e))&&(yield e),e===this.#u));)e=this.#g[e]}#P(t){return t!==void 0&&this.#a.get(this.#l[t])===t}*entries(){for(let t of this.#_())this.#n[t]!==void 0&&this.#l[t]!==void 0&&!this.#c(this.#n[t])&&(yield[this.#l[t],this.#n[t]])}*rentries(){for(let t of this.#$())this.#n[t]!==void 0&&this.#l[t]!==void 0&&!this.#c(this.#n[t])&&(yield[this.#l[t],this.#n[t]])}*keys(){for(let t of this.#_()){let e=this.#l[t];e!==void 0&&!this.#c(this.#n[t])&&(yield e)}}*rkeys(){for(let t of this.#$()){let e=this.#l[t];e!==void 0&&!this.#c(this.#n[t])&&(yield e)}}*values(){for(let t of this.#_())this.#n[t]!==void 0&&!this.#c(this.#n[t])&&(yield this.#n[t])}*rvalues(){for(let t of this.#$())this.#n[t]!==void 0&&!this.#c(this.#n[t])&&(yield this.#n[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(let i of this.#_()){let n=this.#n[i],r=this.#c(n)?n.__staleWhileFetching:n;if(r!==void 0&&t(r,this.#l[i],this))return this.get(this.#l[i],e)}}forEach(t,e=this){for(let i of this.#_()){let n=this.#n[i],r=this.#c(n)?n.__staleWhileFetching:n;r!==void 0&&t.call(e,r,this.#l[i],this)}}rforEach(t,e=this){for(let i of this.#$()){let n=this.#n[i],r=this.#c(n)?n.__staleWhileFetching:n;r!==void 0&&t.call(e,r,this.#l[i],this)}}purgeStale(){let t=!1;for(let e of this.#$({allowStale:!0}))this.#b(e)&&(this.#j(this.#l[e],"expire"),t=!0);return t}info(t){let e=this.#a.get(t);if(e===void 0)return;let i=this.#n[e],n=this.#c(i)?i.__staleWhileFetching:i;if(n===void 0)return;let r={value:n};if(this.#y&&this.#v){let o=this.#y[e],a=this.#v[e];if(o&&a){let l=o-(ni.now()-a);r.ttl=l,r.start=Date.now()}}return this.#O&&(r.size=this.#O[e]),r}dump(){let t=[];for(let e of this.#_({allowStale:!0})){let i=this.#l[e],n=this.#n[e],r=this.#c(n)?n.__staleWhileFetching:n;if(r===void 0||i===void 0)continue;let o={value:r};if(this.#y&&this.#v){o.ttl=this.#y[e];let a=ni.now()-this.#v[e];o.start=Math.floor(Date.now()-a)}this.#O&&(o.size=this.#O[e]),t.unshift([i,o])}return t}load(t){this.clear();for(let[e,i]of t){if(i.start){let n=Date.now()-i.start;i.start=ni.now()-n}this.set(e,i.value,i)}}set(t,e,i={}){var d,p,S,w,m;if(e===void 0)return this.delete(t),this;let{ttl:n=this.ttl,start:r,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=i,{noUpdateTTL:h=this.noUpdateTTL}=i,u=this.#N(t,e,i.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.#j(t,"set"),this;let c=this.#h===0?void 0:this.#a.get(t);if(c===void 0)c=this.#h===0?this.#u:this.#C.length!==0?this.#C.pop():this.#h===this.#t?this.#L(!1):this.#h,this.#l[c]=t,this.#n[c]=e,this.#a.set(t,c),this.#g[this.#u]=c,this.#w[c]=this.#u,this.#u=c,this.#h++,this.#I(c,u,l),l&&(l.set="add"),h=!1;else{this.#z(c);let E=this.#n[c];if(e!==E){if(this.#E&&this.#c(E)){E.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:v}=E;v!==void 0&&!o&&(this.#x&&((d=this.#r)==null||d.call(this,v,t,"set")),this.#p&&((p=this.#m)==null||p.push([v,t,"set"])))}else o||(this.#x&&((S=this.#r)==null||S.call(this,E,t,"set")),this.#p&&((w=this.#m)==null||w.push([E,t,"set"])));if(this.#R(c),this.#I(c,u,l),this.#n[c]=e,l){l.set="replace";let v=E&&this.#c(E)?E.__staleWhileFetching:E;v!==void 0&&(l.oldValue=v)}}else l&&(l.set="update")}if(n!==0&&!this.#y&&this.#F(),this.#y&&(h||this.#M(c,n,r),l&&this.#i(l,c)),!o&&this.#p&&this.#m){let E=this.#m,v;for(;v=E==null?void 0:E.shift();)(m=this.#s)==null||m.call(this,...v)}return this}pop(){var t;try{for(;this.#h;){let e=this.#n[this.#d];if(this.#L(!0),this.#c(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#p&&this.#m){let e=this.#m,i;for(;i=e==null?void 0:e.shift();)(t=this.#s)==null||t.call(this,...i)}}}#L(t){var r,o;let e=this.#d,i=this.#l[e],n=this.#n[e];return this.#E&&this.#c(n)?n.__abortController.abort(new Error("evicted")):(this.#x||this.#p)&&(this.#x&&((r=this.#r)==null||r.call(this,n,i,"evict")),this.#p&&((o=this.#m)==null||o.push([n,i,"evict"]))),this.#R(e),t&&(this.#l[e]=void 0,this.#n[e]=void 0,this.#C.push(e)),this.#h===1?(this.#d=this.#u=0,this.#C.length=0):this.#d=this.#g[e],this.#a.delete(i),this.#h--,e}has(t,e={}){let{updateAgeOnHas:i=this.updateAgeOnHas,status:n}=e,r=this.#a.get(t);if(r!==void 0){let o=this.#n[r];if(this.#c(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#b(r))n&&(n.has="stale",this.#i(n,r));else return i&&this.#A(r),n&&(n.has="hit",this.#i(n,r)),!0}else n&&(n.has="miss");return!1}peek(t,e={}){let{allowStale:i=this.allowStale}=e,n=this.#a.get(t);if(n===void 0||!i&&this.#b(n))return;let r=this.#n[n];return this.#c(r)?r.__staleWhileFetching:r}#D(t,e,i,n){let r=e===void 0?void 0:this.#n[e];if(this.#c(r))return r;let o=new Ss,{signal:a}=i;a==null||a.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let l={signal:o.signal,options:i,context:n},h=(w,m=!1)=>{let{aborted:E}=o.signal,v=i.ignoreFetchAbort&&w!==void 0;if(i.status&&(E&&!m?(i.status.fetchAborted=!0,i.status.fetchError=o.signal.reason,v&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),E&&!v&&!m)return c(o.signal.reason);let _=p;return this.#n[e]===p&&(w===void 0?_.__staleWhileFetching?this.#n[e]=_.__staleWhileFetching:this.#j(t,"fetch"):(i.status&&(i.status.fetchUpdated=!0),this.set(t,w,l.options))),w},u=w=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=w),c(w)),c=w=>{let{aborted:m}=o.signal,E=m&&i.allowStaleOnFetchAbort,v=E||i.allowStaleOnFetchRejection,_=v||i.noDeleteOnFetchRejection,O=p;if(this.#n[e]===p&&(!_||O.__staleWhileFetching===void 0?this.#j(t,"fetch"):E||(this.#n[e]=O.__staleWhileFetching)),v)return i.status&&O.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),O.__staleWhileFetching;if(O.__returned===O)throw w},d=(w,m)=>{var v;let E=(v=this.#o)==null?void 0:v.call(this,t,r,l);E&&E instanceof Promise&&E.then(_=>w(_===void 0?void 0:_),m),o.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(w(void 0),i.allowStaleOnFetchAbort&&(w=_=>h(_,!0)))})};i.status&&(i.status.fetchDispatched=!0);let p=new Promise(d).then(h,u),S=Object.assign(p,{__abortController:o,__staleWhileFetching:r,__returned:void 0});return e===void 0?(this.set(t,S,{...l.options,status:void 0}),e=this.#a.get(t)):this.#n[e]=S,S}#c(t){if(!this.#E)return!1;let e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof Ss}async fetch(t,e={}){let{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:h=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:c=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:p=this.ignoreFetchAbort,allowStaleOnFetchAbort:S=this.allowStaleOnFetchAbort,context:w,forceRefresh:m=!1,status:E,signal:v}=e;if(!this.#E)return E&&(E.fetch="get"),this.get(t,{allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:r,status:E});let _={allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:r,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:h,noUpdateTTL:u,noDeleteOnFetchRejection:c,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:S,ignoreFetchAbort:p,status:E,signal:v},O=this.#a.get(t);if(O===void 0){E&&(E.fetch="miss");let T=this.#D(t,O,_,w);return T.__returned=T}else{let T=this.#n[O];if(this.#c(T)){let G=i&&T.__staleWhileFetching!==void 0;return E&&(E.fetch="inflight",G&&(E.returnedStale=!0)),G?T.__staleWhileFetching:T.__returned=T}let H=this.#b(O);if(!m&&!H)return E&&(E.fetch="hit"),this.#z(O),n&&this.#A(O),E&&this.#i(E,O),T;let q=this.#D(t,O,_,w),J=q.__staleWhileFetching!==void 0&&i;return E&&(E.fetch=H?"stale":"refresh",J&&H&&(E.returnedStale=!0)),J?q.__staleWhileFetching:q.__returned=q}}async forceFetch(t,e={}){let i=await this.fetch(t,e);if(i===void 0)throw new Error("fetch() returned undefined");return i}memo(t,e={}){let i=this.#S;if(!i)throw new Error("no memoMethod provided to constructor");let{context:n,forceRefresh:r,...o}=e,a=this.get(t,o);if(!r&&a!==void 0)return a;let l=i(t,a,{options:o,context:n});return this.set(t,l,o),l}get(t,e={}){let{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,status:o}=e,a=this.#a.get(t);if(a!==void 0){let l=this.#n[a],h=this.#c(l);return o&&this.#i(o,a),this.#b(a)?(o&&(o.get="stale"),h?(o&&i&&l.__staleWhileFetching!==void 0&&(o.returnedStale=!0),i?l.__staleWhileFetching:void 0):(r||this.#j(t,"expire"),o&&i&&(o.returnedStale=!0),i?l:void 0)):(o&&(o.get="hit"),h?l.__staleWhileFetching:(this.#z(a),n&&this.#A(a),l))}else o&&(o.get="miss")}#W(t,e){this.#w[e]=t,this.#g[t]=e}#z(t){t!==this.#u&&(t===this.#d?this.#d=this.#g[t]:this.#W(this.#w[t],this.#g[t]),this.#W(this.#u,t),this.#u=t)}delete(t){return this.#j(t,"delete")}#j(t,e){var n,r,o,a;let i=!1;if(this.#h!==0){let l=this.#a.get(t);if(l!==void 0)if(i=!0,this.#h===1)this.#B(e);else{this.#R(l);let h=this.#n[l];if(this.#c(h)?h.__abortController.abort(new Error("deleted")):(this.#x||this.#p)&&(this.#x&&((n=this.#r)==null||n.call(this,h,t,e)),this.#p&&((r=this.#m)==null||r.push([h,t,e]))),this.#a.delete(t),this.#l[l]=void 0,this.#n[l]=void 0,l===this.#u)this.#u=this.#w[l];else if(l===this.#d)this.#d=this.#g[l];else{let u=this.#w[l];this.#g[u]=this.#g[l];let c=this.#g[l];this.#w[c]=this.#w[l]}this.#h--,this.#C.push(l)}}if(this.#p&&((o=this.#m)!=null&&o.length)){let l=this.#m,h;for(;h=l==null?void 0:l.shift();)(a=this.#s)==null||a.call(this,...h)}return i}clear(){return this.#B("delete")}#B(t){var e,i,n;for(let r of this.#$({allowStale:!0})){let o=this.#n[r];if(this.#c(o))o.__abortController.abort(new Error("deleted"));else{let a=this.#l[r];this.#x&&((e=this.#r)==null||e.call(this,o,a,t)),this.#p&&((i=this.#m)==null||i.push([o,a,t]))}}if(this.#a.clear(),this.#n.fill(void 0),this.#l.fill(void 0),this.#y&&this.#v&&(this.#y.fill(0),this.#v.fill(0)),this.#O&&this.#O.fill(0),this.#d=0,this.#u=0,this.#C.length=0,this.#f=0,this.#h=0,this.#p&&this.#m){let r=this.#m,o;for(;o=r==null?void 0:r.shift();)(n=this.#s)==null||n.call(this,...o)}}};var li=require("node:path"),ya=require("node:url"),ne=require("fs"),gc=k(require("node:fs"),1),ve=require("node:fs/promises");var _s=require("node:events"),Yn=k(require("node:stream"),1),pa=require("node:string_decoder"),ca=typeof process=="object"&&process?process:{stdout:null,stderr:null},ac=s=>!!s&&typeof s=="object"&&(s instanceof Oe||s instanceof Yn.default||lc(s)||hc(s)),lc=s=>!!s&&typeof s=="object"&&s instanceof _s.EventEmitter&&typeof s.pipe=="function"&&s.pipe!==Yn.default.Writable.prototype.pipe,hc=s=>!!s&&typeof s=="object"&&s instanceof _s.EventEmitter&&typeof s.write=="function"&&typeof s.end=="function",fe=Symbol("EOF"),ue=Symbol("maybeEmitEnd"),Ce=Symbol("emittedEnd"),xs=Symbol("emittingEnd"),ji=Symbol("emittedError"),Es=Symbol("closed"),fa=Symbol("read"),Cs=Symbol("flush"),ua=Symbol("flushChunk"),Jt=Symbol("encoding"),oi=Symbol("decoder"),gt=Symbol("flowing"),Mi=Symbol("paused"),ai=Symbol("resume"),wt=Symbol("buffer"),Ot=Symbol("pipes"),bt=Symbol("bufferLength"),zn=Symbol("bufferPush"),Os=Symbol("bufferShift"),St=Symbol("objectMode"),ct=Symbol("destroyed"),Bn=Symbol("error"),Un=Symbol("emitData"),da=Symbol("emitEnd"),Gn=Symbol("emitEnd2"),ie=Symbol("async"),Hn=Symbol("abort"),vs=Symbol("aborted"),Ri=Symbol("signal"),Ge=Symbol("dataListeners"),Mt=Symbol("discarded"),Ii=s=>Promise.resolve().then(s),cc=s=>s(),fc=s=>s==="end"||s==="finish"||s==="prefinish",uc=s=>s instanceof ArrayBuffer||!!s&&typeof s=="object"&&s.constructor&&s.constructor.name==="ArrayBuffer"&&s.byteLength>=0,dc=s=>!Buffer.isBuffer(s)&&ArrayBuffer.isView(s),As=class{src;dest;opts;ondrain;constructor(t,e,i){this.src=t,this.dest=e,this.opts=i,this.ondrain=()=>t[ai](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(t){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},kn=class extends As{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(t,e,i){super(t,e,i),this.proxyErrors=n=>e.emit("error",n),t.on("error",this.proxyErrors)}},pc=s=>!!s.objectMode,mc=s=>!s.objectMode&&!!s.encoding&&s.encoding!=="buffer",Oe=class extends _s.EventEmitter{[gt]=!1;[Mi]=!1;[Ot]=[];[wt]=[];[St];[Jt];[ie];[oi];[fe]=!1;[Ce]=!1;[xs]=!1;[Es]=!1;[ji]=null;[bt]=0;[ct]=!1;[Ri];[vs]=!1;[Ge]=0;[Mt]=!1;writable=!0;readable=!0;constructor(...t){let e=t[0]||{};if(super(),e.objectMode&&typeof e.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");pc(e)?(this[St]=!0,this[Jt]=null):mc(e)?(this[Jt]=e.encoding,this[St]=!1):(this[St]=!1,this[Jt]=null),this[ie]=!!e.async,this[oi]=this[Jt]?new pa.StringDecoder(this[Jt]):null,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[wt]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Ot]});let{signal:i}=e;i&&(this[Ri]=i,i.aborted?this[Hn]():i.addEventListener("abort",()=>this[Hn]()))}get bufferLength(){return this[bt]}get encoding(){return this[Jt]}set encoding(t){throw new Error("Encoding must be set at instantiation time")}setEncoding(t){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[St]}set objectMode(t){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ie]}set async(t){this[ie]=this[ie]||!!t}[Hn](){var t,e;this[vs]=!0,this.emit("abort",(t=this[Ri])==null?void 0:t.reason),this.destroy((e=this[Ri])==null?void 0:e.reason)}get aborted(){return this[vs]}set aborted(t){}write(t,e,i){var r;if(this[vs])return!1;if(this[fe])throw new Error("write after end");if(this[ct])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof e=="function"&&(i=e,e="utf8"),e||(e="utf8");let n=this[ie]?Ii:cc;if(!this[St]&&!Buffer.isBuffer(t)){if(dc(t))t=Buffer.from(t.buffer,t.byteOffset,t.byteLength);else if(uc(t))t=Buffer.from(t);else if(typeof t!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[St]?(this[gt]&&this[bt]!==0&&this[Cs](!0),this[gt]?this.emit("data",t):this[zn](t),this[bt]!==0&&this.emit("readable"),i&&n(i),this[gt]):t.length?(typeof t=="string"&&!(e===this[Jt]&&!((r=this[oi])!=null&&r.lastNeed))&&(t=Buffer.from(t,e)),Buffer.isBuffer(t)&&this[Jt]&&(t=this[oi].write(t)),this[gt]&&this[bt]!==0&&this[Cs](!0),this[gt]?this.emit("data",t):this[zn](t),this[bt]!==0&&this.emit("readable"),i&&n(i),this[gt]):(this[bt]!==0&&this.emit("readable"),i&&n(i),this[gt])}read(t){if(this[ct])return null;if(this[Mt]=!1,this[bt]===0||t===0||t&&t>this[bt])return this[ue](),null;this[St]&&(t=null),this[wt].length>1&&!this[St]&&(this[wt]=[this[Jt]?this[wt].join(""):Buffer.concat(this[wt],this[bt])]);let e=this[fa](t||null,this[wt][0]);return this[ue](),e}[fa](t,e){if(this[St])this[Os]();else{let i=e;t===i.length||t===null?this[Os]():typeof i=="string"?(this[wt][0]=i.slice(t),e=i.slice(0,t),this[bt]-=t):(this[wt][0]=i.subarray(t),e=i.subarray(0,t),this[bt]-=t)}return this.emit("data",e),!this[wt].length&&!this[fe]&&this.emit("drain"),e}end(t,e,i){return typeof t=="function"&&(i=t,t=void 0),typeof e=="function"&&(i=e,e="utf8"),t!==void 0&&this.write(t,e),i&&this.once("end",i),this[fe]=!0,this.writable=!1,(this[gt]||!this[Mi])&&this[ue](),this}[ai](){this[ct]||(!this[Ge]&&!this[Ot].length&&(this[Mt]=!0),this[Mi]=!1,this[gt]=!0,this.emit("resume"),this[wt].length?this[Cs]():this[fe]?this[ue]():this.emit("drain"))}resume(){return this[ai]()}pause(){this[gt]=!1,this[Mi]=!0,this[Mt]=!1}get destroyed(){return this[ct]}get flowing(){return this[gt]}get paused(){return this[Mi]}[zn](t){this[St]?this[bt]+=1:this[bt]+=t.length,this[wt].push(t)}[Os](){return this[St]?this[bt]-=1:this[bt]-=this[wt][0].length,this[wt].shift()}[Cs](t=!1){do;while(this[ua](this[Os]())&&this[wt].length);!t&&!this[wt].length&&!this[fe]&&this.emit("drain")}[ua](t){return this.emit("data",t),this[gt]}pipe(t,e){if(this[ct])return t;this[Mt]=!1;let i=this[Ce];return e=e||{},t===ca.stdout||t===ca.stderr?e.end=!1:e.end=e.end!==!1,e.proxyErrors=!!e.proxyErrors,i?e.end&&t.end():(this[Ot].push(e.proxyErrors?new kn(this,t,e):new As(this,t,e)),this[ie]?Ii(()=>this[ai]()):this[ai]()),t}unpipe(t){let e=this[Ot].find(i=>i.dest===t);e&&(this[Ot].length===1?(this[gt]&&this[Ge]===0&&(this[gt]=!1),this[Ot]=[]):this[Ot].splice(this[Ot].indexOf(e),1),e.unpipe())}addListener(t,e){return this.on(t,e)}on(t,e){let i=super.on(t,e);if(t==="data")this[Mt]=!1,this[Ge]++,!this[Ot].length&&!this[gt]&&this[ai]();else if(t==="readable"&&this[bt]!==0)super.emit("readable");else if(fc(t)&&this[Ce])super.emit(t),this.removeAllListeners(t);else if(t==="error"&&this[ji]){let n=e;this[ie]?Ii(()=>n.call(this,this[ji])):n.call(this,this[ji])}return i}removeListener(t,e){return this.off(t,e)}off(t,e){let i=super.off(t,e);return t==="data"&&(this[Ge]=this.listeners("data").length,this[Ge]===0&&!this[Mt]&&!this[Ot].length&&(this[gt]=!1)),i}removeAllListeners(t){let e=super.removeAllListeners(t);return(t==="data"||t===void 0)&&(this[Ge]=0,!this[Mt]&&!this[Ot].length&&(this[gt]=!1)),e}get emittedEnd(){return this[Ce]}[ue](){!this[xs]&&!this[Ce]&&!this[ct]&&this[wt].length===0&&this[fe]&&(this[xs]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Es]&&this.emit("close"),this[xs]=!1)}emit(t,...e){let i=e[0];if(t!=="error"&&t!=="close"&&t!==ct&&this[ct])return!1;if(t==="data")return!this[St]&&!i?!1:this[ie]?(Ii(()=>this[Un](i)),!0):this[Un](i);if(t==="end")return this[da]();if(t==="close"){if(this[Es]=!0,!this[Ce]&&!this[ct])return!1;let r=super.emit("close");return this.removeAllListeners("close"),r}else if(t==="error"){this[ji]=i,super.emit(Bn,i);let r=!this[Ri]||this.listeners("error").length?super.emit("error",i):!1;return this[ue](),r}else if(t==="resume"){let r=super.emit("resume");return this[ue](),r}else if(t==="finish"||t==="prefinish"){let r=super.emit(t);return this.removeAllListeners(t),r}let n=super.emit(t,...e);return this[ue](),n}[Un](t){for(let i of this[Ot])i.dest.write(t)===!1&&this.pause();let e=this[Mt]?!1:super.emit("data",t);return this[ue](),e}[da](){return this[Ce]?!1:(this[Ce]=!0,this.readable=!1,this[ie]?(Ii(()=>this[Gn]()),!0):this[Gn]())}[Gn](){if(this[oi]){let e=this[oi].end();if(e){for(let i of this[Ot])i.dest.write(e);this[Mt]||super.emit("data",e)}}for(let e of this[Ot])e.end();let t=super.emit("end");return this.removeAllListeners("end"),t}async collect(){let t=Object.assign([],{dataLength:0});this[St]||(t.dataLength=0);let e=this.promise();return this.on("data",i=>{t.push(i),this[St]||(t.dataLength+=i.length)}),await e,t}async concat(){if(this[St])throw new Error("cannot concat in objectMode");let t=await this.collect();return this[Jt]?t.join(""):Buffer.concat(t,t.dataLength)}async promise(){return new Promise((t,e)=>{this.on(ct,()=>e(new Error("stream destroyed"))),this.on("error",i=>e(i)),this.on("end",()=>t())})}[Symbol.asyncIterator](){this[Mt]=!1;let t=!1,e=async()=>(this.pause(),t=!0,{value:void 0,done:!0});return{next:()=>{if(t)return e();let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[fe])return e();let r,o,a=c=>{this.off("data",l),this.off("end",h),this.off(ct,u),e(),o(c)},l=c=>{this.off("error",a),this.off("end",h),this.off(ct,u),this.pause(),r({value:c,done:!!this[fe]})},h=()=>{this.off("error",a),this.off("data",l),this.off(ct,u),e(),r({done:!0,value:void 0})},u=()=>a(new Error("stream destroyed"));return new Promise((c,d)=>{o=d,r=c,this.once(ct,u),this.once("error",a),this.once("end",h),this.once("data",l)})},throw:e,return:e,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Mt]=!1;let t=!1,e=()=>(this.pause(),this.off(Bn,e),this.off(ct,e),this.off("end",e),t=!0,{done:!0,value:void 0}),i=()=>{if(t)return e();let n=this.read();return n===null?e():{done:!1,value:n}};return this.once("end",e),this.once(Bn,e),this.once(ct,e),{next:i,throw:e,return:e,[Symbol.iterator](){return this}}}destroy(t){if(this[ct])return t?this.emit("error",t):this.emit(ct),this;this[ct]=!0,this[Mt]=!0,this[wt].length=0,this[bt]=0;let e=this;return typeof e.close=="function"&&!this[Es]&&e.close(),t?this.emit("error",t):this.emit(ct),this}static get isStream(){return ac}};var wc=ne.realpathSync.native,Pi={lstatSync:ne.lstatSync,readdir:ne.readdir,readdirSync:ne.readdirSync,readlinkSync:ne.readlinkSync,realpathSync:wc,promises:{lstat:ve.lstat,readdir:ve.readdir,readlink:ve.readlink,realpath:ve.realpath}},Sa=s=>!s||s===Pi||s===gc?Pi:{...Pi,...s,promises:{...Pi.promises,...s.promises||{}}},xa=/^\\\\\?\\([a-z]:)\\?$/i,bc=s=>s.replace(/\//g,"\\").replace(xa,"$1\\"),yc=/[\\\/]/,Gt=0,Ea=1,Ca=2,se=4,Oa=6,va=8,He=10,Aa=12,Ut=15,Ni=~Ut,qn=16,ma=32,Li=64,Zt=128,$s=256,Ts=512,ga=Li|Zt|Ts,Sc=1023,Vn=s=>s.isFile()?va:s.isDirectory()?se:s.isSymbolicLink()?He:s.isCharacterDevice()?Ca:s.isBlockDevice()?Oa:s.isSocket()?Aa:s.isFIFO()?Ea:Gt,wa=new Map,Di=s=>{let t=wa.get(s);if(t)return t;let e=s.normalize("NFKD");return wa.set(s,e),e},ba=new Map,Fs=s=>{let t=ba.get(s);if(t)return t;let e=Di(s.toLowerCase());return ba.set(s,e),e},js=class extends Ti{constructor(){super({max:256})}},Kn=class extends Ti{constructor(t=16*1024){super({maxSize:t,sizeCalculation:e=>e.length+1})}},_a=Symbol("PathScurry setAsCwd"),xt=class{name;root;roots;parent;nocase;isCWD=!1;#t;#e;get dev(){return this.#e}#r;get mode(){return this.#r}#s;get nlink(){return this.#s}#o;get uid(){return this.#o}#S;get gid(){return this.#S}#h;get rdev(){return this.#h}#f;get blksize(){return this.#f}#a;get ino(){return this.#a}#l;get size(){return this.#l}#n;get blocks(){return this.#n}#g;get atimeMs(){return this.#g}#w;get mtimeMs(){return this.#w}#d;get ctimeMs(){return this.#d}#u;get birthtimeMs(){return this.#u}#C;get atime(){return this.#C}#m;get mtime(){return this.#m}#O;get ctime(){return this.#O}#v;get birthtime(){return this.#v}#y;#x;#E;#p;#F;#A;#i;#M;#b;#T;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(t,e=Gt,i,n,r,o,a){this.name=t,this.#y=r?Fs(t):Di(t),this.#i=e&Sc,this.nocase=r,this.roots=n,this.root=i||this,this.#M=o,this.#E=a.fullpath,this.#F=a.relative,this.#A=a.relativePosix,this.parent=a.parent,this.parent?this.#t=this.parent.#t:this.#t=Sa(a.fs)}depth(){return this.#x!==void 0?this.#x:this.parent?this.#x=this.parent.depth()+1:this.#x=0}childrenCache(){return this.#M}resolve(t){if(!t)return this;let e=this.getRootString(t),n=t.substring(e.length).split(this.splitSep);return e?this.getRoot(e).#R(n):this.#R(n)}#R(t){let e=this;for(let i of t)e=e.child(i);return e}children(){let t=this.#M.get(this);if(t)return t;let e=Object.assign([],{provisional:0});return this.#M.set(this,e),this.#i&=~qn,e}child(t,e){if(t===""||t===".")return this;if(t==="..")return this.parent||this;let i=this.children(),n=this.nocase?Fs(t):Di(t);for(let l of i)if(l.#y===n)return l;let r=this.parent?this.sep:"",o=this.#E?this.#E+r+t:void 0,a=this.newChild(t,Gt,{...e,parent:this,fullpath:o});return this.canReaddir()||(a.#i|=Zt),i.push(a),a}relative(){if(this.isCWD)return"";if(this.#F!==void 0)return this.#F;let t=this.name,e=this.parent;if(!e)return this.#F=this.name;let i=e.relative();return i+(!i||!e.parent?"":this.sep)+t}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#A!==void 0)return this.#A;let t=this.name,e=this.parent;if(!e)return this.#A=this.fullpathPosix();let i=e.relativePosix();return i+(!i||!e.parent?"":"/")+t}fullpath(){if(this.#E!==void 0)return this.#E;let t=this.name,e=this.parent;if(!e)return this.#E=this.name;let n=e.fullpath()+(e.parent?this.sep:"")+t;return this.#E=n}fullpathPosix(){if(this.#p!==void 0)return this.#p;if(this.sep==="/")return this.#p=this.fullpath();if(!this.parent){let n=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(n)?this.#p=`//?/${n}`:this.#p=n}let t=this.parent,e=t.fullpathPosix(),i=e+(!e||!t.parent?"":"/")+this.name;return this.#p=i}isUnknown(){return(this.#i&Ut)===Gt}isType(t){return this[`is${t}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#i&Ut)===va}isDirectory(){return(this.#i&Ut)===se}isCharacterDevice(){return(this.#i&Ut)===Ca}isBlockDevice(){return(this.#i&Ut)===Oa}isFIFO(){return(this.#i&Ut)===Ea}isSocket(){return(this.#i&Ut)===Aa}isSymbolicLink(){return(this.#i&He)===He}lstatCached(){return this.#i&ma?this:void 0}readlinkCached(){return this.#b}realpathCached(){return this.#T}readdirCached(){let t=this.children();return t.slice(0,t.provisional)}canReadlink(){if(this.#b)return!0;if(!this.parent)return!1;let t=this.#i&Ut;return!(t!==Gt&&t!==He||this.#i&$s||this.#i&Zt)}calledReaddir(){return!!(this.#i&qn)}isENOENT(){return!!(this.#i&Zt)}isNamed(t){return this.nocase?this.#y===Fs(t):this.#y===Di(t)}async readlink(){var e;let t=this.#b;if(t)return t;if(this.canReadlink()&&this.parent)try{let i=await this.#t.promises.readlink(this.fullpath()),n=(e=await this.parent.realpath())==null?void 0:e.resolve(i);if(n)return this.#b=n}catch(i){this.#c(i.code);return}}readlinkSync(){var e;let t=this.#b;if(t)return t;if(this.canReadlink()&&this.parent)try{let i=this.#t.readlinkSync(this.fullpath()),n=(e=this.parent.realpathSync())==null?void 0:e.resolve(i);if(n)return this.#b=n}catch(i){this.#c(i.code);return}}#I(t){this.#i|=qn;for(let e=t.provisional;e<t.length;e++){let i=t[e];i&&i.#N()}}#N(){this.#i&Zt||(this.#i=(this.#i|Zt)&Ni,this.#_())}#_(){let t=this.children();t.provisional=0;for(let e of t)e.#N()}#$(){this.#i|=Ts,this.#P()}#P(){if(this.#i&Li)return;let t=this.#i;(t&Ut)===se&&(t&=Ni),this.#i=t|Li,this.#_()}#L(t=""){t==="ENOTDIR"||t==="EPERM"?this.#P():t==="ENOENT"?this.#N():this.children().provisional=0}#D(t=""){t==="ENOTDIR"?this.parent.#P():t==="ENOENT"&&this.#N()}#c(t=""){let e=this.#i;e|=$s,t==="ENOENT"&&(e|=Zt),(t==="EINVAL"||t==="UNKNOWN")&&(e&=Ni),this.#i=e,t==="ENOTDIR"&&this.parent&&this.parent.#P()}#W(t,e){return this.#j(t,e)||this.#z(t,e)}#z(t,e){let i=Vn(t),n=this.newChild(t.name,i,{parent:this}),r=n.#i&Ut;return r!==se&&r!==He&&r!==Gt&&(n.#i|=Li),e.unshift(n),e.provisional++,n}#j(t,e){for(let i=e.provisional;i<e.length;i++){let n=e[i];if((this.nocase?Fs(t.name):Di(t.name))===n.#y)return this.#B(t,n,i,e)}}#B(t,e,i,n){let r=e.name;return e.#i=e.#i&Ni|Vn(t),r!==t.name&&(e.name=t.name),i!==n.provisional&&(i===n.length-1?n.pop():n.splice(i,1),n.unshift(e)),n.provisional++,e}async lstat(){if(!(this.#i&Zt))try{return this.#k(await this.#t.promises.lstat(this.fullpath())),this}catch(t){this.#D(t.code)}}lstatSync(){if(!(this.#i&Zt))try{return this.#k(this.#t.lstatSync(this.fullpath())),this}catch(t){this.#D(t.code)}}#k(t){let{atime:e,atimeMs:i,birthtime:n,birthtimeMs:r,blksize:o,blocks:a,ctime:l,ctimeMs:h,dev:u,gid:c,ino:d,mode:p,mtime:S,mtimeMs:w,nlink:m,rdev:E,size:v,uid:_}=t;this.#C=e,this.#g=i,this.#v=n,this.#u=r,this.#f=o,this.#n=a,this.#O=l,this.#d=h,this.#e=u,this.#S=c,this.#a=d,this.#r=p,this.#m=S,this.#w=w,this.#s=m,this.#h=E,this.#l=v,this.#o=_;let O=Vn(t);this.#i=this.#i&Ni|O|ma,O!==Gt&&O!==se&&O!==He&&(this.#i|=Li)}#G=[];#H=!1;#Y(t){this.#H=!1;let e=this.#G.slice();this.#G.length=0,e.forEach(i=>i(null,t))}readdirCB(t,e=!1){if(!this.canReaddir()){e?t(null,[]):queueMicrotask(()=>t(null,[]));return}let i=this.children();if(this.calledReaddir()){let r=i.slice(0,i.provisional);e?t(null,r):queueMicrotask(()=>t(null,r));return}if(this.#G.push(t),this.#H)return;this.#H=!0;let n=this.fullpath();this.#t.readdir(n,{withFileTypes:!0},(r,o)=>{if(r)this.#L(r.code),i.provisional=0;else{for(let a of o)this.#W(a,i);this.#I(i)}this.#Y(i.slice(0,i.provisional))})}#U;async readdir(){if(!this.canReaddir())return[];let t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);let e=this.fullpath();if(this.#U)await this.#U;else{let i=()=>{};this.#U=new Promise(n=>i=n);try{for(let n of await this.#t.promises.readdir(e,{withFileTypes:!0}))this.#W(n,t);this.#I(t)}catch(n){this.#L(n.code),t.provisional=0}this.#U=void 0,i()}return t.slice(0,t.provisional)}readdirSync(){if(!this.canReaddir())return[];let t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);let e=this.fullpath();try{for(let i of this.#t.readdirSync(e,{withFileTypes:!0}))this.#W(i,t);this.#I(t)}catch(i){this.#L(i.code),t.provisional=0}return t.slice(0,t.provisional)}canReaddir(){if(this.#i&ga)return!1;let t=Ut&this.#i;return t===Gt||t===se||t===He}shouldWalk(t,e){return(this.#i&se)===se&&!(this.#i&ga)&&!t.has(this)&&(!e||e(this))}async realpath(){if(this.#T)return this.#T;if(!((Ts|$s|Zt)&this.#i))try{let t=await this.#t.promises.realpath(this.fullpath());return this.#T=this.resolve(t)}catch{this.#$()}}realpathSync(){if(this.#T)return this.#T;if(!((Ts|$s|Zt)&this.#i))try{let t=this.#t.realpathSync(this.fullpath());return this.#T=this.resolve(t)}catch{this.#$()}}[_a](t){if(t===this)return;t.isCWD=!1,this.isCWD=!0;let e=new Set([]),i=[],n=this;for(;n&&n.parent;)e.add(n),n.#F=i.join(this.sep),n.#A=i.join("/"),n=n.parent,i.push("..");for(n=t;n&&n.parent&&!e.has(n);)n.#F=void 0,n.#A=void 0,n=n.parent}},Ms=class s extends xt{sep="\\";splitSep=yc;constructor(t,e=Gt,i,n,r,o,a){super(t,e,i,n,r,o,a)}newChild(t,e=Gt,i={}){return new s(t,e,this.root,this.roots,this.nocase,this.childrenCache(),i)}getRootString(t){return li.win32.parse(t).root}getRoot(t){if(t=bc(t.toUpperCase()),t===this.root.name)return this.root;for(let[e,i]of Object.entries(this.roots))if(this.sameRoot(t,e))return this.roots[t]=i;return this.roots[t]=new hi(t,this).root}sameRoot(t,e=this.root.name){return t=t.toUpperCase().replace(/\//g,"\\").replace(xa,"$1\\"),t===e}},Rs=class s extends xt{splitSep="/";sep="/";constructor(t,e=Gt,i,n,r,o,a){super(t,e,i,n,r,o,a)}getRootString(t){return t.startsWith("/")?"/":""}getRoot(t){return this.root}newChild(t,e=Gt,i={}){return new s(t,e,this.root,this.roots,this.nocase,this.childrenCache(),i)}},Is=class{root;rootPath;roots;cwd;#t;#e;#r;nocase;#s;constructor(t=process.cwd(),e,i,{nocase:n,childrenCacheSize:r=16*1024,fs:o=Pi}={}){this.#s=Sa(o),(t instanceof URL||t.startsWith("file://"))&&(t=(0,ya.fileURLToPath)(t));let a=e.resolve(t);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#t=new js,this.#e=new js,this.#r=new Kn(r);let l=a.substring(this.rootPath.length).split(i);if(l.length===1&&!l[0]&&l.pop(),n===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=n,this.root=this.newRoot(this.#s),this.roots[this.rootPath]=this.root;let h=this.root,u=l.length-1,c=e.sep,d=this.rootPath,p=!1;for(let S of l){let w=u--;h=h.child(S,{relative:new Array(w).fill("..").join(c),relativePosix:new Array(w).fill("..").join("/"),fullpath:d+=(p?"":c)+S}),p=!0}this.cwd=h}depth(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.depth()}childrenCache(){return this.#r}resolve(...t){let e="";for(let r=t.length-1;r>=0;r--){let o=t[r];if(!(!o||o===".")&&(e=e?`${o}/${e}`:o,this.isAbsolute(o)))break}let i=this.#t.get(e);if(i!==void 0)return i;let n=this.cwd.resolve(e).fullpath();return this.#t.set(e,n),n}resolvePosix(...t){let e="";for(let r=t.length-1;r>=0;r--){let o=t[r];if(!(!o||o===".")&&(e=e?`${o}/${e}`:o,this.isAbsolute(o)))break}let i=this.#e.get(e);if(i!==void 0)return i;let n=this.cwd.resolve(e).fullpathPosix();return this.#e.set(e,n),n}relative(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.relative()}relativePosix(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.relativePosix()}basename(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.name}dirname(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),(t.parent||t).fullpath()}async readdir(t=this.cwd,e={withFileTypes:!0}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t,t=this.cwd);let{withFileTypes:i}=e;if(t.canReaddir()){let n=await t.readdir();return i?n:n.map(r=>r.name)}else return[]}readdirSync(t=this.cwd,e={withFileTypes:!0}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t,t=this.cwd);let{withFileTypes:i=!0}=e;return t.canReaddir()?i?t.readdirSync():t.readdirSync().map(n=>n.name):[]}async lstat(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.lstat()}lstatSync(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.lstatSync()}async readlink(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t.withFileTypes,t=this.cwd);let i=await t.readlink();return e?i:i==null?void 0:i.fullpath()}readlinkSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t.withFileTypes,t=this.cwd);let i=t.readlinkSync();return e?i:i==null?void 0:i.fullpath()}async realpath(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t.withFileTypes,t=this.cwd);let i=await t.realpath();return e?i:i==null?void 0:i.fullpath()}realpathSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t.withFileTypes,t=this.cwd);let i=t.realpathSync();return e?i:i==null?void 0:i.fullpath()}async walk(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=[];(!r||r(t))&&a.push(i?t:t.fullpath());let l=new Set,h=(c,d)=>{l.add(c),c.readdirCB((p,S)=>{if(p)return d(p);let w=S.length;if(!w)return d();let m=()=>{--w===0&&d()};for(let E of S)(!r||r(E))&&a.push(i?E:E.fullpath()),n&&E.isSymbolicLink()?E.realpath().then(v=>v!=null&&v.isUnknown()?v.lstat():v).then(v=>v!=null&&v.shouldWalk(l,o)?h(v,m):m()):E.shouldWalk(l,o)?h(E,m):m()},!0)},u=t;return new Promise((c,d)=>{h(u,p=>{if(p)return d(p);c(a)})})}walkSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=[];(!r||r(t))&&a.push(i?t:t.fullpath());let l=new Set([t]);for(let h of l){let u=h.readdirSync();for(let c of u){(!r||r(c))&&a.push(i?c:c.fullpath());let d=c;if(c.isSymbolicLink()){if(!(n&&(d=c.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(l,o)&&l.add(d)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(t=this.cwd,e={}){return typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t,t=this.cwd),this.stream(t,e)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:r,walkFilter:o}=e;(!r||r(t))&&(yield i?t:t.fullpath());let a=new Set([t]);for(let l of a){let h=l.readdirSync();for(let u of h){(!r||r(u))&&(yield i?u:u.fullpath());let c=u;if(u.isSymbolicLink()){if(!(n&&(c=u.realpathSync())))continue;c.isUnknown()&&c.lstatSync()}c.shouldWalk(a,o)&&a.add(c)}}}stream(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=new Oe({objectMode:!0});(!r||r(t))&&a.write(i?t:t.fullpath());let l=new Set,h=[t],u=0,c=()=>{let d=!1;for(;!d;){let p=h.shift();if(!p){u===0&&a.end();return}u++,l.add(p);let S=(m,E,v=!1)=>{if(m)return a.emit("error",m);if(n&&!v){let _=[];for(let O of E)O.isSymbolicLink()&&_.push(O.realpath().then(T=>T!=null&&T.isUnknown()?T.lstat():T));if(_.length){Promise.all(_).then(()=>S(null,E,!0));return}}for(let _ of E)_&&(!r||r(_))&&(a.write(i?_:_.fullpath())||(d=!0));u--;for(let _ of E){let O=_.realpathCached()||_;O.shouldWalk(l,o)&&h.push(O)}d&&!a.flowing?a.once("drain",c):w||c()},w=!0;p.readdirCB(S,!0),w=!1}};return c(),a}streamSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof xt||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=new Oe({objectMode:!0}),l=new Set;(!r||r(t))&&a.write(i?t:t.fullpath());let h=[t],u=0,c=()=>{let d=!1;for(;!d;){let p=h.shift();if(!p){u===0&&a.end();return}u++,l.add(p);let S=p.readdirSync();for(let w of S)(!r||r(w))&&(a.write(i?w:w.fullpath())||(d=!0));u--;for(let w of S){let m=w;if(w.isSymbolicLink()){if(!(n&&(m=w.realpathSync())))continue;m.isUnknown()&&m.lstatSync()}m.shouldWalk(l,o)&&h.push(m)}}d&&!a.flowing&&a.once("drain",c)};return c(),a}chdir(t=this.cwd){let e=this.cwd;this.cwd=typeof t=="string"?this.cwd.resolve(t):t,this.cwd[_a](e)}},hi=class extends Is{sep="\\";constructor(t=process.cwd(),e={}){let{nocase:i=!0}=e;super(t,li.win32,"\\",{...e,nocase:i}),this.nocase=i;for(let n=this.cwd;n;n=n.parent)n.nocase=this.nocase}parseRootPath(t){return li.win32.parse(t).root.toUpperCase()}newRoot(t){return new Ms(this.rootPath,se,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")||t.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(t)}},ci=class extends Is{sep="/";constructor(t=process.cwd(),e={}){let{nocase:i=!1}=e;super(t,li.posix,"/",{...e,nocase:i}),this.nocase=i}parseRootPath(t){return"/"}newRoot(t){return new Rs(this.rootPath,se,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")}},Wi=class extends ci{constructor(t=process.cwd(),e={}){let{nocase:i=!0}=e;super(t,{...e,nocase:i})}},Zd=process.platform==="win32"?Ms:Rs,$a=process.platform==="win32"?hi:process.platform==="darwin"?Wi:ci;var xc=s=>s.length>=1,Ec=s=>s.length>=1,fi=class s{#t;#e;#r;length;#s;#o;#S;#h;#f;#a;#l=!0;constructor(t,e,i,n){if(!xc(t))throw new TypeError("empty pattern list");if(!Ec(e))throw new TypeError("empty glob list");if(e.length!==t.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=t.length,i<0||i>=this.length)throw new TypeError("index out of range");if(this.#t=t,this.#e=e,this.#r=i,this.#s=n,this.#r===0){if(this.isUNC()){let[r,o,a,l,...h]=this.#t,[u,c,d,p,...S]=this.#e;h[0]===""&&(h.shift(),S.shift());let w=[r,o,a,l,""].join("/"),m=[u,c,d,p,""].join("/");this.#t=[w,...h],this.#e=[m,...S],this.length=this.#t.length}else if(this.isDrive()||this.isAbsolute()){let[r,...o]=this.#t,[a,...l]=this.#e;o[0]===""&&(o.shift(),l.shift());let h=r+"/",u=a+"/";this.#t=[h,...o],this.#e=[u,...l],this.length=this.#t.length}}}pattern(){return this.#t[this.#r]}isString(){return typeof this.#t[this.#r]=="string"}isGlobstar(){return this.#t[this.#r]===yt}isRegExp(){return this.#t[this.#r]instanceof RegExp}globString(){return this.#S=this.#S||(this.#r===0?this.isAbsolute()?this.#e[0]+this.#e.slice(1).join("/"):this.#e.join("/"):this.#e.slice(this.#r).join("/"))}hasMore(){return this.length>this.#r+1}rest(){return this.#o!==void 0?this.#o:this.hasMore()?(this.#o=new s(this.#t,this.#e,this.#r+1,this.#s),this.#o.#a=this.#a,this.#o.#f=this.#f,this.#o.#h=this.#h,this.#o):this.#o=null}isUNC(){let t=this.#t;return this.#f!==void 0?this.#f:this.#f=this.#s==="win32"&&this.#r===0&&t[0]===""&&t[1]===""&&typeof t[2]=="string"&&!!t[2]&&typeof t[3]=="string"&&!!t[3]}isDrive(){let t=this.#t;return this.#h!==void 0?this.#h:this.#h=this.#s==="win32"&&this.#r===0&&this.length>1&&typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0])}isAbsolute(){let t=this.#t;return this.#a!==void 0?this.#a:this.#a=t[0]===""&&t.length>1||this.isDrive()||this.isUNC()}root(){let t=this.#t[0];return typeof t=="string"&&this.isAbsolute()&&this.#r===0?t:""}checkFollowGlobstar(){return!(this.#r===0||!this.isGlobstar()||!this.#l)}markFollowGlobstar(){return this.#r===0||!this.isGlobstar()||!this.#l?!1:(this.#l=!1,!0)}};var Cc=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",ui=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(t,{nobrace:e,nocase:i,noext:n,noglobstar:r,platform:o=Cc}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=o,this.mmopts={dot:!0,nobrace:e,nocase:i,noext:n,noglobstar:r,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let a of t)this.add(a)}add(t){let e=new jt(t,this.mmopts);for(let i=0;i<e.set.length;i++){let n=e.set[i],r=e.globParts[i];if(!n||!r)throw new Error("invalid pattern object");for(;n[0]==="."&&r[0]===".";)n.shift(),r.shift();let o=new fi(n,r,0,this.platform),a=new jt(o.globString(),this.mmopts),l=r[r.length-1]==="**",h=o.isAbsolute();h?this.absolute.push(a):this.relative.push(a),l&&(h?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}ignored(t){let e=t.fullpath(),i=`${e}/`,n=t.relative()||".",r=`${n}/`;for(let o of this.relative)if(o.match(n)||o.match(r))return!0;for(let o of this.absolute)if(o.match(e)||o.match(i))return!0;return!1}childrenIgnored(t){let e=t.fullpath()+"/",i=(t.relative()||".")+"/";for(let n of this.relativeChildren)if(n.match(i))return!0;for(let n of this.absoluteChildren)if(n.match(e))return!0;return!1}};var Jn=class s{store;constructor(t=new Map){this.store=t}copy(){return new s(new Map(this.store))}hasWalked(t,e){var i;return(i=this.store.get(t.fullpath()))==null?void 0:i.has(e.globString())}storeWalked(t,e){let i=t.fullpath(),n=this.store.get(i);n?n.add(e.globString()):this.store.set(i,new Set([e.globString()]))}},Zn=class{store=new Map;add(t,e,i){let n=(e?2:0)|(i?1:0),r=this.store.get(t);this.store.set(t,r===void 0?n:n&r)}entries(){return[...this.store.entries()].map(([t,e])=>[t,!!(e&2),!!(e&1)])}},Qn=class{store=new Map;add(t,e){if(!t.canReaddir())return;let i=this.store.get(t);i?i.find(n=>n.globString()===e.globString())||i.push(e):this.store.set(t,[e])}get(t){let e=this.store.get(t);if(!e)throw new Error("attempting to walk unknown path");return e}entries(){return this.keys().map(t=>[t,this.store.get(t)])}keys(){return[...this.store.keys()].filter(t=>t.canReaddir())}},zi=class s{hasWalkedCache;matches=new Zn;subwalks=new Qn;patterns;follow;dot;opts;constructor(t,e){this.opts=t,this.follow=!!t.follow,this.dot=!!t.dot,this.hasWalkedCache=e?e.copy():new Jn}processPatterns(t,e){this.patterns=e;let i=e.map(n=>[t,n]);for(let[n,r]of i){this.hasWalkedCache.storeWalked(n,r);let o=r.root(),a=r.isAbsolute()&&this.opts.absolute!==!1;if(o){n=n.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let c=r.rest();if(c)r=c;else{this.matches.add(n,!0,!1);continue}}if(n.isENOENT())continue;let l,h,u=!1;for(;typeof(l=r.pattern())=="string"&&(h=r.rest());)n=n.resolve(l),r=h,u=!0;if(l=r.pattern(),h=r.rest(),u){if(this.hasWalkedCache.hasWalked(n,r))continue;this.hasWalkedCache.storeWalked(n,r)}if(typeof l=="string"){let c=l===".."||l===""||l===".";this.matches.add(n.resolve(l),a,c);continue}else if(l===yt){(!n.isSymbolicLink()||this.follow||r.checkFollowGlobstar())&&this.subwalks.add(n,r);let c=h==null?void 0:h.pattern(),d=h==null?void 0:h.rest();if(!h||(c===""||c===".")&&!d)this.matches.add(n,a,c===""||c===".");else if(c===".."){let p=n.parent||n;d?this.hasWalkedCache.hasWalked(p,d)||this.subwalks.add(p,d):this.matches.add(p,a,!0)}}else l instanceof RegExp&&this.subwalks.add(n,r)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new s(this.opts,this.hasWalkedCache)}filterEntries(t,e){let i=this.subwalks.get(t),n=this.child();for(let r of e)for(let o of i){let a=o.isAbsolute(),l=o.pattern(),h=o.rest();l===yt?n.testGlobstar(r,o,h,a):l instanceof RegExp?n.testRegExp(r,l,h,a):n.testString(r,l,h,a)}return n}testGlobstar(t,e,i,n){if((this.dot||!t.name.startsWith("."))&&(e.hasMore()||this.matches.add(t,n,!1),t.canReaddir()&&(this.follow||!t.isSymbolicLink()?this.subwalks.add(t,e):t.isSymbolicLink()&&(i&&e.checkFollowGlobstar()?this.subwalks.add(t,i):e.markFollowGlobstar()&&this.subwalks.add(t,e)))),i){let r=i.pattern();if(typeof r=="string"&&r!==".."&&r!==""&&r!==".")this.testString(t,r,i.rest(),n);else if(r===".."){let o=t.parent||t;this.subwalks.add(o,i)}else r instanceof RegExp&&this.testRegExp(t,r,i.rest(),n)}}testRegExp(t,e,i,n){e.test(t.name)&&(i?this.subwalks.add(t,i):this.matches.add(t,n,!1))}testString(t,e,i,n){t.isNamed(e)&&(i?this.subwalks.add(t,i):this.matches.add(t,n,!1))}};var Oc=(s,t)=>typeof s=="string"?new ui([s],t):Array.isArray(s)?new ui(s,t):s,Ns=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#t=[];#e;#r;signal;maxDepth;includeChildMatches;constructor(t,e,i){if(this.patterns=t,this.path=e,this.opts=i,this.#r=!i.posix&&i.platform==="win32"?"\\":"/",this.includeChildMatches=i.includeChildMatches!==!1,(i.ignore||!this.includeChildMatches)&&(this.#e=Oc(i.ignore??[],i),!this.includeChildMatches&&typeof this.#e.add!="function")){let n="cannot ignore child matches, ignore lacks add() method.";throw new Error(n)}this.maxDepth=i.maxDepth||1/0,i.signal&&(this.signal=i.signal,this.signal.addEventListener("abort",()=>{this.#t.length=0}))}#s(t){var e,i;return this.seen.has(t)||!!((i=(e=this.#e)==null?void 0:e.ignored)!=null&&i.call(e,t))}#o(t){var e,i;return!!((i=(e=this.#e)==null?void 0:e.childrenIgnored)!=null&&i.call(e,t))}pause(){this.paused=!0}resume(){var e;if((e=this.signal)!=null&&e.aborted)return;this.paused=!1;let t;for(;!this.paused&&(t=this.#t.shift());)t()}onResume(t){var e;(e=this.signal)!=null&&e.aborted||(this.paused?this.#t.push(t):t())}async matchCheck(t,e){if(e&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=t.realpathCached()||await t.realpath(),!i)return;t=i}let r=t.isUnknown()||this.opts.stat?await t.lstat():t;if(this.opts.follow&&this.opts.nodir&&(r!=null&&r.isSymbolicLink())){let o=await r.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(r,e)}matchCheckTest(t,e){var i;return t&&(this.maxDepth===1/0||t.depth()<=this.maxDepth)&&(!e||t.canReaddir())&&(!this.opts.nodir||!t.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!t.isSymbolicLink()||!((i=t.realpathCached())!=null&&i.isDirectory()))&&!this.#s(t)?t:void 0}matchCheckSync(t,e){if(e&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=t.realpathCached()||t.realpathSync(),!i)return;t=i}let r=t.isUnknown()||this.opts.stat?t.lstatSync():t;if(this.opts.follow&&this.opts.nodir&&(r!=null&&r.isSymbolicLink())){let o=r.realpathSync();o&&(o!=null&&o.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(r,e)}matchFinish(t,e){var r;if(this.#s(t))return;if(!this.includeChildMatches&&((r=this.#e)!=null&&r.add)){let o=`${t.relativePosix()}/**`;this.#e.add(o)}let i=this.opts.absolute===void 0?e:this.opts.absolute;this.seen.add(t);let n=this.opts.mark&&t.isDirectory()?this.#r:"";if(this.opts.withFileTypes)this.matchEmit(t);else if(i){let o=this.opts.posix?t.fullpathPosix():t.fullpath();this.matchEmit(o+n)}else{let o=this.opts.posix?t.relativePosix():t.relative(),a=this.opts.dotRelative&&!o.startsWith(".."+this.#r)?"."+this.#r:"";this.matchEmit(o?a+o+n:"."+n)}}async match(t,e,i){let n=await this.matchCheck(t,i);n&&this.matchFinish(n,e)}matchSync(t,e,i){let n=this.matchCheckSync(t,i);n&&this.matchFinish(n,e)}walkCB(t,e,i){var n;(n=this.signal)!=null&&n.aborted&&i(),this.walkCB2(t,e,new zi(this.opts),i)}walkCB2(t,e,i,n){var a;if(this.#o(t))return n();if((a=this.signal)!=null&&a.aborted&&n(),this.paused){this.onResume(()=>this.walkCB2(t,e,i,n));return}i.processPatterns(t,e);let r=1,o=()=>{--r===0&&n()};for(let[l,h,u]of i.matches.entries())this.#s(l)||(r++,this.match(l,h,u).then(()=>o()));for(let l of i.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;r++;let h=l.readdirCached();l.calledReaddir()?this.walkCB3(l,h,i,o):l.readdirCB((u,c)=>this.walkCB3(l,c,i,o),!0)}o()}walkCB3(t,e,i,n){i=i.filterEntries(t,e);let r=1,o=()=>{--r===0&&n()};for(let[a,l,h]of i.matches.entries())this.#s(a)||(r++,this.match(a,l,h).then(()=>o()));for(let[a,l]of i.subwalks.entries())r++,this.walkCB2(a,l,i.child(),o);o()}walkCBSync(t,e,i){var n;(n=this.signal)!=null&&n.aborted&&i(),this.walkCB2Sync(t,e,new zi(this.opts),i)}walkCB2Sync(t,e,i,n){var a;if(this.#o(t))return n();if((a=this.signal)!=null&&a.aborted&&n(),this.paused){this.onResume(()=>this.walkCB2Sync(t,e,i,n));return}i.processPatterns(t,e);let r=1,o=()=>{--r===0&&n()};for(let[l,h,u]of i.matches.entries())this.#s(l)||this.matchSync(l,h,u);for(let l of i.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;r++;let h=l.readdirSync();this.walkCB3Sync(l,h,i,o)}o()}walkCB3Sync(t,e,i,n){i=i.filterEntries(t,e);let r=1,o=()=>{--r===0&&n()};for(let[a,l,h]of i.matches.entries())this.#s(a)||this.matchSync(a,l,h);for(let[a,l]of i.subwalks.entries())r++,this.walkCB2Sync(a,l,i.child(),o);o()}},Bi=class extends Ns{matches=new Set;constructor(t,e,i){super(t,e,i)}matchEmit(t){this.matches.add(t)}async walk(){var t;if((t=this.signal)!=null&&t.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,i)=>{this.walkCB(this.path,this.patterns,()=>{var n;(n=this.signal)!=null&&n.aborted?i(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){var t;if((t=this.signal)!=null&&t.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{var e;if((e=this.signal)!=null&&e.aborted)throw this.signal.reason}),this.matches}},Ui=class extends Ns{results;constructor(t,e,i){super(t,e,i),this.results=new Oe({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(t){this.results.write(t),this.results.flowing||this.pause()}stream(){let t=this.path;return t.isUnknown()?t.lstat().then(()=>{this.walkCB(t,this.patterns,()=>this.results.end())}):this.walkCB(t,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var vc=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Qt=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(t,e){if(!e)throw new TypeError("glob options required");if(this.withFileTypes=!!e.withFileTypes,this.signal=e.signal,this.follow=!!e.follow,this.dot=!!e.dot,this.dotRelative=!!e.dotRelative,this.nodir=!!e.nodir,this.mark=!!e.mark,e.cwd?(e.cwd instanceof URL||e.cwd.startsWith("file://"))&&(e.cwd=(0,Fa.fileURLToPath)(e.cwd)):this.cwd="",this.cwd=e.cwd||"",this.root=e.root,this.magicalBraces=!!e.magicalBraces,this.nobrace=!!e.nobrace,this.noext=!!e.noext,this.realpath=!!e.realpath,this.absolute=e.absolute,this.includeChildMatches=e.includeChildMatches!==!1,this.noglobstar=!!e.noglobstar,this.matchBase=!!e.matchBase,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:1/0,this.stat=!!e.stat,this.ignore=e.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof t=="string"&&(t=[t]),this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(t=t.map(l=>l.replace(/\\/g,"/"))),this.matchBase){if(e.noglobstar)throw new TypeError("base matching requires globstar");t=t.map(l=>l.includes("/")?l:`./**/${l}`)}if(this.pattern=t,this.platform=e.platform||vc,this.opts={...e,platform:this.platform},e.scurry){if(this.scurry=e.scurry,e.nocase!==void 0&&e.nocase!==e.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let l=e.platform==="win32"?hi:e.platform==="darwin"?Wi:e.platform?ci:$a;this.scurry=new l(this.cwd,{nocase:e.nocase,fs:e.fs})}this.nocase=this.scurry.nocase;let i=this.platform==="darwin"||this.platform==="win32",n={...e,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:i,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},r=this.pattern.map(l=>new jt(l,n)),[o,a]=r.reduce((l,h)=>(l[0].push(...h.set),l[1].push(...h.globParts),l),[[],[]]);this.patterns=o.map((l,h)=>{let u=a[h];if(!u)throw new Error("invalid pattern object");return new fi(l,u,0,this.platform)})}async walk(){return[...await new Bi(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Bi(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Ui(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Ui(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var Xn=(s,t={})=>{Array.isArray(s)||(s=[s]);for(let e of s)if(new jt(e,t).hasMagic())return!0;return!1};function Ps(s,t={}){return new Qt(s,t).streamSync()}function ja(s,t={}){return new Qt(s,t).stream()}function Ma(s,t={}){return new Qt(s,t).walkSync()}async function Ta(s,t={}){return new Qt(s,t).walk()}function Ls(s,t={}){return new Qt(s,t).iterateSync()}function Ra(s,t={}){return new Qt(s,t).iterate()}var Ac=Ps,_c=Object.assign(ja,{sync:Ps}),$c=Ls,Fc=Object.assign(Ra,{sync:Ls}),Tc=Object.assign(Ma,{stream:Ps,iterate:Ls}),At=Object.assign(Ta,{glob:Ta,globSync:Ma,sync:Tc,globStream:ja,stream:_c,globStreamSync:Ps,streamSync:Ac,globIterate:Ra,iterate:Fc,globIterateSync:Ls,iterateSync:$c,Glob:Qt,hasMagic:Xn,escape:si,unescape:Kt});At.glob=At;var tr=k(require("fs"),1),Na=k(require("path"),1);var Ia=k(require("path"),1),Gi="_git";function Hi(...s){return Ia.default.join(Gi,...s)}function ki(){return Hi("config.json")}function Ds(){return Hi("snapshot.json")}var Ae=[`**/${Gi}/**`,Gi,"**/node_modules/**","package-lock.json"];function Ws(s="."){let t=[...Ae],e=Na.default.join(s,".gitignore");if(tr.default.existsSync(e))try{let n=tr.default.readFileSync(e,"utf-8").split(`
`).map(r=>r.trim()).filter(r=>r&&!r.startsWith("#")).map(r=>r.startsWith("/")?r.slice(1):r.endsWith("/")?`${r}**`:r.startsWith("*")?r:`**/${r}`);t.push(...n)}catch(i){x.debug(`Error reading .gitignore: ${i.message}`)}return t}async function re(s="."){bs(er.default.join(s,Gi));let t=Ws(),e=await At("**/*",{cwd:s,dot:!0,nodir:!0,ignore:Ae}),i={};for(let r of e)if(!t.some(a=>dt(r,a,{dot:!0}))){let a=er.default.join(s,r);i[r]=Yi.default.readFileSync(a,"utf-8")||""}let n=Hi("snapshot.json");return Yi.default.writeFileSync(n,JSON.stringify(i,null,2)),x.debug(`Created repository snapshot with ${Object.keys(i).length} files`),i}function zs(s="."){let t=Hi("snapshot.json");return Yi.default.existsSync(t)?JSON.parse(Yi.default.readFileSync(t,"utf-8")):{}}var Bs=k(require("fs"),1);function vt(){try{let s=ki();return Bs.default.existsSync(s)?JSON.parse(Bs.default.readFileSync(s,"utf-8")):{}}catch(s){return x.error(`Failed to read config: ${s.message}`),{}}}function Rt(s){try{let t=ki();Bs.default.writeFileSync(t,JSON.stringify(s,null,2)),x.debug("Config updated successfully")}catch(t){throw new Error(`Failed to write config: ${t.message}`)}}function ir(s){let e={...vt(),...s};return Rt(e),e}async function di(s,t,e="main"){let i=`${he}/repos/${s}/${t}/commits/${e}`;return(await Ue(i)).sha}function Pa(){return vt().lastCommit||null}async function La(s,t,e,i){let n=`${he}/repos/${s}/${t}/compare/${e}...${i}`;return Ue(n)}var Da=k(require("path"),1),Wa=k(require("fs"),1);async function Us(s){try{x.info("Starting clone operation..."),jc(s.repo),zt();let[t,e]=s.repo.split("/");await Mc(t,e),x.success(`\u2713 Repository ${t}/${e} cloned successfully!`),x.info(`Directory: ${e}`)}catch(t){x.error(`Clone failed: ${t.message}`),x.debug(`Stack trace: ${t.stack}`),process.exit(1)}}function jc(s){if(!s)throw new Error("Repository path is required");let[t,e]=s.split("/");if(!t||!e)throw new Error("Invalid repository format. Use owner/repo");if(Wa.default.existsSync(e))throw new Error(`Directory ${e} already exists`)}async function Mc(s,t){x.info(`Cloning ${s}/${t}...`);let e=await ti(s,t);x.info(JSON.stringify(e)),xe(t);let i=process.cwd();try{process.chdir(t),bs("_git");let n=await di(s,t);x.info(`Latest commit: ${n}`),await za(s,t);let r={remote:{origin:{owner:s,repo:t,url:`https://github.com/${s}/${t}.git`}},lastCommit:n};Rt(r),await re(".")}catch(n){throw x.error(`Failed to download contents: ${n.message}`),n}finally{process.chdir(i)}}async function za(s,t,e=""){let i=await In(s,t,e);for(let n of i){let r=Da.default.join(e,n.name);x.debug(`Processing: ${r}`),n.type==="dir"?(xe(r),await za(s,t,r)):n.type==="file"&&n.content&&ce(r,n.content)}}var ks=k(require("fs"),1);function Ba(){let t=vt().lastCommit;return t?{hash:t,shortHash:t.substring(0,7)}:null}var Hs=k(require("fs"),1),Ga=k(require("path"),1);function Ua(s){return s.replace(/[.+^${}()|[\]\\]/g,"\\$&")}var Gs={patterns:null,mtime:0};function de(s="."){let t=[...Ae],e=Ga.default.join(s,".gitignore");if(Hs.default.existsSync(e))try{let i=Hs.default.statSync(e);i.mtimeMs>Gs.mtime&&(Gs={patterns:Hs.default.readFileSync(e,"utf-8").split(`
`).map(o=>o.trim()).filter(o=>o&&!o.startsWith("#")).map(Rc),mtime:i.mtimeMs}),Gs.patterns&&t.push(...Gs.patterns)}catch(i){x.debug(`Error reading .gitignore: ${i.message}`)}return t}function Rc(s){return s.startsWith("/")&&(s=s.slice(1)),s.endsWith("/")&&(s=`${s}**`),!s.startsWith("*")&&!s.startsWith("/")&&(s=`**/${s}`),Ua(s)}function pi(s,t){if(!s)return!1;let e=s.replace(/\\/g,"/");return t.some(i=>dt(e,i,{dot:!0,matchBase:!0,nocase:!0}))}function Ha(s){if(!s){console.log(Z.yellow(`
No commits yet`));return}console.log(Z.blue(`
On commit: ${s.shortHash}`))}async function ka(){try{let s=Ds();if(!ks.default.existsSync(s))throw new Error("Not a git repository");let t=JSON.parse(ks.default.readFileSync(s,"utf-8")),e=Object.keys(t),i=de(),n=await At("**/*",{dot:!0,nodir:!0,ignore:i}),r=[],o=[],a=[];for(let h of e)n.includes(h)?ks.default.readFileSync(h,"utf-8")!==t[h]&&r.push(h):a.push(h);for(let h of n)e.includes(h)||o.push(h);let l=Ba();if(Ha(l),r.length===0&&o.length===0&&a.length===0){console.log(Z.green(`
Working tree clean`));return}r.length>0&&(console.log(Z.bold(`
Modified files:`)),r.forEach(h=>console.log(Z.red(`  ${h}`)))),o.length>0&&(console.log(Z.bold(`
New files:`)),o.forEach(h=>console.log(Z.green(`  ${h}`)))),a.length>0&&(console.log(Z.bold(`
Deleted files:`)),a.forEach(h=>console.log(Z.red(`  ${h}`)))),console.log()}catch(s){x.error(`Status failed: ${s.message}`),process.exit(1)}}var lr=k(require("fs"),1);function pe(){}pe.prototype={diff:function(t,e){var i,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.callback;typeof n=="function"&&(r=n,n={}),this.options=n;var o=this;function a(O){return r?(setTimeout(function(){r(void 0,O)},0),!0):O}t=this.castInput(t),e=this.castInput(e),t=this.removeEmpty(this.tokenize(t)),e=this.removeEmpty(this.tokenize(e));var l=e.length,h=t.length,u=1,c=l+h;n.maxEditLength&&(c=Math.min(c,n.maxEditLength));var d=(i=n.timeout)!==null&&i!==void 0?i:1/0,p=Date.now()+d,S=[{oldPos:-1,lastComponent:void 0}],w=this.extractCommon(S[0],e,t,0);if(S[0].oldPos+1>=h&&w+1>=l)return a([{value:this.join(e),count:e.length}]);var m=-1/0,E=1/0;function v(){for(var O=Math.max(m,-u);O<=Math.min(E,u);O+=2){var T=void 0,H=S[O-1],q=S[O+1];H&&(S[O-1]=void 0);var at=!1;if(q){var J=q.oldPos-O;at=q&&0<=J&&J<l}var G=H&&H.oldPos+1<h;if(!at&&!G){S[O]=void 0;continue}if(!G||at&&H.oldPos+1<q.oldPos?T=o.addToPath(q,!0,void 0,0):T=o.addToPath(H,void 0,!0,1),w=o.extractCommon(T,e,t,O),T.oldPos+1>=h&&w+1>=l)return a(Ic(o,T.lastComponent,e,t,o.useLongestToken));S[O]=T,T.oldPos+1>=h&&(E=Math.min(E,O-1)),w+1>=l&&(m=Math.max(m,O+1))}u++}if(r)(function O(){setTimeout(function(){if(u>c||Date.now()>p)return r();v()||O()},0)})();else for(;u<=c&&Date.now()<=p;){var _=v();if(_)return _}},addToPath:function(t,e,i,n){var r=t.lastComponent;return r&&r.added===e&&r.removed===i?{oldPos:t.oldPos+n,lastComponent:{count:r.count+1,added:e,removed:i,previousComponent:r.previousComponent}}:{oldPos:t.oldPos+n,lastComponent:{count:1,added:e,removed:i,previousComponent:r}}},extractCommon:function(t,e,i,n){for(var r=e.length,o=i.length,a=t.oldPos,l=a-n,h=0;l+1<r&&a+1<o&&this.equals(e[l+1],i[a+1]);)l++,a++,h++;return h&&(t.lastComponent={count:h,previousComponent:t.lastComponent}),t.oldPos=a,l},equals:function(t,e){return this.options.comparator?this.options.comparator(t,e):t===e||this.options.ignoreCase&&t.toLowerCase()===e.toLowerCase()},removeEmpty:function(t){for(var e=[],i=0;i<t.length;i++)t[i]&&e.push(t[i]);return e},castInput:function(t){return t},tokenize:function(t){return t.split("")},join:function(t){return t.join("")}};function Ic(s,t,e,i,n){for(var r=[],o;t;)r.push(t),o=t.previousComponent,delete t.previousComponent,t=o;r.reverse();for(var a=0,l=r.length,h=0,u=0;a<l;a++){var c=r[a];if(c.removed){if(c.value=s.join(i.slice(u,u+c.count)),u+=c.count,a&&r[a-1].added){var p=r[a-1];r[a-1]=r[a],r[a]=p}}else{if(!c.added&&n){var d=e.slice(h,h+c.count);d=d.map(function(w,m){var E=i[u+m];return E.length>w.length?E:w}),c.value=s.join(d)}else c.value=s.join(e.slice(h,h+c.count));h+=c.count,c.added||(u+=c.count)}}var S=r[l-1];return l>1&&typeof S.value=="string"&&(S.added||S.removed)&&s.equals("",S.value)&&(r[l-2].value+=S.value,r.pop()),r}var gm=new pe;var Ya=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,qa=/\S/,Va=new pe;Va.equals=function(s,t){return this.options.ignoreCase&&(s=s.toLowerCase(),t=t.toLowerCase()),s===t||this.options.ignoreWhitespace&&!qa.test(s)&&!qa.test(t)};Va.tokenize=function(s){for(var t=s.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),e=0;e<t.length-1;e++)!t[e+1]&&t[e+2]&&Ya.test(t[e])&&Ya.test(t[e+2])&&(t[e]+=t[e+2],t.splice(e+1,2),e--);return t};var ar=new pe;ar.tokenize=function(s){this.options.stripTrailingCr&&(s=s.replace(/\r\n/g,`
`));var t=[],e=s.split(/(\n|\r\n)/);e[e.length-1]||e.pop();for(var i=0;i<e.length;i++){var n=e[i];i%2&&!this.options.newlineIsToken?t[t.length-1]+=n:(this.options.ignoreWhitespace&&(n=n.trim()),t.push(n))}return t};function Nc(s,t,e){return ar.diff(s,t,e)}var Pc=new pe;Pc.tokenize=function(s){return s.split(/(\S.+?[.!?])(?=\s+|$)/)};var Lc=new pe;Lc.tokenize=function(s){return s.split(/([{}:;,]|\s+)/)};function Ys(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ys=function(t){return typeof t}:Ys=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ys(s)}function sr(s){return Dc(s)||Wc(s)||zc(s)||Bc()}function Dc(s){if(Array.isArray(s))return nr(s)}function Wc(s){if(typeof Symbol<"u"&&Symbol.iterator in Object(s))return Array.from(s)}function zc(s,t){if(s){if(typeof s=="string")return nr(s,t);var e=Object.prototype.toString.call(s).slice(8,-1);if(e==="Object"&&s.constructor&&(e=s.constructor.name),e==="Map"||e==="Set")return Array.from(s);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return nr(s,t)}}function nr(s,t){(t==null||t>s.length)&&(t=s.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=s[e];return i}function Bc(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Uc=Object.prototype.toString,qi=new pe;qi.useLongestToken=!0;qi.tokenize=ar.tokenize;qi.castInput=function(s){var t=this.options,e=t.undefinedReplacement,i=t.stringifyReplacer,n=i===void 0?function(r,o){return typeof o>"u"?e:o}:i;return typeof s=="string"?s:JSON.stringify(rr(s,null,null,n),n,"  ")};qi.equals=function(s,t){return pe.prototype.equals.call(qi,s.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function rr(s,t,e,i,n){t=t||[],e=e||[],i&&(s=i(n,s));var r;for(r=0;r<t.length;r+=1)if(t[r]===s)return e[r];var o;if(Uc.call(s)==="[object Array]"){for(t.push(s),o=new Array(s.length),e.push(o),r=0;r<s.length;r+=1)o[r]=rr(s[r],t,e,i,n);return t.pop(),e.pop(),o}if(s&&s.toJSON&&(s=s.toJSON()),Ys(s)==="object"&&s!==null){t.push(s),o={},e.push(o);var a=[],l;for(l in s)s.hasOwnProperty(l)&&a.push(l);for(a.sort(),r=0;r<a.length;r+=1)l=a[r],o[l]=rr(s[l],t,e,i,l);t.pop(),e.pop()}else o=s;return o}var or=new pe;or.tokenize=function(s){return s.slice()};or.join=or.removeEmpty=function(s){return s};function Gc(s,t,e,i,n,r,o){o||(o={}),typeof o.context>"u"&&(o.context=4);var a=Nc(e,i,o);if(!a)return;a.push({value:"",lines:[]});function l(E){return E.map(function(v){return" "+v})}for(var h=[],u=0,c=0,d=[],p=1,S=1,w=function(v){var _=a[v],O=_.lines||_.value.replace(/\n$/,"").split(`
`);if(_.lines=O,_.added||_.removed){var T;if(!u){var H=a[v-1];u=p,c=S,H&&(d=o.context>0?l(H.lines.slice(-o.context)):[],u-=d.length,c-=d.length)}(T=d).push.apply(T,sr(O.map(function(B){return(_.added?"+":"-")+B}))),_.added?S+=O.length:p+=O.length}else{if(u)if(O.length<=o.context*2&&v<a.length-2){var q;(q=d).push.apply(q,sr(l(O)))}else{var at,J=Math.min(O.length,o.context);(at=d).push.apply(at,sr(l(O.slice(0,J))));var G={oldStart:u,oldLines:p-u+J,newStart:c,newLines:S-c+J,lines:d};if(v>=a.length-2&&O.length<=o.context){var I=/\n$/.test(e),$=/\n$/.test(i),j=O.length==0&&d.length>G.oldLines;!I&&j&&e.length>0&&d.splice(G.oldLines,0,"\\ No newline at end of file"),(!I&&!j||!$)&&d.push("\\ No newline at end of file")}h.push(G),u=0,c=0,d=[]}p+=O.length,S+=O.length}},m=0;m<a.length;m++)w(m);return{oldFileName:s,newFileName:t,oldHeader:n,newHeader:r,hunks:h}}function Ka(s){if(Array.isArray(s))return s.map(Ka).join(`
`);var t=[];s.oldFileName==s.newFileName&&t.push("Index: "+s.oldFileName),t.push("==================================================================="),t.push("--- "+s.oldFileName+(typeof s.oldHeader>"u"?"":"	"+s.oldHeader)),t.push("+++ "+s.newFileName+(typeof s.newHeader>"u"?"":"	"+s.newHeader));for(var e=0;e<s.hunks.length;e++){var i=s.hunks[e];i.oldLines===0&&(i.oldStart-=1),i.newLines===0&&(i.newStart-=1),t.push("@@ -"+i.oldStart+","+i.oldLines+" +"+i.newStart+","+i.newLines+" @@"),t.push.apply(t,i.lines)}return t.join(`
`)+`
`}function Hc(s,t,e,i,n,r,o){return Ka(Gc(s,t,e,i,n,r,o))}function Ja(s,t,e,i,n,r){return Hc(s,s,t,e,i,n,r)}var qs=k(require("fs"),1);function Vs(s,t){return pi(s,t)}function mi(s,t){if(!s)return;let e=t[s]??"";if(qs.default.existsSync(s)){if(!qs.default.statSync(s).isFile())return;let n=qs.default.readFileSync(s,"utf-8");if(!(s in t)&&n===""){console.log(Z.green(`
New empty file: ${s}`));return}if(n===e)return;let r=Ja(s,e,n);kc(s,r)}else s in t&&console.log(Z.red(`
Deleted: ${s}`))}function kc(s,t){console.log(Z.bold(`
Diff for ${s}:`)),t.split(`
`).slice(4).forEach(i=>{i.startsWith("+")?console.log(Z.green(i)):i.startsWith("-")?console.log(Z.red(i)):console.log(i)})}async function Za(s){try{let t=Ds();if(!lr.default.existsSync(t))throw new Error("Not a git repository");let e=JSON.parse(lr.default.readFileSync(t,"utf-8")),i=de();if(s.filepath)Vs(s.filepath,i)||mi(s.filepath,e);else{let n=await At("**/*",{dot:!0,nodir:!0,ignore:i}),r=[...new Set([...n,...Object.keys(e)])];for(let o of r)Vs(o,i)||mi(o,e)}}catch(t){x.error(`Diff failed: ${t.message}`),x.debug(`Stack trace: ${t.stack}`),process.exit(1)}}var Qa=k(require("fs"),1),Xa=k(require("path"),1);async function Ks(s,t){var e;try{if(zt(),!s)throw new Error("Commit message is required");let i=vt();if(!((e=i.remote)!=null&&e.origin))throw new Error('No remote repository configured. Use "remote add" first.');let{owner:n,repo:r}=i.remote.origin,o=t.directory||".";await ti(n,r),x.info(`Pushing to ${n}/${r}...`);let l=(await At("**/*",{cwd:o,nodir:!0,ignore:de(o)})).map(u=>({path:u,mode:"100644",type:"blob",content:Qa.default.readFileSync(Xa.default.join(o,u),"utf-8")})),h=await Rn(n,r,s,l);Rt({...i,lastCommit:h.sha}),await re(o),x.success(`\u2713 Code pushed to https://github.com/${n}/${r}`)}catch(i){x.error(`Push failed: ${i.message}`),process.exit(1)}}var gi=k(require("fs"),1),tl=k(require("path"),1);async function el(s,t,e=[],i={},n=""){if(!i){x.info("No changes to process");return}let{added:r=[],modified:o=[],deleted:a=[],renamed:l=[]}=i,h=[...r,...o];if(l.length>0){x.info(`
Renaming files:`);for(let{from:u,to:c}of l)try{gi.default.existsSync(u)?(gi.default.mkdirSync(tl.default.dirname(c),{recursive:!0}),gi.default.renameSync(u,c),x.success(`\u2713 Renamed: ${u} \u2192 ${c}`)):(h.push(c),x.debug(`Source file ${u} not found, will download ${c} as new file`))}catch(d){throw x.error(`Failed to rename ${u} to ${c}: ${d.message}`),d}}if(a.length>0){x.info(`
Deleting files:`);for(let u of a)try{gi.default.existsSync(u)&&(gi.default.unlinkSync(u),x.success(`\u2713 Deleted: ${u}`))}catch(c){x.error(`Failed to delete ${u}: ${c.message}`)}}if(h.length>0){x.info(`
Downloading files:`);for(let u of h)if(!e.includes(u))try{let c=await Yc(s,t,u,n);c!==null&&(ce(u,c),x.success(`\u2713 Downloaded: ${u}`))}catch(c){x.error(`Failed to download ${u}: ${c.message}`)}}}async function Yc(s,t,e,i=""){try{let n=await Ai(s,t,e,i);return n.content?Buffer.from(n.content,"base64").toString("utf-8"):n.size===0?"":null}catch(n){return x.error(`Failed to fetch file ${e}: ${n.message}`),null}}function il(s,t){let{modified:e,deleted:i}=s;e.length>0&&(x.info(`
Modified files:`),e.forEach(n=>{x.info(Z.red(`  ${n}`)),mi(n,t)})),i.length>0&&(x.info(`
Deleted files:`),i.forEach(n=>{x.info(Z.red(`  ${n}`))}))}function qc(s){let t={added:[],modified:[],deleted:[],renamed:[]};for(let e of s)switch(e.status){case"added":t.added.push(e.filename);break;case"modified":t.modified.push(e.filename);break;case"removed":t.deleted.push(e.filename);break;case"renamed":t.renamed.push({from:e.previous_filename,to:e.filename});break}return t}async function sl(s,t,e,i){var l;let n=Pa(),r=await di(s,t);if(x.debug(`Comparing commits: ${n} -> ${r}`),!n){x.info("No local commit found, performing full sync...");let u={added:(await Ai(s,t,"",r)).filter(c=>c.type==="file").map(c=>c.path),modified:[],deleted:[]};return{remoteCommit:r,changes:u}}if(n===r)return x.info("Already up to date"),{remoteCommit:r,changes:null};let o=await La(s,t,n,r);x.debug(`Found ${((l=o.files)==null?void 0:l.length)||0} changed files`);let a=qc(o.files||[]);if(i!=null&&i.length){let h=u=>!i.some(c=>c===u||c.includes(u));a.added=a.added.filter(h),a.modified=a.modified.filter(h),a.deleted=a.deleted.filter(h),a.renamed=a.renamed.filter(({from:u,to:c})=>h(u)&&h(c))}return{remoteCommit:r,changes:a}}var hr=k(require("fs"),1);function nl(){var s;try{let t=ki();if(!hr.default.existsSync(t))return null;let e=JSON.parse(hr.default.readFileSync(t,"utf-8"));return(s=e.remote)!=null&&s.origin?{owner:e.remote.origin.owner,repo:e.remote.origin.repo}:null}catch(t){return x.debug(`Error reading git config: ${t.message}`),null}}var Js=k(require("fs"),1);async function rl(s,t){let e=await At("**/*",{dot:!0,nodir:!0,ignore:[...Ae,...t]}),i=!1,n={modified:[],deleted:[]};for(let r of e)if(Js.default.existsSync(r)){let o=Js.default.readFileSync(r,"utf-8"),a=s[r]||"";o!==a&&n.modified.push(r)}for(let r of Object.keys(s))!Js.default.existsSync(r)&&!t.includes(r)&&n.deleted.push(r);return i=n.modified.length>0||n.deleted.length>0,{hasChanges:i,changes:n}}async function ol(s={force:!1,dryRun:!1}){var t,e,i,n;try{zt();let r=nl();if(!r)throw new Error('No remote repository configured. Use "remote add" first.');let o=zs(),a=Ws(),{hasChanges:l,changes:h}=await rl(o,a);if(l&&!s.force)throw il(h,o),new Error("Cannot pull with local changes. Commit or reset your changes first, or use --force to override.");let c=vt().lastCommit;x.info(`${s.dryRun?"[DRY RUN] ":""}Pulling from ${r.owner}/${r.repo}`),x.info(`Current commit: ${c}`);let{remoteCommit:d,changes:p}=await sl(r.owner,r.repo,o,a);if(x.info(`Remote commit: ${d}`),p&&(x.info(`
Changes to pull:`),(t=p.renamed)!=null&&t.length&&(x.info(`
Renamed files:`),p.renamed.forEach(({from:S,to:w})=>x.info(`  * ${S} \u2192 ${w}`))),(e=p.added)!=null&&e.length&&(x.info(`
New files:`),p.added.forEach(S=>x.info(`  + ${S}`))),(i=p.modified)!=null&&i.length&&(x.info(`
Modified files:`),p.modified.forEach(S=>x.info(`  * ${S}`))),(n=p.deleted)!=null&&n.length&&(x.info(`
Deleted files:`),p.deleted.forEach(S=>x.info(`  - ${S}`)))),s.dryRun){x.info(`
[DRY RUN] No changes were made`);return}await el(r.owner,r.repo,a,p),ir({remote:{origin:{owner:r.owner,repo:r.repo,url:`https://github.com/${r.owner}/${r.repo}.git`}},lastCommit:d}),await re("."),x.success("\u2713 Pull completed successfully")}catch(r){x.error(`Pull failed: ${r.message}`),process.exit(1)}}var al=k(require("fs"),1);async function ll(s,t){try{if(!al.default.existsSync("_git"))throw new Error("Not a git repository");switch(s){case"add":await Vc(t);break;case"show":await Kc();break;default:throw new Error('Invalid command. Use "add" or "show"')}}catch(e){x.error(`Remote operation failed: ${e.message}`),process.exit(1)}}async function Vc(s){if(zt(),!s)throw new Error("Repository path required (format: owner/repo)");let[t,e]=s.split("/");if(!t||!e)throw new Error("Invalid repository format. Use owner/repo");await ti(t,e);let i={remote:{origin:{owner:t,repo:e,url:`https://github.com/${t}/${e}.git`}}};Rt(i),x.success(`\u2713 Remote origin added: ${t}/${e}`)}async function Kc(){var i;let s=vt();if(!((i=s.remote)!=null&&i.origin)){x.info("No remote repository configured");return}let{owner:t,repo:e}=s.remote.origin;x.info(`origin	https://github.com/${t}/${e}.git (fetch)`),x.info(`origin	https://github.com/${t}/${e}.git (push)`)}var hl=k(require("fs"),1),cl=k(require("path"),1);async function fl(){try{let s="_git";if(cl.default.basename(process.cwd())===s)throw new Error("Cannot initialize git repository inside _git directory");if(hl.default.existsSync(s))throw new Error("Git repository already exists");xe(s),Rt({}),await re("."),x.success("Initialized empty Git repository")}catch(s){x.error(`Init failed: ${s.message}`),process.exit(1)}}var Zs=k(require("fs"),1);async function ul(s,t,e){try{switch(s){case"add":await Jc(t,e.path);break;case"status":await Zc();break;case"push":await Qc(t,e);break;default:throw new Error('Invalid command. Use "add", "status", or "push"')}}catch(i){x.error(`Submodule operation failed: ${i.message}`),process.exit(1)}}async function Jc(s,t){if(zt(),!s)throw new Error("Repository path required (format: owner/repo)");let[e,i]=s.split("/");if(!e||!i)throw new Error("Invalid repository format. Use owner/repo");xe(t);let n=process.cwd();try{process.chdir(t),await Us(s),process.chdir(n);let r=vt();r.submodules=r.submodules||{},r.submodules[t]={owner:e,repo:i},Rt(r),Xc(t),x.success(`\u2713 Submodule added at ${t}`)}finally{process.chdir(n)}}async function Zc(){let s=vt();if(!s.submodules||Object.keys(s.submodules).length===0){x.info("No submodules configured");return}x.info(`
Submodules:`);for(let[t,{owner:e,repo:i}]of Object.entries(s.submodules))x.info(`  ${t} -> ${e}/${i}`)}async function Qc(s,t){let e=vt();if(!e.submodules)throw new Error("No submodules configured");let i=process.cwd(),n=null;for(let[r,o]of Object.entries(e.submodules))if(`${o.owner}/${o.repo}`===s){n=r;break}if(!n)throw new Error(`Submodule ${s} not found`);try{process.chdir(n),await Ks(t.message,{directory:"."})}finally{process.chdir(i)}}function Xc(s){let t=".gitignore",e="";Zs.default.existsSync(t)&&(e=Zs.default.readFileSync(t,"utf-8"),e&&!e.endsWith(`
`)&&(e+=`
`)),e.includes(s)||(e+=`${s}/
`,Zs.default.writeFileSync(t,e),x.debug(`Updated .gitignore with ${s}`))}var wi=k(require("fs"),1);function dl(s,t){return wi.default.existsSync(s)?wi.default.readFileSync(s,"utf-8")!==t:!0}async function pl(s){try{if(!wi.default.existsSync("_git"))throw new Error("Not a git repository");let t=zs();if(Object.keys(t).length===0)throw new Error("No snapshot found");let e=de();s.filepath?await tf(s.filepath,t):await ef(t,e),x.success("Reset completed successfully")}catch(t){x.error(`Reset failed: ${t.message}`),x.debug(`Stack trace: ${t.stack}`),process.exit(1)}}async function tf(s,t){if(!s)return;let e=de();if(pi(s,e)){x.debug(`Skipping ignored file: ${s}`);return}if(!(s in t))throw new Error(`File ${s} not found in snapshot`);if(!dl(s,t[s])){x.debug(`Skipping unmodified file: ${s}`);return}ce(s,t[s]),x.info(`Reset ${s}`)}async function ef(s,t){let e=await At("**/*",{dot:!0,nodir:!0,ignore:t});for(let[i,n]of Object.entries(s))pi(i,t)||(dl(i,n)?(ce(i,n),x.info(`Reset ${i}`)):x.debug(`Skipping unmodified file: ${i}`));for(let i of e)!(i in s)&&!pi(i,t)&&wi.default.existsSync(i)&&(wi.default.unlinkSync(i),x.info(`Removed ${i}`))}var fr=k(require("fs"),1),wl=k(require("path"),1);async function cr(s,t={}){let e=`${he}${s}`,i=await fetch(e,{headers:{Authorization:`token ${process.env.GITHUB_TOKEN}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},...t});if(!i.ok){let n=await i.text();x.error(`GitHub API Error: ${i.status} ${i.statusText}`),x.debug(`Response: ${n}`);let r=new Error(`GitHub API error: ${i.status} ${i.statusText}`);throw r.status=i.status,r}return i.json()}async function ml(s,t,e,i=""){try{let n=i?`?ref=${i}`:"",r=await cr(`/repos/${s}/${t}/contents/${e}${n}`);return r.size===0?"":r.content?Buffer.from(r.content,"base64").toString("utf-8"):null}catch(n){if(n.status===404)return x.debug(`File not found: ${e}`),null;throw n}}async function gl(s,t,e="",i=""){try{let n=i?`?ref=${i}`:"",r=await cr(`/repos/${s}/${t}/contents/${e}${n}`);return Array.isArray(r)?r:[r]}catch(n){if(n.status===404)return x.debug(`Directory not found: ${e}`),[];throw n}}async function bl(s,t={}){try{x.info("Starting attach operation..."),sf(s),zt();let[e,i]=s.split("/");await nf(e,i,t.commit),x.success(`\u2713 Repository ${e}/${i} attached successfully!`)}catch(e){x.error(`Attach failed: ${e.message}`),process.exit(1)}}function sf(s){let[t,e]=s.split("/");if(!t||!e)throw new Error("Invalid repository format. Use owner/repo")}async function nf(s,t,e){x.info(`Attaching ${s}/${t}...`),fr.default.mkdirSync("_git",{recursive:!0});let i=e||await di(s,t);x.info(`Target commit: ${i}`),await yl(s,t,"",i);let n={remote:{origin:{owner:s,repo:t,url:`https://github.com/${s}/${t}.git`}},lastCommit:i};Rt(n),await re(".")}async function yl(s,t,e="",i=""){x.info(`Fetching contents for ${s}/${t}/${e}`);let n=await gl(s,t,e,i);for(let r of n){let o=e?wl.default.join(e,r.name):r.name;if(r.type==="dir")fr.default.mkdirSync(o,{recursive:!0}),await yl(s,t,o,i);else if(r.type==="file"){let a=await ml(s,t,o,i);if(a===null){x.warn(`Failed to download ${o}`);continue}ce(o,a),x.info(`Downloaded: ${o}`)}}}Mo();yo(ln(process.argv)).scriptName("git-api").usage("$0 <cmd> [args]").command("init","Initialize a new git repository",{},fl).command("clone <repo>","Clone a repository",s=>s.positional("repo",{describe:"Repository in format owner/repo",type:"string"}),Us).command("attach <repo>","Initialize current directory and clone repository into it",s=>s.positional("repo",{describe:"Repository in format owner/repo",type:"string"}).option("commit",{alias:"c",describe:"Specific commit hash to attach to",type:"string"}),bl).command("remote <command> [repo]","Manage remote repositories",s=>s.positional("command",{describe:"Command to execute (add, show)",type:"string"}).positional("repo",{describe:"Repository in format owner/repo",type:"string"}),ll).command("push <message>","Push code to remote repository",s=>s.positional("message",{describe:"Commit message",type:"string"}).option("directory",{alias:"d",describe:"Directory to push",default:".",type:"string"}),s=>Ks(s.message,{directory:s.directory})).command("pull","Pull latest changes from remote repository",s=>s.option("force",{alias:"f",describe:"Force pull even with local changes",type:"boolean",default:!1}).option("dry-run",{describe:"Show what would be pulled without making changes",type:"boolean",default:!1}),ol).command("status","Show working tree status",{},ka).command("diff [filepath]","Show changes between working tree and snapshot",s=>s.positional("filepath",{describe:"Optional file path to show diff for",type:"string"}),Za).command("reset [filepath]","Reset working tree to last snapshot",s=>s.positional("filepath",{describe:"Optional file path to reset",type:"string"}),pl).command("submodule <command> [repo]","Manage submodules",s=>s.positional("command",{describe:"Command to execute (add, init, update, status)",type:"string"}).positional("repo",{describe:"Repository in format owner/repo",type:"string"}).option("path",{alias:"p",describe:"Path where to add the submodule",default:"repo",type:"string"}),s=>ul(s.command,s.repo,{path:s.path})).demandCommand(1,"You need at least one command before moving on").strict().help().argv;
/*! Bundled license information:

yargs-parser/build/lib/string-utils.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/tokenize-arg-string.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/yargs-parser-types.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)
*/
